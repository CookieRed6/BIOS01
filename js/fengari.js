!function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=33)}([function(t,e,a){"use strict";function r(t,e){if(t===e)return 0;for(var a=t.length,r=e.length,n=0,u=Math.min(a,r);n<u;++n)if(t[n]!==e[n]){a=t[n],r=e[n];break}return a<r?-1:r<a?1:0}function n(t){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function u(t){return Object.prototype.toString.call(t)}function l(t){return!n(t)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function o(t){if(k.isFunction(t)){if(O)return t.name;var e=t.toString(),a=e.match(U);return a&&a[1]}}function s(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function i(t){if(O||!k.isFunction(t))return k.inspect(t);var e=o(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return s(i(t.actual),128)+" "+t.operator+" "+s(i(t.expected),128)}function _(t,e,a,r,n){throw new m.AssertionError({message:a,actual:t,expected:e,operator:r,stackStartFunction:n})}function f(t,e){t||_(t,!0,e,"==",m.ok)}function p(t,e,a,o){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(k.isDate(t)&&k.isDate(e))return t.getTime()===e.getTime();if(k.isRegExp(t)&&k.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===(void 0===t?"undefined":T(t))||null!==e&&"object"===(void 0===e?"undefined":T(e))){if(l(t)&&l(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;o=o||{actual:[],expected:[]};var s=o.actual.indexOf(t);return-1!==s&&s===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),v(t,e,a,o))}return a?t===e:t==e}function h(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,a,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(k.isPrimitive(t)||k.isPrimitive(e))return t===e;if(a&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=h(t),u=h(e);if(n&&!u||!n&&u)return!1;if(n)return t=x.call(t),e=x.call(e),p(t,e,a);var l,o,s=E(t),i=E(e);if(s.length!==i.length)return!1;for(s.sort(),i.sort(),o=s.length-1;o>=0;o--)if(s[o]!==i[o])return!1;for(o=s.length-1;o>=0;o--)if(l=s[o],!p(t[l],e[l],a,r))return!1;return!0}function g(t,e,a){p(t,e,!0)&&_(t,e,a,"notDeepStrictEqual",g)}function L(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function d(t){var e;try{t()}catch(t){e=t}return e}function A(t,e,a,r){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof a&&(r=a,a=null),n=d(e),r=(a&&a.name?" ("+a.name+").":".")+(r?" "+r:"."),t&&!n&&_(n,a,"Missing expected exception"+r);var u="string"==typeof r,l=!t&&k.isError(n),o=!t&&n&&!a;if((l&&u&&L(n,a)||o)&&_(n,a,"Got unwanted exception"+r),t&&n&&a&&!L(n,a)||!t&&n)throw n}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k=a(19),b=Object.prototype.hasOwnProperty,x=Array.prototype.slice,O=function(){return"foo"===function(){}.name}(),m=t.exports=f,U=/\s*function\s+([^\(\s]*)\s*/;m.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var a=new Error;if(a.stack){var r=a.stack,n=o(e),u=r.indexOf("\n"+n);if(u>=0){var l=r.indexOf("\n",u+1);r=r.substring(l+1)}this.stack=r}}},k.inherits(m.AssertionError,Error),m.fail=_,m.ok=f,m.equal=function(t,e,a){t!=e&&_(t,e,a,"==",m.equal)},m.notEqual=function(t,e,a){t==e&&_(t,e,a,"!=",m.notEqual)},m.deepEqual=function(t,e,a){p(t,e,!1)||_(t,e,a,"deepEqual",m.deepEqual)},m.deepStrictEqual=function(t,e,a){p(t,e,!0)||_(t,e,a,"deepStrictEqual",m.deepStrictEqual)},m.notDeepEqual=function(t,e,a){p(t,e,!1)&&_(t,e,a,"notDeepEqual",m.notDeepEqual)},m.notDeepStrictEqual=g,m.strictEqual=function(t,e,a){t!==e&&_(t,e,a,"===",m.strictEqual)},m.notStrictEqual=function(t,e,a){t===e&&_(t,e,a,"!==",m.notStrictEqual)},m.throws=function(t,e,a){A(!0,t,e,a)},m.doesNotThrow=function(t,e,a){A(!1,t,e,a)},m.ifError=function(t){if(t)throw t};var E=Object.keys||function(t){var e=[];for(var a in t)b.call(t,a)&&e.push(a);return e}},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}for(var n=a(0),u=a(9),l=[],o=0;o<127;o++)l[String.fromCharCode(o)]=o;t.exports.char=l;var s="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",i={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},c={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};c.LUA_TSHRSTR=0|c.LUA_TSTRING,c.LUA_TLNGSTR=16|c.LUA_TSTRING,c.LUA_TNUMFLT=0|c.LUA_TNUMBER,c.LUA_TNUMINT=16|c.LUA_TNUMBER,c.LUA_TLCL=0|c.LUA_TFUNCTION,c.LUA_TLCF=16|c.LUA_TFUNCTION,c.LUA_TCCL=32|c.LUA_TFUNCTION;var _=c,f=-u.LUAI_MAXSTACK-1e3,p=function(t){return f-t},h=function t(){r(this,t),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null},v=function(t){return Array.isArray(t)},g=function(t,e,a){n(v(t),"jsstring expect a array of bytes");var r=void 0,u=void 0,l=void 0,o=void 0,s=void 0,i=void 0,c=0;t=t.slice(e||0,a);for(var _="";;)if(0!==(r=t[c++])){if(!r)return _;if(128&r)if(u=63&t[c++],192!=(224&r))if(l=63&t[c++],224==(240&r)?r=(15&r)<<12|u<<6|l:(o=63&t[c++],240==(248&r)?r=(7&r)<<18|u<<12|l<<6|o:(s=63&t[c++],248==(252&r)?r=(3&r)<<24|u<<18|l<<12|o<<6|s:(i=63&t[c++],r=(1&r)<<30|u<<24|l<<18|o<<12|s<<6|i))),r<65536)_+=String.fromCharCode(r);else{var f=r-65536;_+=String.fromCharCode(55296|f>>10,56320|1023&f)}else _+=String.fromCharCode((31&r)<<6|u);else _+=String.fromCharCode(r)}else _+="\0"},L={},d=function(t,e){if(n("string"==typeof t,"to_luastring expect a js string"),e){var a=L[t];if(v(a))return a}for(var r=[],u=0,l=0;l<t.length;++l){var o=t.codePointAt(l);o>=55296&&l++,o<=127?r[u++]=o:o<=2047?(r[u++]=192|o>>6,r[u++]=128|63&o):o<=65535?(r[u++]=224|o>>12,r[u++]=128|o>>6&63,r[u++]=128|63&o):o<=2097151?(r[u++]=240|o>>18,r[u++]=128|o>>12&63,r[u++]=128|o>>6&63,r[u++]=128|63&o):o<=67108863?(r[u++]=248|o>>24,r[u++]=128|o>>18&63,r[u++]=128|o>>12&63,r[u++]=128|o>>6&63,r[u++]=128|63&o):(r[u++]=252|o>>30,r[u++]=128|o>>24&63,r[u++]=128|o>>18&63,r[u++]=128|o>>12&63,r[u++]=128|o>>6&63,r[u++]=128|63&o)}return e&&(L[t]=r),r};t.exports.LUA_PATH_SEP=";";t.exports.LUA_PATH_MARK="?";t.exports.LUA_EXEC_DIR="!";t.exports.LUA_VDIR="5.3";t.exports.LUA_DIRSEP="/";t.exports.LUA_LDIR="./lua/5.3/";t.exports.LUA_CDIR="./lua/5.3/";t.exports.LUA_PATH_DEFAULT="./lua/5.3/?.lua;./lua/5.3/?/init.lua;./lua/5.3/?.lua;./lua/5.3/?/init.lua;./?.lua;./?/init.lua";t.exports.LUA_CPATH_DEFAULT="./lua/5.3/?.js;./lua/5.3/loadall.js;./?.js",t.exports.CT=_,t.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",t.exports.FENGARI_COPYRIGHT="Fengari 0.0.1  Copyright (C) 2017 B. Giannangeli, Daurnimator\nBased on: Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",t.exports.FENGARI_RELEASE="Fengari 0.0.1",t.exports.FENGARI_VERSION="Fengari 0.0",t.exports.FENGARI_VERSION_MAJOR="0",t.exports.FENGARI_VERSION_MINOR="0",t.exports.FENGARI_VERSION_NUM=1,t.exports.FENGARI_VERSION_RELEASE="1",t.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes",t.exports.LUA_COPYRIGHT=s,t.exports.LUA_HOOKCALL=0,t.exports.LUA_HOOKCOUNT=3,t.exports.LUA_HOOKLINE=2,t.exports.LUA_HOOKRET=1,t.exports.LUA_HOOKTAILCALL=4,t.exports.LUA_INITVARVERSION="LUA_INIT_5_3",t.exports.LUA_INIT_VAR="LUA_INIT",t.exports.LUA_MASKCALL=1,t.exports.LUA_MASKCOUNT=8,t.exports.LUA_MASKLINE=4,t.exports.LUA_MASKRET=2,t.exports.LUA_MINSTACK=20,t.exports.LUA_MULTRET=-1,t.exports.LUA_OPADD=0,t.exports.LUA_OPBAND=7,t.exports.LUA_OPBNOT=13,t.exports.LUA_OPBOR=8,t.exports.LUA_OPBXOR=9,t.exports.LUA_OPDIV=5,t.exports.LUA_OPEQ=0,t.exports.LUA_OPIDIV=6,t.exports.LUA_OPLE=2,t.exports.LUA_OPLT=1,t.exports.LUA_OPMOD=3,t.exports.LUA_OPMUL=2,t.exports.LUA_OPPOW=4,t.exports.LUA_OPSHL=10,t.exports.LUA_OPSHR=11,t.exports.LUA_OPSUB=1,t.exports.LUA_OPUNM=12,t.exports.LUA_REGISTRYINDEX=f,t.exports.LUA_RELEASE="Lua 5.3.4",t.exports.LUA_RIDX_GLOBALS=2,t.exports.LUA_RIDX_LAST=2,t.exports.LUA_RIDX_MAINTHREAD=1,t.exports.LUA_SIGNATURE="Lua",t.exports.LUA_VERSION="Lua 5.3",t.exports.LUA_VERSION_MAJOR="5",t.exports.LUA_VERSION_MINOR="3",t.exports.LUA_VERSION_NUM=503,t.exports.LUA_VERSION_RELEASE="4",t.exports.LUA_VERSUFFIX="_5_3",t.exports.constant_types=c,t.exports.lua_Debug=h,t.exports.lua_upvalueindex=p,t.exports.thread_status=i,t.exports.is_luastring=v,t.exports.to_jsstring=g,t.exports.to_luastring=d},function(t,e,a){"use strict";var r=a(1),n=a(17),u=a(10),l=a(6),o=a(12);t.exports.FENGARI_AUTHORS=r.FENGARI_AUTHORS,t.exports.FENGARI_COPYRIGHT=r.FENGARI_COPYRIGHT,t.exports.FENGARI_RELEASE=r.FENGARI_RELEASE,t.exports.FENGARI_VERSION=r.FENGARI_VERSION,t.exports.FENGARI_VERSION_MAJOR=r.FENGARI_VERSION_MAJOR,t.exports.FENGARI_VERSION_MINOR=r.FENGARI_VERSION_MINOR,t.exports.FENGARI_VERSION_NUM=r.FENGARI_VERSION_NUM,t.exports.FENGARI_VERSION_RELEASE=r.FENGARI_VERSION_RELEASE,t.exports.LUA_AUTHORS=r.LUA_AUTHORS,t.exports.LUA_COPYRIGHT=r.LUA_COPYRIGHT,t.exports.LUA_ERRERR=r.thread_status.LUA_ERRERR,t.exports.LUA_ERRGCMM=r.thread_status.LUA_ERRGCMM,t.exports.LUA_ERRMEM=r.thread_status.LUA_ERRMEM,t.exports.LUA_ERRRUN=r.thread_status.LUA_ERRRUN,t.exports.LUA_ERRSYNTAX=r.thread_status.LUA_ERRSYNTAX,t.exports.LUA_HOOKCALL=r.LUA_HOOKCALL,t.exports.LUA_HOOKCOUNT=r.LUA_HOOKCOUNT,t.exports.LUA_HOOKLINE=r.LUA_HOOKLINE,t.exports.LUA_HOOKRET=r.LUA_HOOKRET,t.exports.LUA_HOOKTAILCALL=r.LUA_HOOKTAILCALL,t.exports.LUA_INITVARVERSION=r.LUA_INITVARVERSION,t.exports.LUA_INIT_VAR=r.LUA_INIT_VAR,t.exports.LUA_MASKCALL=r.LUA_MASKCALL,t.exports.LUA_MASKCOUNT=r.LUA_MASKCOUNT,t.exports.LUA_MASKLINE=r.LUA_MASKLINE,t.exports.LUA_MASKRET=r.LUA_MASKRET,t.exports.LUA_MINSTACK=r.LUA_MINSTACK,t.exports.LUA_MULTRET=r.LUA_MULTRET,t.exports.LUA_NUMTAGS=r.LUA_NUMTAGS,t.exports.LUA_OK=r.thread_status.LUA_OK,t.exports.LUA_OPADD=r.LUA_OPADD,t.exports.LUA_OPBAND=r.LUA_OPBAND,t.exports.LUA_OPBNOT=r.LUA_OPBNOT,t.exports.LUA_OPBOR=r.LUA_OPBOR,t.exports.LUA_OPBXOR=r.LUA_OPBXOR,t.exports.LUA_OPDIV=r.LUA_OPDIV,t.exports.LUA_OPEQ=r.LUA_OPEQ,t.exports.LUA_OPIDIV=r.LUA_OPIDIV,t.exports.LUA_OPLE=r.LUA_OPLE,t.exports.LUA_OPLT=r.LUA_OPLT,t.exports.LUA_OPMOD=r.LUA_OPMOD,t.exports.LUA_OPMUL=r.LUA_OPMUL,t.exports.LUA_OPPOW=r.LUA_OPPOW,t.exports.LUA_OPSHL=r.LUA_OPSHL,t.exports.LUA_OPSHR=r.LUA_OPSHR,t.exports.LUA_OPSUB=r.LUA_OPSUB,t.exports.LUA_OPUNM=r.LUA_OPUNM,t.exports.LUA_REGISTRYINDEX=r.LUA_REGISTRYINDEX,t.exports.LUA_RELEASE=r.LUA_RELEASE,t.exports.LUA_RIDX_GLOBALS=r.LUA_RIDX_GLOBALS,t.exports.LUA_RIDX_LAST=r.LUA_RIDX_LAST,t.exports.LUA_RIDX_MAINTHREAD=r.LUA_RIDX_MAINTHREAD,t.exports.LUA_SIGNATURE=r.LUA_SIGNATURE,t.exports.LUA_TNONE=r.CT.LUA_TNONE,t.exports.LUA_TNIL=r.CT.LUA_TNIL,t.exports.LUA_TBOOLEAN=r.CT.LUA_TBOOLEAN,t.exports.LUA_TLIGHTUSERDATA=r.CT.LUA_TLIGHTUSERDATA,t.exports.LUA_TNUMBER=r.CT.LUA_TNUMBER,t.exports.LUA_TSTRING=r.CT.LUA_TSTRING,t.exports.LUA_TTABLE=r.CT.LUA_TTABLE,t.exports.LUA_TFUNCTION=r.CT.LUA_TFUNCTION,t.exports.LUA_TUSERDATA=r.CT.LUA_TUSERDATA,t.exports.LUA_TTHREAD=r.CT.LUA_TTHREAD,t.exports.LUA_VERSION=r.LUA_VERSION,t.exports.LUA_VERSION_MAJOR=r.LUA_VERSION_MAJOR,t.exports.LUA_VERSION_MINOR=r.LUA_VERSION_MINOR,t.exports.LUA_VERSION_NUM=r.LUA_VERSION_NUM,t.exports.LUA_VERSION_RELEASE=r.LUA_VERSION_RELEASE,t.exports.LUA_VERSUFFIX=r.LUA_VERSUFFIX,t.exports.LUA_YIELD=r.thread_status.LUA_YIELD,t.exports.lua_Debug=r.lua_Debug,t.exports.lua_upvalueindex=r.lua_upvalueindex,t.exports.to_jsstring=r.to_jsstring,t.exports.to_luastring=r.to_luastring,t.exports.LUA_CDIR=r.LUA_CDIR,t.exports.LUA_CPATH_DEFAULT=r.LUA_CPATH_DEFAULT,t.exports.LUA_EXEC_DIR=r.LUA_EXEC_DIR,t.exports.LUA_LDIR=r.LUA_LDIR,t.exports.LUA_PATH_DEFAULT=r.LUA_PATH_DEFAULT,t.exports.LUA_PATH_MARK=r.LUA_PATH_MARK,t.exports.LUA_PATH_SEP=r.LUA_PATH_SEP,t.exports.LUA_ROOT=r.LUA_ROOT,t.exports.LUA_SHRDIR=r.LUA_SHRDIR,t.exports.LUA_VDIR=r.LUA_VDIR,t.exports.LUA_DIRSEP=r.LUA_DIRSEP,t.exports.lua_absindex=n.lua_absindex,t.exports.lua_arith=n.lua_arith,t.exports.lua_atpanic=n.lua_atpanic,t.exports.lua_atnativeerror=n.lua_atnativeerror,t.exports.lua_call=n.lua_call,t.exports.lua_callk=n.lua_callk,t.exports.lua_checkstack=n.lua_checkstack,t.exports.lua_close=o.lua_close,t.exports.lua_compare=n.lua_compare,t.exports.lua_concat=n.lua_concat,t.exports.lua_copy=n.lua_copy,t.exports.lua_createtable=n.lua_createtable,t.exports.lua_dump=n.lua_dump,t.exports.lua_error=n.lua_error,t.exports.lua_gc=n.lua_gc,t.exports.lua_getallocf=n.lua_getallocf,t.exports.lua_getextraspace=n.lua_getextraspace,t.exports.lua_getfield=n.lua_getfield,t.exports.lua_getglobal=n.lua_getglobal,t.exports.lua_gethook=u.lua_gethook,t.exports.lua_gethookcount=u.lua_gethookcount,t.exports.lua_gethookmask=u.lua_gethookmask,t.exports.lua_geti=n.lua_geti,t.exports.lua_getinfo=u.lua_getinfo,t.exports.lua_getlocal=u.lua_getlocal,t.exports.lua_getmetatable=n.lua_getmetatable,t.exports.lua_getstack=u.lua_getstack,t.exports.lua_gettable=n.lua_gettable,t.exports.lua_gettop=n.lua_gettop,t.exports.lua_getupvalue=n.lua_getupvalue,t.exports.lua_getuservalue=n.lua_getuservalue,t.exports.lua_insert=n.lua_insert,t.exports.lua_isboolean=n.lua_isboolean,t.exports.lua_iscfunction=n.lua_iscfunction,t.exports.lua_isfunction=n.lua_isfunction,t.exports.lua_isinteger=n.lua_isinteger,t.exports.lua_islightuserdata=n.lua_islightuserdata,t.exports.lua_isnil=n.lua_isnil,t.exports.lua_isnone=n.lua_isnone,t.exports.lua_isnoneornil=n.lua_isnoneornil,t.exports.lua_isnumber=n.lua_isnumber,t.exports.lua_isproxy=n.lua_isproxy,t.exports.lua_isstring=n.lua_isstring,t.exports.lua_istable=n.lua_istable,t.exports.lua_isthread=n.lua_isthread,t.exports.lua_isuserdata=n.lua_isuserdata,t.exports.lua_isyieldable=l.lua_isyieldable,t.exports.lua_len=n.lua_len,t.exports.lua_load=n.lua_load,t.exports.lua_newstate=o.lua_newstate,t.exports.lua_newtable=n.lua_newtable,t.exports.lua_newthread=o.lua_newthread,t.exports.lua_newuserdata=n.lua_newuserdata,t.exports.lua_next=n.lua_next,t.exports.lua_pcall=n.lua_pcall,t.exports.lua_pcallk=n.lua_pcallk,t.exports.lua_pop=n.lua_pop,t.exports.lua_pushboolean=n.lua_pushboolean,t.exports.lua_pushcclosure=n.lua_pushcclosure,t.exports.lua_pushcfunction=n.lua_pushcfunction,t.exports.lua_pushfstring=n.lua_pushfstring,t.exports.lua_pushglobaltable=n.lua_pushglobaltable,t.exports.lua_pushinteger=n.lua_pushinteger,t.exports.lua_pushjsclosure=n.lua_pushjsclosure,t.exports.lua_pushjsfunction=n.lua_pushjsfunction,t.exports.lua_pushlightuserdata=n.lua_pushlightuserdata,t.exports.lua_pushliteral=n.lua_pushliteral,t.exports.lua_pushlstring=n.lua_pushlstring,t.exports.lua_pushnil=n.lua_pushnil,t.exports.lua_pushnumber=n.lua_pushnumber,t.exports.lua_pushstring=n.lua_pushstring,t.exports.lua_pushthread=n.lua_pushthread,t.exports.lua_pushvalue=n.lua_pushvalue,t.exports.lua_pushvfstring=n.lua_pushvfstring,t.exports.lua_rawequal=n.lua_rawequal,t.exports.lua_rawget=n.lua_rawget,t.exports.lua_rawgeti=n.lua_rawgeti,t.exports.lua_rawgetp=n.lua_rawgetp,t.exports.lua_rawlen=n.lua_rawlen,t.exports.lua_rawset=n.lua_rawset,t.exports.lua_rawseti=n.lua_rawseti,t.exports.lua_rawsetp=n.lua_rawsetp,t.exports.lua_register=n.lua_register,t.exports.lua_remove=n.lua_remove,t.exports.lua_replace=n.lua_replace,t.exports.lua_resume=l.lua_resume,t.exports.lua_rotate=n.lua_rotate,t.exports.lua_setallof=l.lua_setallof,t.exports.lua_setfield=n.lua_setfield,t.exports.lua_setglobal=n.lua_setglobal,t.exports.lua_sethook=u.lua_sethook,t.exports.lua_seti=n.lua_seti,t.exports.lua_setlocal=u.lua_setlocal,t.exports.lua_setmetatable=n.lua_setmetatable,t.exports.lua_settable=n.lua_settable,t.exports.lua_settop=n.lua_settop,t.exports.lua_setupvalue=n.lua_setupvalue,t.exports.lua_setuservalue=n.lua_setuservalue,t.exports.lua_status=n.lua_status,t.exports.lua_stringtonumber=n.lua_stringtonumber,t.exports.lua_toboolean=n.lua_toboolean,t.exports.lua_todataview=n.lua_todataview,t.exports.lua_tointeger=n.lua_tointeger,t.exports.lua_tointegerx=n.lua_tointegerx,t.exports.lua_tojsstring=n.lua_tojsstring,t.exports.lua_toljsstring=n.lua_toljsstring,t.exports.lua_tolstring=n.lua_tolstring,t.exports.lua_tonumber=n.lua_tonumber,t.exports.lua_tonumberx=n.lua_tonumberx,t.exports.lua_topointer=n.lua_topointer,t.exports.lua_toproxy=n.lua_toproxy,t.exports.lua_tostring=n.lua_tostring,t.exports.lua_tothread=n.lua_tothread,t.exports.lua_touserdata=n.lua_touserdata,t.exports.lua_type=n.lua_type;t.exports.lua_typename=n.lua_typename,t.exports.lua_upvalueid=n.lua_upvalueid,t.exports.lua_upvaluejoin=n.lua_upvaluejoin,t.exports.lua_version=n.lua_version,t.exports.lua_xmove=n.lua_xmove,t.exports.lua_yield=l.lua_yield,t.exports.lua_yieldk=l.lua_yieldk,t.exports.lua_tocfunction=n.lua_tocfunction},function(t,e,a){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),l=a(0),o=a(1),s=a(21),i=a(10),c=a(6),_=a(11),f=a(12),p=a(8),h=a(7),v=a(9),g=a(14),L=a(4),d=a(13),A=o.constant_types,T=o.char,k=A.LUA_NUMTAGS,b=A.LUA_NUMTAGS+1,x=function(){function t(e,a){n(this,t),this.type=e,this.value=a}return u(t,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(t){return this.type===t}},{key:"checktype",value:function(t){return this.ttnov()===t}},{key:"ttisnumber",value:function(){return this.checktype(A.LUA_TNUMBER)}},{key:"ttisfloat",value:function(){return this.checktag(A.LUA_TNUMFLT)}},{key:"ttisinteger",value:function(){return this.checktag(A.LUA_TNUMINT)}},{key:"ttisnil",value:function(){return this.checktag(A.LUA_TNIL)}},{key:"ttisboolean",value:function(){return this.checktag(A.LUA_TBOOLEAN)}},{key:"ttislightuserdata",value:function(){return this.checktag(A.LUA_TLIGHTUSERDATA)}},{key:"ttisstring",value:function(){return this.checktype(A.LUA_TSTRING)}},{key:"ttisshrstring",value:function(){return this.checktag(A.LUA_TSHRSTR)}},{key:"ttislngstring",value:function(){return this.checktag(A.LUA_TLNGSTR)}},{key:"ttistable",value:function(){return this.checktag(A.LUA_TTABLE)}},{key:"ttisfunction",value:function(){return this.checktype(A.LUA_TFUNCTION)}},{key:"ttisclosure",value:function(){return(31&this.type)===A.LUA_TFUNCTION}},{key:"ttisCclosure",value:function(){return this.checktag(A.LUA_TCCL)}},{key:"ttisLclosure",value:function(){return this.checktag(A.LUA_TLCL)}},{key:"ttislcf",value:function(){return this.checktag(A.LUA_TLCF)}},{key:"ttisfulluserdata",value:function(){return this.checktag(A.LUA_TUSERDATA)}},{key:"ttisthread",value:function(){return this.checktag(A.LUA_TTHREAD)}},{key:"ttisdeadkey",value:function(){return this.checktag(b)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(t){this.type=A.LUA_TNUMFLT,this.value=t}},{key:"chgfltvalue",value:function(t){l(this.type==A.LUA_TNUMFLT),this.value=t}},{key:"setivalue",value:function(t){this.type=A.LUA_TNUMINT,this.value=t}},{key:"chgivalue",value:function(t){l(this.type==A.LUA_TNUMINT),this.value=t}},{key:"setnilvalue",value:function(){this.type=A.LUA_TNIL,this.value=void 0}},{key:"setfvalue",value:function(t){this.type=A.LUA_TLCF,this.value=t}},{key:"setpvalue",value:function(t){this.type=A.LUA_TLIGHTUSERDATA,this.value=t}},{key:"setbvalue",value:function(t){this.type=A.LUA_TBOOLEAN,this.value=t}},{key:"setsvalue",value:function(t){this.type=A.LUA_TLNGSTR,this.value=t}},{key:"setuvalue",value:function(t){this.type=A.LUA_TUSERDATA,this.value=t}},{key:"setthvalue",value:function(t){this.type=A.LUA_TTHREAD,this.value=t}},{key:"setclLvalue",value:function(t){this.type=A.LUA_TLCL,this.value=t}},{key:"setclCvalue",value:function(t){this.type=A.LUA_TCCL,this.value=t}},{key:"sethvalue",value:function(t){this.type=A.LUA_TTABLE,this.value=t}},{key:"setdeadvalue",value:function(){this.type=b,this.value=null}},{key:"setfrom",value:function(t){this.type=t.type,this.value=t.value}},{key:"tsvalue",value:function(){return l(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(t,e){return o.to_jsstring(this.svalue(),t,e)}}]),t}(),O=function(t,e){t.stack[t.top++]=new x(e.type,e.value)},m=function(t,e){t.stack[t.top++]=new x(A.LUA_TLNGSTR,e)},U=function(t,e,a){t.stack[e].setfrom(t.stack[a])},E=function(t,e,a){t.stack[e].setfrom(a)},N=function(t,e,a){t.stack[e].setsvalue(a)},S=new x(A.LUA_TNIL,null);Object.freeze(S),t.exports.luaO_nilobject=S;var R=function t(e,a){n(this,t),this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=a,this.upvals=new Array(a)},y=function t(e,a,r){for(n(this,t),this.id=e.l_G.id_counter++,this.f=a,this.nupvalues=r,this.upvalue=new Array(r);r--;)this.upvalue[r]=new x(A.LUA_TNIL,null)},I=function t(e,a){n(this,t),this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new x(A.LUA_TNIL,null),this.len=a,this.data=Object.create(null)},M=function t(){n(this,t),this.varname=null,this.startpc=NaN,this.endpc=NaN},C=o.to_luastring("...",!0),w=o.to_luastring('[string "'),P=o.to_luastring('"]'),D=function(t,e){var a=t.length,r=void 0;if(t[0]===T["="])r=a<e?t.slice(1):t.slice(1,e);else if(t[0]===T["@"])a<=e?r=t.slice(1):(e-=C.length,r=C.concat(t.slice(1+a-e)));else{var n=t.indexOf(T["\n"]);r=w,e-=w.length+C.length+P.length+1,a<e&&-1===n?r=r.concat(t,P):(-1!==n&&(a=n),a>e&&(a=e),r=r.concat(t.slice(0,a),C,P))}return r},K=function(t){return s.lisdigit(t)?t-T[0]:String.fromCharCode(t).toLowerCase().charCodeAt(0)-T.a+10},B=function(t,e){var a=1;if(l(e<=1114111),e<128)t[7]=e;else{var r=63;do{t[8-a++]=128|63&e,e>>=6,r>>=1}while(e>r);t[8-a]=~r<<1|e}return a},G=function(t){for(var e=0,a=T[v.lua_getlocaledecpoint()],r=0,n=0,u=0,l=0,o=void 0,i=!1;s.lisspace(t[e]);)e++;if((o=t[e]===T["-"])?e++:t[e]===T["+"]&&e++,t[e]!==T[0]||t[e+1]!==T.x&&t[e+1]!==T.X)return null;for(e+=2;;e++)if(t[e]===a){if(i)break;i=!0}else{if(!s.lisxdigit(t[e]))break;0===n&&t[e]===T[0]?u++:++n<=30?r=16*r+K(t[e]):l++,i&&l--}if(u+n===0)return null;if(l*=4,t[e]===T.p||t[e]===T.P){var c=0,_=void 0;if(e++,(_=t[e]===T["-"])?e++:t[e]===T["+"]&&e++,!s.lisdigit(t[e]))return null;for(;s.lisdigit(t[e]);)c=10*c+t[e++]-T[0];_&&(c=-c),l+=c}for(o&&(r=-r);s.lisspace(t[e]);)e++;return e===t.length?v.ldexp(r,l):null},V=function(t){var e=o.to_jsstring(t);if(!/^[\t\v\f \n\r]*[\+\-]?([0-9]+\.?[0-9]*|\.[0-9]*)([eE][\+\-]?[0-9]+)?[\t\v\f \n\r]*$/.test(e))return null;var a=parseFloat(e);return isNaN(a)?null:a},F=function(t,e){return"x"===e?G(t):V(t)},X=function(t){var e=/[.xXnN]/g.exec(String.fromCharCode.apply(String,r(t)));e=e?e.index:null;var a=e?t[e]:null,n=a?String.fromCharCode(a).toLowerCase():0;if("n"===n)return null;var u=F(t,n);return u},j=Math.floor(L.MAX_INT/10),H=L.MAX_INT%10,z=function(t){for(var e=0,a=0,r=!0,n=void 0;s.lisspace(t[e]);)e++;if((n=t[e]===T["-"])?e++:t[e]===T["+"]&&e++,t[e]!==T[0]||t[e+1]!==T.x&&t[e+1]!==T.X)for(;s.lisdigit(t[e]);e++){var u=t[e]-T[0];if(a>=j&&(a>j||u>H+n))return null;a=10*a+u|0,r=!1}else for(e+=2;s.lisxdigit(t[e]);e++)a=16*a+K(t[e])|0,r=!1;for(;s.lisspace(t[e]);)e++;return r||e!==t.length?null:0|(n?-a:a)},Y=function(t){var e=z(t);return null!==e?new x(A.LUA_TNUMINT,e):null!==(e=X(t))&&new x(A.LUA_TNUMFLT,e)},Z=function(t){var e=[],a=1;if(l(t<=1114111),t<128)e[7]=t;else{var r=63;do{e[8-a++]=128|63&t,t>>=6,r>>=1}while(t>r);e[8-a]=~r<<1|t}return{buff:e,n:a}},J=function(t,e){var a=void 0;if(e.ttisinteger())a=o.to_luastring(v.lua_integer2str(e.value));else{var r=v.lua_number2str(e.value);a=o.to_luastring(r),/^[-0123456789]+$/.test(r)&&(a.push(T[v.lua_getlocaledecpoint()]),a.push(T[0]))}e.setsvalue(p.luaS_bless(t,a))},q=function(t,e){c.luaD_inctop(t),N(t,t.top-1,p.luaS_new(t,e))},W=function(t,e,a){for(var r=0,n=0,u=0,l=void 0;;){if(-1==(l=e.indexOf(T["%"],n)))break;switch(q(t,e.slice(n,l)),e[l+1]){case T.s:var p=a[u++];null===p&&(p=o.to_luastring("(null)",!0)),q(t,p);break;case T.c:var v=a[u++];s.lisprint(v)?q(t,[v]):Q(t,o.to_luastring("<\\%d>",!0),v);break;case T.d:case T.I:c.luaD_inctop(t),t.stack[t.top-1].setivalue(a[u++]),J(t,t.stack[t.top-1]);break;case T.f:c.luaD_inctop(t),t.stack[t.top-1].setfltvalue(a[u++]),J(t,t.stack[t.top-1]);break;case T.p:var L=a[u++];L instanceof f.lua_State||L instanceof h.Table||L instanceof I||L instanceof R||L instanceof y||L instanceof _.UpVal?q(t,o.to_luastring("0x"+L.id.toString(16))):q(t,o.to_luastring("<id NYI>"));break;case T.U:q(t,o.to_luastring(String.fromCodePoint(a[u++])));break;case T["%"]:q(t,[T["%"]]);break;default:i.luaG_runerror(t,o.to_luastring("invalid option '%%%c' to 'lua_pushfstring'"),e[l+1])}r+=2,n=l+2}return c.luaD_checkstack(t,1),q(t,e.slice(n)),r>0&&g.luaV_concat(t,r+1),t.stack[t.top-1].svalue()},Q=function(t,e){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return W(t,e,r)},$=function(t){var e=0;if(t<8)return t;for(;t>=128;)t=t+15>>4,e+=4;for(;t>=16;)t=t+1>>1,e++;return e+1<<3|t-8},tt=function(t,e,a,r){switch(e){case o.LUA_OPADD:return a+r|0;case o.LUA_OPSUB:return a-r|0;case o.LUA_OPMUL:return Math.imul(a,r);case o.LUA_OPMOD:return g.luaV_mod(t,a,r);case o.LUA_OPIDIV:return g.luaV_div(t,a,r);case o.LUA_OPBAND:return a&r;case o.LUA_OPBOR:return a|r;case o.LUA_OPBXOR:return a^r;case o.LUA_OPSHL:return g.luaV_shiftl(a,r);case o.LUA_OPSHR:return g.luaV_shiftl(a,-r);case o.LUA_OPUNM:return 0-a|0;case o.LUA_OPBNOT:return-1^a;default:l(0)}},et=function(t,e,a,r){switch(e){case o.LUA_OPADD:return a+r;case o.LUA_OPSUB:return a-r;case o.LUA_OPMUL:return a*r;case o.LUA_OPDIV:return a/r;case o.LUA_OPPOW:return Math.pow(a,r);case o.LUA_OPIDIV:return Math.floor(a/r);case o.LUA_OPUNM:return-a;case o.LUA_OPMOD:return L.luai_nummod(t,a,r);default:l(0)}},at=function(t,e,a,r,n){var u="number"==typeof n?t.stack[n]:n;switch(e){case o.LUA_OPBAND:case o.LUA_OPBOR:case o.LUA_OPBXOR:case o.LUA_OPSHL:case o.LUA_OPSHR:case o.LUA_OPBNOT:var s=void 0,i=void 0;if(!1!==(s=g.tointeger(a))&&!1!==(i=g.tointeger(r)))return void u.setivalue(tt(t,e,s,i));break;case o.LUA_OPDIV:case o.LUA_OPPOW:var c=void 0,_=void 0;if(!1!==(c=g.tonumber(a))&&!1!==(_=g.tonumber(r)))return void u.setfltvalue(et(t,e,c,_));break;default:var f=void 0,p=void 0;if(a.ttisinteger()&&r.ttisinteger())return void u.setivalue(tt(t,e,a.value,r.value));if(!1!==(f=g.tonumber(a))&&!1!==(p=g.tonumber(r)))return void u.setfltvalue(et(t,e,f,p))}l(null!==t),d.luaT_trybinTM(t,a,r,n,e-o.LUA_OPADD+d.TMS.TM_ADD)};t.exports.CClosure=y,t.exports.LClosure=R,t.exports.LUA_TDEADKEY=b,t.exports.LUA_TPROTO=k,t.exports.LocVar=M,t.exports.TValue=x,t.exports.Udata=I,t.exports.UTF8BUFFSZ=8,t.exports.luaO_arith=at,t.exports.luaO_chunkid=D,t.exports.luaO_hexavalue=K,t.exports.luaO_int2fb=$,t.exports.luaO_pushfstring=Q,t.exports.luaO_pushvfstring=W,t.exports.luaO_str2num=Y,t.exports.luaO_tostring=J,t.exports.luaO_utf8desc=B,t.exports.luaO_utf8esc=Z,t.exports.numarith=et,t.exports.pushobj2s=O,t.exports.pushsvalue2s=m,t.exports.setobjs2s=U,t.exports.setobj2s=E,t.exports.setsvalue2s=N},function(t,e,a){"use strict";t.exports.LUAI_MAXCCALLS=200;t.exports.LUA_MAXINTEGER=2147483647;t.exports.LUA_MININTEGER=-2147483648;var r=function(t,e,a){var r=e%a;return r*a<0&&(r+=a),r};t.exports.luai_nummod=r;t.exports.MAX_INT=2147483647;t.exports.MIN_INT=-2147483648},function(t,e,a){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=a(2),l=u.to_luastring("FILE*",!0),o=function t(){n(this,t),this.b=null,this.L=null},s=function t(e,a,r){if(0===r||!u.lua_istable(e,-1))return 0;for(u.lua_pushnil(e);u.lua_next(e,-2);){if(u.lua_type(e,-2)===u.LUA_TSTRING){if(u.lua_rawequal(e,a,-1))return u.lua_pop(e,1),1;if(t(e,a,r-1))return u.lua_remove(e,-2),u.lua_pushliteral(e,"."),u.lua_insert(e,-2),u.lua_concat(e,3),1}u.lua_pop(e,1)}return 0},i=function(t,e){var a=u.lua_gettop(t);if(u.lua_getinfo(t,["f".charCodeAt(0)],e),u.lua_getfield(t,u.LUA_REGISTRYINDEX,u.to_luastring("_LOADED",!0)),s(t,a+1,2)){var r=u.lua_tostring(t,-1);return u.to_jsstring(r).startsWith("_G.")&&(u.lua_pushstring(t,r.slice(3)),u.lua_remove(t,-2)),u.lua_copy(t,-1,a+1),u.lua_pop(t,2),1}return u.lua_settop(t,a),0},c=function(t,e){i(t,e)?(u.lua_pushfstring(t,u.to_luastring("function '%s'"),u.lua_tostring(t,-1)),u.lua_remove(t,-2)):0!==e.namewhat.length?u.lua_pushfstring(t,u.to_luastring("%s '%s'"),e.namewhat,e.name):e.what&&e.what[0]==="m".charCodeAt(0)?u.lua_pushliteral(t,"main chunk"):e.what&&e.what[0]!="C".charCodeAt(0)?u.lua_pushfstring(t,u.to_luastring("function <%s:%d>"),e.short_src,e.linedefined):u.lua_pushliteral(t,"?")},_=function(t){for(var e=new u.lua_Debug,a=1,r=1;u.lua_getstack(t,r,e);)a=r,r*=2;for(;a<r;){var n=Math.floor((a+r)/2);u.lua_getstack(t,n,e)?a=n+1:r=n}return r-1},f=function(t,e,a,r){var n=new u.lua_Debug,l=u.lua_gettop(t),o=_(e),s=o-r>21?10:-1;for(a&&u.lua_pushfstring(t,u.to_luastring("%s\n"),a),pt(t,10,null),u.lua_pushliteral(t,"stack traceback:");u.lua_getstack(e,r++,n);)0==s--?(u.lua_pushliteral(t,"\n\t..."),r=o-11+1):(u.lua_getinfo(e,u.to_luastring("Slnt",!0),n),u.lua_pushfstring(t,u.to_luastring("\n\t%s:"),n.short_src),n.currentline>0&&u.lua_pushliteral(t,n.currentline+":"),u.lua_pushliteral(t," in "),c(t,n),n.istailcall&&u.lua_pushliteral(t,"\n\t(...tail calls..)"),u.lua_concat(t,u.lua_gettop(t)-l));u.lua_concat(t,u.lua_gettop(t)-l)},p=function(t){throw new Error("PANIC: unprotected error in call to Lua API ("+u.lua_tojsstring(t,-1)+")")},h=function(t,e,a){var r=new u.lua_Debug;return u.lua_getstack(t,0,r)?(u.lua_getinfo(t,["n".charCodeAt(0)],r),"method"===u.to_jsstring(r.namewhat)&&0===--e?L(t,u.to_luastring("calling '%s' on bad self (%s)"),r.name,a):(null===r.name&&(r.name=i(t,r)?u.lua_tostring(t,-1):["?".charCodeAt(0)]),L(t,u.to_luastring("bad argument #%d to '%s' (%s)"),e,r.name,a))):L(t,u.to_luastring("bad argument #%d (%s)"),e,a)},v=function(t,e,a){var r=void 0;r=nt(t,e,u.to_luastring("__name",!0))===u.LUA_TSTRING?u.lua_tostring(t,-1):u.lua_type(t,e)===u.LUA_TLIGHTUSERDATA?u.to_luastring("light userdata",!0):N(t,e);var n=u.lua_pushfstring(t,u.to_luastring("%s expected, got %s"),a,r);return h(t,e,n)},g=function(t,e){var a=new u.lua_Debug;if(u.lua_getstack(t,e,a)&&(u.lua_getinfo(t,u.to_luastring("Sl",!0),a),a.currentline>0))return void u.lua_pushfstring(t,u.to_luastring("%s:%d: "),a.short_src,a.currentline);u.lua_pushstring(t,[])},L=function(t,e){g(t,1);for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return u.lua_pushvfstring(t,e,r),u.lua_concat(t,2),u.lua_error(t)},d=function(t,e,a,r){return e?(u.lua_pushboolean(t,1),1):(u.lua_pushnil(t),a?u.lua_pushstring(t,u.to_luastring(u.to_jsstring(a)+": "+r.message)):u.lua_pushstring(t,u.to_luastring(r.message)),u.lua_pushinteger(t,-r.errno),3)},A=function(t,e){var a=void 0,r=void 0;if(null===e)return u.lua_pushboolean(t,1),u.lua_pushliteral(t,"exit"),u.lua_pushinteger(t,0),3;if(e.status)a="exit",r=e.status;else{if(!e.signal)return d(t,0,null,e);a="signal",r=e.signal}return u.lua_pushnil(t),u.lua_pushliteral(t,a),u.lua_pushinteger(t,r),3},T=function(t,e){return u.lua_getfield(t,u.LUA_REGISTRYINDEX,e)},k=function(t,e){return T(t,e)!==u.LUA_TNIL?0:(u.lua_pop(t,1),u.lua_createtable(t,0,2),u.lua_pushstring(t,e),u.lua_setfield(t,-2,u.to_luastring("__name")),u.lua_pushvalue(t,-1),u.lua_setfield(t,u.LUA_REGISTRYINDEX,e),1)},b=function(t,e){T(t,e),u.lua_setmetatable(t,-2)},x=function(t,e,a){var r=u.lua_touserdata(t,e);return null!==r&&u.lua_getmetatable(t,e)?(T(t,a),u.lua_rawequal(t,-1,-2)||(r=null),u.lua_pop(t,2),r):null},O=function(t,e,a){var r=x(t,e,a);return null===r&&v(t,e,a),r},m=function(t,e,a,r){for(var n=a?w(t,e,a):I(t,e),l=0;r[l];l++)if(r[l].join("|")===n.join("|"))return l;return h(t,e,u.lua_pushfstring(t,u.to_luastring("invalid option '%s'"),n))},U=function(t,e,a){v(t,e,u.lua_typename(t,a))},E=function(){var t=u.lua_newstate();return t&&u.lua_atpanic(t,p),t},N=function(t,e){return u.lua_typename(t,u.lua_type(t,e))},S=function(t,e,a,r){e||h(t,a,r)},R=function(t,e){u.lua_type(t,e)===u.LUA_TNONE&&h(t,e,u.to_luastring("value expected",!0))},y=function(t,e,a){u.lua_type(t,e)!==a&&U(t,e,a)},I=function(t,e){return M(t,e,null)},M=function(t,e){var a=u.lua_tolstring(t,e);return null!==a&&void 0!==a||U(t,e,u.LUA_TSTRING),a},C=function(t,e,a){return u.lua_type(t,e)<=0?a:M(t,e)},w=C,P=function(t,e){u.lua_isnumber(t,e)?h(t,e,u.to_luastring("number has no integer representation",!0)):U(t,e,u.LUA_TNUMBER)},D=function(t,e){var a=u.lua_tonumberx(t,e);return!1===a&&U(t,e,u.LUA_TNUMBER),a},K=function(t,e,a){return Q(t,D,e,a)},B=function(t,e){var a=u.lua_tointeger(t,e);return!1===a&&P(t,e),a},G=function(t,e,a){return Q(t,B,e,a)},V=function(t,e){return t},F=function(t,e){e.L=t,e.b=[]},X=function(t,e,a){return F(t,e),e},j=function(t){return V(t)},H=function(t,e,a){t.b=t.b.concat(e.slice(0,a))},z=H,Y=function(t){var e=t.L;u.lua_pushstring(e,t.b)},Z=function(t,e){t.b.push(e)},J=function(t,e){t.n+=e},q=function(t,e){J(t,e),Y(t)},W=function(t){var e=t.L,a=u.lua_tostring(e,-1);z(t,a),u.lua_remove(e,-1)},Q=function(t,e,a,r){return u.lua_type(t,a)<=0?r:e(t,a)},$=function(t,e){var a=e.string;return e.string=null,a},tt=function(t,e,a,r,n){return u.lua_load(t,$,{string:e},r,n)},et=function(t,e,a,r){return tt(t,e,0,r,null)},at=function(t,e){return et(t,e,e.length,e)},rt=function(t,e){return at(t,e)||u.lua_pcall(t,0,u.LUA_MULTRET,0)},nt=function(t,e,a){if(u.lua_getmetatable(t,e)){u.lua_pushstring(t,a);var r=u.lua_rawget(t,-2);return r===u.LUA_TNIL&&u.lua_pop(t,2),r}return u.LUA_TNIL},ut=function(t,e,a){return e=u.lua_absindex(t,e),nt(t,e,a)!==u.LUA_TNIL&&(u.lua_pushvalue(t,e),u.lua_call(t,1,1),!0)},lt=function(t,e){u.lua_len(t,e);var a=u.lua_tointegerx(t,-1);return!1===a&&L(t,u.to_luastring("object length is not an integer",!0)),u.lua_pop(t,1),a},ot=function(t,e){if(ut(t,e,u.to_luastring("__tostring",!0)))u.lua_isstring(t,-1)||L(t,u.to_luastring("'__tostring' must return a string",!0));else{switch(u.lua_type(t,e)){case u.LUA_TNUMBER:u.lua_isinteger(t,e)?u.lua_pushfstring(t,u.to_luastring("%I"),u.lua_tointeger(t,e)):u.lua_pushfstring(t,u.to_luastring("%f"),u.lua_tonumber(t,e));break;case u.LUA_TSTRING:u.lua_pushvalue(t,e);break;case u.LUA_TBOOLEAN:u.lua_pushliteral(t,u.lua_toboolean(t,e)?"true":"false");break;case u.LUA_TNIL:u.lua_pushliteral(t,"nil");break;default:var a=nt(t,e,u.to_luastring("__name",!0)),r=a===u.LUA_TSTRING?u.lua_tostring(t,-1):N(t,e);u.lua_pushfstring(t,u.to_luastring("%s: %p"),r,u.lua_topointer(t,e)),a!==u.LUA_TNIL&&u.lua_remove(t,-2)}}return u.lua_tolstring(t,-1)},st=function(t,e,a,r){_t(t,u.LUA_REGISTRYINDEX,u.to_luastring("_LOADED")),u.lua_getfield(t,-1,e),u.lua_toboolean(t,-1)||(u.lua_pop(t,1),u.lua_pushcfunction(t,a),u.lua_pushstring(t,e),u.lua_call(t,1,1),u.lua_pushvalue(t,-1),u.lua_setfield(t,-3,e)),u.lua_remove(t,-2),r&&(u.lua_pushvalue(t,-1),u.lua_setglobal(t,e))},it=function(t,e,a){var r=a>>>0,n=e.length,u=t.length+1-n;t:for(;r<u;r++){for(var l=0;l<n;l++)if(t[r+l]!==e[l])continue t;return r}return-1},ct=function(t,e,a,n){for(var l=void 0,o=[];(l=it(e,a))>=0;)o.push.apply(o,r(e.slice(0,l))),o.push.apply(o,r(n)),e=e.slice(l+a.length);return o.push.apply(o,r(e)),u.lua_pushstring(t,o),u.lua_tostring(t,-1)},_t=function(t,e,a){return u.lua_getfield(t,e,a)===u.LUA_TTABLE||(u.lua_pop(t,1),e=u.lua_absindex(t,e),u.lua_newtable(t),u.lua_pushvalue(t,-1),u.lua_setfield(t,e,a),!1)},ft=function(t,e,a){pt(t,a,u.to_luastring("too many upvalues",!0));for(var r in e){for(var n=0;n<a;n++)u.lua_pushvalue(t,-a);u.lua_pushcclosure(t,e[r],a),u.lua_setfield(t,-(a+2),u.to_luastring(r))}u.lua_pop(t,a)},pt=function(t,e,a){u.lua_checkstack(t,e)||(a?L(t,u.to_luastring("stack overflow (%s)"),a):L(t,u.to_luastring("stack overflow",!0)))},ht=function(t){u.lua_createtable(t)},vt=function(t,e){u.lua_createtable(t),ft(t,e,0)},gt=function(t,e){var a=void 0;return u.lua_isnil(t,-1)?(u.lua_pop(t,1),-1):(e=u.lua_absindex(t,e),u.lua_rawgeti(t,e,0),a=u.lua_tointeger(t,-1),u.lua_pop(t,1),0!==a?(u.lua_rawgeti(t,e,a),u.lua_rawseti(t,e,0)):a=u.lua_rawlen(t,e)+1,u.lua_rawseti(t,e,a),a)},Lt=function(t,e,a){a>=0&&(e=u.lua_absindex(t,e),u.lua_rawgeti(t,e,0),u.lua_rawseti(t,e,a),u.lua_pushinteger(t,a),u.lua_rawseti(t,e,0))},dt=function(t,e,a,r){var n=r.message,l=u.lua_tostring(t,a).slice(1);return u.lua_pushstring(t,u.to_luastring("cannot "+e+" "+u.to_jsstring(l)+": "+n)),u.lua_remove(t,a),u.LUA_ERRFILE},At=void 0,Tt=[239,187,191],kt=function(t){t.n=0;var e=void 0,a=0;do{if(null===(e=At(t))||e!==Tt[a])return e;a++,t.buff[t.n++]=e}while(a<Tt.length);return t.n=0,At(t)},bt=function(t){var e=kt(t);if(e==="#".charCodeAt(0)){do{e=At(t)}while(e&&e!=="\n".charCodeAt(0));return{skipped:!0,c:At(t)}}return{skipped:!1,c:e}},xt=void 0,Ot=function t(){n(this,t),this.n=NaN,this.f=null,this.buff=new Array(1024),this.pos=0,this.err=void 0},mt=function(t,e){var a=e;if(null!==a.f&&a.n>0){var r=a.n;return a.n=0,a.f=a.f.slice(a.pos),a.buff.slice(0,r)}var n=a.f;return a.f=null,n};At=function(t){return t.pos<t.f.length?t.f[t.pos++]:null},xt=function(t,e,a){var r=new Ot,n=u.lua_gettop(t)+1;if(null===e)throw new Error("Can't read stdin in the browser");u.lua_pushfstring(t,u.to_luastring("@%s"),e);var l=u.to_jsstring(e),o=new XMLHttpRequest;if(o.open("GET",l,!1),o.send(),!(o.status>=200&&o.status<=299))return r.err=o.status,dt(t,"open",n,{message:o.status+": "+o.statusText});r.f=u.to_luastring(o.response);var s=bt(r);s.c===u.LUA_SIGNATURE.charCodeAt(0)&&e||s.skipped&&(r.buff[r.n++]="\n".charCodeAt(0)),null!==s.c&&(r.buff[r.n++]=s.c);var i=u.lua_load(t,mt,r,u.lua_tostring(t,-1),a),c=r.err;return c?(u.lua_settop(t,n),dt(t,"read",n,c)):(u.lua_remove(t,n),i)};var Ut=function(t,e){return xt(t,e,null)},Et=function(t,e){return Ut(t,e)||u.lua_pcall(t,0,u.LUA_MULTRET,0)},Nt=function(t){process.stderr.write(t)},St=function(t){var e=u.LUA_VERSION_NUM,a=u.lua_version(t);a!=u.lua_version(null)?L(t,u.to_luastring("multiple Lua VMs detected")):a!==e&&L(t,u.to_luastring("version mismatch: app. needs %f, Lua core provides %f"),e,a)};t.exports.LUA_FILEHANDLE=l,t.exports.LUA_LOADED_TABLE="_LOADED",t.exports.LUA_NOREF=-2,t.exports.LUA_PRELOAD_TABLE="_PRELOAD",t.exports.LUA_REFNIL=-1,t.exports.luaL_Buffer=o,t.exports.luaL_addchar=Z,t.exports.luaL_addlstring=H,t.exports.luaL_addsize=J,t.exports.luaL_addstring=z,t.exports.luaL_addvalue=W,t.exports.luaL_argcheck=S,t.exports.luaL_argerror=h,t.exports.luaL_buffinit=F,t.exports.luaL_buffinitsize=X,t.exports.luaL_callmeta=ut,t.exports.luaL_checkany=R,t.exports.luaL_checkinteger=B,t.exports.luaL_checklstring=M,t.exports.luaL_checknumber=D,t.exports.luaL_checkoption=m,t.exports.luaL_checkstack=pt,t.exports.luaL_checkstring=I,t.exports.luaL_checktype=y,t.exports.luaL_checkudata=O,t.exports.luaL_checkversion=St,t.exports.luaL_dofile=Et,t.exports.luaL_dostring=rt,t.exports.luaL_error=L,t.exports.luaL_execresult=A,t.exports.luaL_fileresult=d,t.exports.luaL_getmetafield=nt,t.exports.luaL_getmetatable=T,t.exports.luaL_getsubtable=_t,t.exports.luaL_gsub=ct,t.exports.luaL_len=lt,t.exports.luaL_loadbuffer=et,t.exports.luaL_loadbufferx=tt,t.exports.luaL_loadfile=Ut,t.exports.luaL_loadfilex=xt,t.exports.luaL_loadstring=at,t.exports.luaL_newlib=vt,t.exports.luaL_newlibtable=ht,t.exports.luaL_newmetatable=k,t.exports.luaL_newstate=E,t.exports.luaL_opt=Q,t.exports.luaL_optinteger=G,t.exports.luaL_optlstring=C,t.exports.luaL_optnumber=K,t.exports.luaL_optstring=w,t.exports.luaL_prepbuffer=j,t.exports.luaL_prepbuffsize=V,t.exports.luaL_pushresult=Y,t.exports.luaL_pushresultsize=q,t.exports.luaL_ref=gt,t.exports.luaL_requiref=st,t.exports.luaL_setfuncs=ft,t.exports.luaL_setmetatable=b,t.exports.luaL_testudata=x,t.exports.luaL_tolstring=ot,t.exports.luaL_traceback=f,t.exports.luaL_typename=N,t.exports.luaL_unref=Lt,t.exports.luaL_where=g,t.exports.lua_writestringerror=Nt},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(1),l=a(17),o=a(10),s=a(11),i=a(4),c=a(3),_=a(15),f=a(22),p=a(12),h=a(8),v=a(13),g=a(9),L=a(37),d=a(14),A=a(16),T=u.constant_types,k=u.thread_status,b=function(t,e){if(t.top<e)for(;t.top<e;)t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null);else for(;t.top>e;)delete t.stack[--t.top]},x=function(t,e,a){for(var r=t.top;t.top<a+1;)t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null);switch(e){case k.LUA_ERRMEM:c.setsvalue2s(t,a,h.luaS_newliteral(t,"not enough memory"));break;case k.LUA_ERRERR:c.setsvalue2s(t,a,h.luaS_newliteral(t,"error in error handling"));break;default:c.setobjs2s(t,a,r-1)}for(;t.top>a+1;)delete t.stack[--t.top]},O=g.LUAI_MAXSTACK+200,m=function(t,e){n(e<=g.LUAI_MAXSTACK||e==O),n(t.stack_last==t.stack.length-p.EXTRA_STACK),t.stack.length=e,t.stack_last=e-p.EXTRA_STACK},U=function(t,e){var a=t.stack.length;if(a>g.LUAI_MAXSTACK)G(t,k.LUA_ERRERR);else{var r=t.top+e+p.EXTRA_STACK,n=2*a;n>g.LUAI_MAXSTACK&&(n=g.LUAI_MAXSTACK),n<r&&(n=r),n>g.LUAI_MAXSTACK?(m(t,O),o.luaG_runerror(t,u.to_luastring("stack overflow",!0))):m(t,n)}},E=function(t,e){t.stack_last-t.top<=e&&U(t,e)},N=function(t){for(var e=t.top,a=t.ci;null!==a;a=a.previous)e<a.top&&(e=a.top);return n(e<=t.stack_last),e+1},S=function(t){var e=N(t),a=e+Math.floor(e/8)+2*p.EXTRA_STACK;a>g.LUAI_MAXSTACK&&(a=g.LUAI_MAXSTACK),t.stack.length>g.LUAI_MAXSTACK&&p.luaE_freeCI(t),e<=g.LUAI_MAXSTACK-p.EXTRA_STACK&&a<t.stack.length&&m(t,a)},R=function(t){E(t,1),t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null)},y=function t(e,a,r){var l=e.stack[a];switch(l.type){case T.LUA_TCCL:case T.LUA_TLCF:var o=l.type===T.LUA_TCCL?l.value.f:l.value;E(e,u.LUA_MINSTACK);var s=p.luaE_extendCI(e);s.funcOff=a,s.nresults=r,s.func=l,s.top=e.top+u.LUA_MINSTACK,n(s.top<=e.stack_last),s.callstatus=0,e.hookmask&u.LUA_MASKCALL&&C(e,u.LUA_HOOKCALL,-1);var i=o(e);return n("number"==typeof i&&i>=0&&(0|i)===i,"invalid return value from JS function (expected integer)"),n(i<e.top-e.ci.funcOff,"not enough elements in the stack"),I(e,s,e.top-i,i),!0;case T.LUA_TLCL:var _=void 0,f=l.value.p,h=e.top-a-1,v=f.maxstacksize;if(E(e,v),f.is_vararg)_=P(e,f,h);else{for(;h<f.numparams;h++)e.stack[e.top++]=new c.TValue(T.LUA_TNIL,null);_=a+1}var g=p.luaE_extendCI(e);return g.funcOff=a,g.nresults=r,g.func=l,g.l_base=_,g.top=_+v,b(e,g.top),g.l_code=f.code,g.l_savedpc=0,g.callstatus=p.CIST_LUA,e.hookmask&u.LUA_MASKCALL&&w(e,g),!1;default:return E(e,1),D(e,a,l),t(e,a,r)}},I=function(t,e,a,r){var n=e.nresults;t.hookmask&(u.LUA_MASKRET|u.LUA_MASKLINE)&&(t.hookmask&u.LUA_MASKRET&&C(t,u.LUA_HOOKRET,-1),t.oldpc=e.previous.l_savedpc);var l=e.funcOff;return t.ci=e.previous,t.ci.next=null,M(t,a,l,r,n)},M=function(t,e,a,r,n){switch(n){case 0:break;case 1:0===r?t.stack[a].setnilvalue():c.setobjs2s(t,a,e);break;case u.LUA_MULTRET:for(var l=0;l<r;l++)c.setobjs2s(t,a+l,e+l);for(var o=t.top;o>=a+r;o--)delete t.stack[o];return t.top=a+r,!1;default:var s=void 0;if(n<=r)for(s=0;s<n;s++)c.setobjs2s(t,a+s,e+s);else{for(s=0;s<r;s++)c.setobjs2s(t,a+s,e+s);for(;s<n;s++)a+s>=t.top?t.stack[a+s]=new c.TValue(T.LUAT_NIL,null):t.stack[a+s].setnilvalue()}}for(var i=a+n,_=t.top;_>=i;_--)delete t.stack[_];return t.top=i,!0},C=function(t,e,a){var r=t.hook;if(r&&t.allowhook){var l=t.ci,o=t.top,s=l.top,i=new u.lua_Debug;i.event=e,i.currentline=a,i.i_ci=l,E(t,u.LUA_MINSTACK),l.top=t.top+u.LUA_MINSTACK,n(l.top<=t.stack_last),t.allowhook=0,l.callstatus|=p.CIST_HOOKED,r(t,i),n(!t.allowhook),t.allowhook=1,l.top=s,b(t,o),l.callstatus&=~p.CIST_HOOKED}},w=function(t,e){var a=u.LUA_HOOKCALL;e.l_savedpc++,e.previous.callstatus&p.CIST_LUA&&e.previous.l_code[e.previous.l_savedpc-1].opcode==_.OpCodesI.OP_TAILCALL&&(e.callstatus|=p.CIST_TAIL,a=u.LUA_HOOKTAILCALL),C(t,a,-1),e.l_savedpc--},P=function(t,e,a){var r=e.numparams,n=t.top-a,u=t.top,l=void 0;for(l=0;l<r&&l<a;l++)c.pushobj2s(t,t.stack[n+l]),t.stack[n+l].setnilvalue();for(;l<r;l++)t.stack[t.top++]=new c.TValue(T.LUA_TNIL,null);return u},D=function(t,e,a){var r=v.luaT_gettmbyobj(t,a,v.TMS.TM_CALL);r.ttisfunction(r)||o.luaG_typeerror(t,a,u.to_luastring("call",!0)),c.pushobj2s(t,t.stack[t.top-1]);for(var n=t.top-2;n>e;n--)c.setobjs2s(t,n,n-1);c.setobj2s(t,e,r)},K=function(t){t.nCcalls===i.LUAI_MAXCCALLS?o.luaG_runerror(t,u.to_luastring("JS stack overflow",!0)):t.nCcalls>=i.LUAI_MAXCCALLS+(i.LUAI_MAXCCALLS>>3)&&G(t,k.LUA_ERRERR)},B=function(t,e,a){++t.nCcalls>=i.LUAI_MAXCCALLS&&K(t),y(t,e,a)||d.luaV_execute(t),t.nCcalls--},G=function t(e,a){if(e.errorJmp)throw e.errorJmp.status=a,e.errorJmp;var r=e.l_G;if(e.status=a,!r.mainthread.errorJmp){var n=r.panic;throw n&&(x(e,a,e.top),e.ci.top<e.top&&(e.ci.top=e.top),n(e)),new Error("Aborted "+a)}r.mainthread.stack[r.mainthread.top++]=e.stack[e.top-1],t(r.mainthread,a)},V=function(t,e,a){var r=t.nCcalls,n={status:k.LUA_OK,previous:t.errorJmp};t.errorJmp=n;try{e(t,a)}catch(e){if(n.status===k.LUA_OK){var u=t.l_G.atnativeerror;if(u)try{if(n.status=k.LUA_OK,l.lua_pushcfunction(t,u),l.lua_pushlightuserdata(t,e),$(t,t.top-2,1),0!==t.errfunc){var o=t.errfunc;c.pushobj2s(t,t.stack[t.top-1]),c.setobjs2s(t,t.top-2,o),$(t,t.top-2,1)}n.status=k.LUA_ERRRUN}catch(t){n.status===k.LUA_OK&&(n.status=-1)}else n.status=-1}}return t.errorJmp=n.previous,t.nCcalls=r,n.status},F=function(t,e){var a=t.ci;n(null!==a.c_k&&0===t.nny),n(a.callstatus&p.CIST_YPCALL||e===k.LUA_YIELD),a.callstatus&k.CIST_YPCALL&&(a.callstatus&=~k.CIST_YPCALL,t.errfunc=a.c_old_errfunc),a.nresults===u.LUA_MULTRET&&t.ci.top<t.top&&(t.ci.top=t.top);var r=a.c_k,l=r(t,e,a.c_ctx);n(l<t.top-t.ci.funcOff,"not enough elements in the stack"),I(t,a,t.top-l,l)},X=function(t,e){for(null!==e&&F(t,e);t.ci!==t.base_ci;)t.ci.callstatus&p.CIST_LUA?(d.luaV_finishOp(t),d.luaV_execute(t)):F(t,k.LUA_YIELD)},j=function(t){for(var e=t.ci;null!==e;e=e.previous)if(e.callstatus&p.CIST_YPCALL)return e;return null},H=function(t,e){var a=j(t);if(null===a)return 0;var r=a.extra;return s.luaF_close(t,r),x(t,e,r),t.ci=a,t.allowhook=a.callstatus&p.CIST_OAH,t.nny=0,S(t),t.errfunc=a.c_old_errfunc,1},z=function(t,e,a){var r=h.luaS_newliteral(t,e);if(0===a)c.pushsvalue2s(t,r),n(t.top<=t.ci.top,"stack overflow");else{for(var u=1;u<a;u++)delete t.stack[--t.top];c.setsvalue2s(t,t.top-1,r)}return k.LUA_ERRRUN},Y=function(t,e){var a=t.top-e,r=t.ci;t.status===k.LUA_OK?y(t,a-1,u.LUA_MULTRET)||d.luaV_execute(t):(n(t.status===k.LUA_YIELD),t.status=k.LUA_OK,r.funcOff=r.extra,r.func=t.stack[r.funcOff],r.callstatus&p.CIST_LUA?d.luaV_execute(t):(null!==r.c_k&&(e=r.c_k(t,k.LUA_YIELD,r.c_ctx),n(e<t.top-t.ci.funcOff,"not enough elements in the stack"),a=t.top-e),I(t,r,a,e)),X(t,null))},Z=function(t,e,a){var r=t.nny;if(t.status===k.LUA_OK){if(t.ci!==t.base_ci)return z(t,"cannot resume non-suspended coroutine",a)}else if(t.status!==k.LUA_YIELD)return z(t,"cannot resume dead coroutine",a);if(t.nCcalls=e?e.nCcalls+1:1,t.nCcalls>=i.LUAI_MAXCCALLS)return z(t,"JS stack overflow",a);t.nny=0,n((t.status===k.LUA_OK?a+1:a)<t.top-t.ci.funcOff,"not enough elements in the stack");var u=V(t,Y,a);if(-1===u)u=k.LUA_ERRRUN;else{for(;u>k.LUA_YIELD&&H(t,u);)u=V(t,X,u);u>k.LUA_YIELD?(t.status=u,x(t,u,t.top),t.ci.top=t.top):n(u===t.status)}return t.nny=r,t.nCcalls--,n(t.nCcalls===(e?e.nCcalls:0)),u},J=function(t){return 0===t.nny},q=function(t,e,a,r){var l=t.ci;return n(e<t.top-t.ci.funcOff,"not enough elements in the stack"),t.nny>0&&(t!==t.l_G.mainthread?o.luaG_runerror(t,u.to_luastring("attempt to yield across a JS-call boundary",!0)):o.luaG_runerror(t,u.to_luastring("attempt to yield from outside a coroutine",!0))),t.status=k.LUA_YIELD,l.extra=l.funcOff,l.callstatus&p.CIST_LUA?n(null===r,"hooks cannot continue after yielding"):(l.c_k=r,null!==r&&(l.c_ctx=a),l.funcOff=t.top-e-1,l.func=t.stack[l.funcOff],G(t,k.LUA_YIELD)),n(l.callstatus&p.CIST_HOOKED),0},W=function(t,e){q(t,e,0,null)},Q=function(t,e,a,r,n){var u=t.ci,l=t.allowhook,o=t.nny,i=t.errfunc;t.errfunc=n;var c=V(t,e,a);return c!==k.LUA_OK&&(s.luaF_close(t,r),x(t,c,r),t.ci=u,t.allowhook=l,t.nny=o,S(t)),t.errfunc=i,c},$=function(t,e,a){t.nny++,B(t,e,a),t.nny--},tt=function t(e,a,n){r(this,t),this.z=e,this.buff=new A.MBuffer,this.dyd=new f.Dyndata,this.mode=n,this.name=a},et=function(t,e,a){e&&-1===e.indexOf(a[0])&&(l.lua_pushstring(t,u.to_luastring("attempt to load a "+u.to_jsstring(a)+" chunk (mode is '"+u.to_jsstring(e)+"')")),G(t,k.LUA_ERRSYNTAX))},at=function(t,e){var a=void 0,r=e.z.zgetc();r===u.LUA_SIGNATURE.charCodeAt(0)?(et(t,e.mode,u.to_luastring("binary",!0)),a=L.luaU_undump(t,e.z,e.name)):(et(t,e.mode,u.to_luastring("text",!0)),a=f.luaY_parser(t,e.z,e.buff,e.dyd,e.name,r)),n(a.nupvalues===a.p.upvalues.length),s.luaF_initupvals(t,a)},rt=function(t,e,a,r){var n=new tt(e,a,r);t.nny++;var u=Q(t,at,n,t.top,t.errfunc);return t.nny--,u};t.exports.adjust_top=b,t.exports.luaD_call=B,t.exports.luaD_callnoyield=$,t.exports.luaD_checkstack=E,t.exports.luaD_growstack=U,t.exports.luaD_hook=C,t.exports.luaD_inctop=R,t.exports.luaD_pcall=Q,t.exports.luaD_poscall=I,t.exports.luaD_precall=y,t.exports.luaD_protectedparser=rt,t.exports.luaD_rawrunprotected=V,t.exports.luaD_reallocstack=m,t.exports.luaD_throw=G,t.exports.lua_isyieldable=J,t.exports.lua_resume=Z,t.exports.lua_yield=W,t.exports.lua_yieldk=q},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=a(0),l=a(1),o=a(10),s=a(3),i=a(8),c=a(12),_=l.constant_types,f=new WeakMap,p=function(t){var e=f.get(t);return e||(e={},f.set(t,e)),e},h=function(t,e){switch(e.type){case _.LUA_TNIL:return o.luaG_runerror(t,l.to_luastring("table index is nil",!0));case _.LUA_TNUMFLT:if(isNaN(e.value))return o.luaG_runerror(t,l.to_luastring("table index is NaN",!0));case _.LUA_TNUMINT:case _.LUA_TBOOLEAN:case _.LUA_TTABLE:case _.LUA_TLCL:case _.LUA_TLCF:case _.LUA_TCCL:case _.LUA_TUSERDATA:case _.LUA_TTHREAD:return e.value;case _.LUA_TSHRSTR:case _.LUA_TLNGSTR:return i.luaS_hashlongstr(e.tsvalue());case _.LUA_TLIGHTUSERDATA:var a=e.value;switch(void 0===a?"undefined":n(a)){case"string":return"*"+a;case"number":return"#"+a;case"boolean":return a?"?true":"?false";case"function":return p(a);case"object":if(a instanceof c.lua_State&&a.l_G===t.l_G||a instanceof v||a instanceof s.Udata||a instanceof s.LClosure||a instanceof s.CClosure)return p(a);default:return a}default:throw new Error("unknown key type: "+e.type)}},v=function t(e){r(this,t),this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1},g=function(t){t.flags=0},L=function(t,e,a,r){t.dead_strong.clear(),t.dead_weak=void 0;var n=null,u={key:a,value:r,p:n=t.l,n:void 0};t.f||(t.f=u),n&&(n.n=u),t.strong.set(e,u),t.l=u},d=function(t){return"object"===(void 0===t?"undefined":n(t))?null!==t:"function"==typeof t},A=function(t,e){var a=t.strong.get(e);if(a){a.key.setdeadvalue(),a.value=void 0;var r=a.n,n=a.p;a.p=void 0,n&&(n.n=r),r&&(r.p=n),t.f===a&&(t.f=r),t.l===a&&(t.l=n),t.strong.delete(e),d(e)?(t.dead_weak||(t.dead_weak=new WeakMap),t.dead_weak.set(e,a)):t.dead_strong.set(e,a)}},T=function(t){return new v(t)},k=function(t,e){var a=t.strong.get(e);return a?a.value:s.luaO_nilobject},b=function(t,e){return u("number"==typeof e&&(0|e)===e),k(t,e)},x=function(t,e){return u(e instanceof i.TString),k(t,i.luaS_hashlongstr(e))},O=function(t,e,a){return u(a instanceof s.TValue),a.ttisnil()||a.ttisfloat()&&isNaN(a.value)?s.luaO_nilobject:k(e,h(t,a))},m=function(t,e,a){var r=t.strong.get(e);if(r)return r.value;var n=a.value;a=a.ttisfloat()&&(0|n)===n?new s.TValue(_.LUA_TNUMINT,n):new s.TValue(a.type,n);var u=new s.TValue(_.LUA_TNIL,null);return L(t,e,a,u),u},U=function(t,e,a){u("number"==typeof e&&(0|e)===e&&a instanceof s.TValue);var r=e;if(a.ttisnil())return void A(t,r);var n=t.strong.get(r);if(n){n.value.setfrom(a)}else{var l=new s.TValue(_.LUA_TNUMINT,e),o=new s.TValue(a.type,a.value);L(t,r,l,o)}},E=function(t,e,a){u(a instanceof s.TValue);var r=h(t,a);return m(e,r,a)},N=function(t,e,a){u(a instanceof s.TValue);var r=h(t,a);return A(e,r)},S=function(t){for(var e=0,a=t.strong.size+1;a-e>1;){var r=Math.floor((e+a)/2);b(t,r).ttisnil()?a=r:e=r}return e},R=function(t,e,a){var r=t.stack[a],n=void 0;if(r.type===_.LUA_TNIL){if(!(n=e.f))return!1}else{var u=h(t,r);if(n=e.strong.get(u)){if(!(n=n.n))return!1}else{if(!(n=e.dead_weak&&e.dead_weak.get(u)||e.dead_strong.get(u)))return o.luaG_runerror(t,l.to_luastring("invalid key to 'next'"));do{if(!(n=n.n))return!1}while(n.key.ttisdeadkey())}}return s.setobj2s(t,a,n.key),s.setobj2s(t,a+1,n.value),!0};t.exports.invalidateTMcache=g,t.exports.luaH_delete=N,t.exports.luaH_get=O,t.exports.luaH_getint=b,t.exports.luaH_getn=S,t.exports.luaH_getstr=x,t.exports.luaH_set=E,t.exports.luaH_setint=U,t.exports.luaH_new=T,t.exports.luaH_next=R,t.exports.Table=v},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=function(){function t(e,a){r(this,t),this.hash=null,this.realstring=a}return n(t,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),t}(),s=function(t,e){return u(t instanceof o),u(e instanceof o),t==e||t.realstring.length==e.realstring.length&&t.realstring.join()==e.realstring.join()},i=function(t){return u(l.is_luastring(t)),t.map(function(t){return t+"|"}).join("")},c=function(t){return u(t instanceof o),null===t.hash&&(t.hash=i(t.getstr())),t.hash},_=function(t,e){return new o(t,e)},f=function(t,e){return _(t,e.slice(0))},p=function(t,e){return _(t,l.to_luastring(e))};t.exports.luaS_eqlngstr=s,t.exports.luaS_hash=i,t.exports.luaS_hashlongstr=c,t.exports.luaS_bless=_,t.exports.luaS_new=f,t.exports.luaS_newliteral=p,t.exports.TString=o},function(t,e,a){"use strict";var r=a(4),n=a(20).sprintf,u=function(t){return n(s,t)},l=function(t){return n(i,t)},o=function(t){return t>=r.MIN_INT&&t<-r.MIN_INT&&t},s="%d",i="%.14g",c=function(){return 1.1.toLocaleString().substring(1,2)},_=function(t){if(0===t)return[t,0];var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);var a=e.getUint32(0)>>>20&2047;0===a&&(e.setFloat64(0,t*Math.pow(2,64)),a=(e.getUint32(0)>>>20&2047)-64);var r=a-1022;return[f(t,-r),r]},f=function(t,e){for(var a=Math.min(3,Math.ceil(Math.abs(e)/1023)),r=t,n=0;n<a;n++)r*=Math.pow(2,Math.floor((e+n)/a));return r};t.exports.frexp=_,t.exports.ldexp=f,t.exports.LUAI_MAXSTACK=1e5,t.exports.LUA_IDSIZE=60,t.exports.LUA_INTEGER_FMT=s,t.exports.LUA_INTEGER_FRMLEN="",t.exports.LUA_NUMBER_FMT=i,t.exports.LUA_NUMBER_FRMLEN="",t.exports.lua_getlocaledecpoint=c,t.exports.lua_integer2str=u,t.exports.lua_number2str=l,t.exports.lua_numbertointeger=o},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(6),l=a(11),o=a(3),s=a(15),i=a(12),c=a(7),_=a(13),f=a(9),p=a(14),h=n.constant_types,v=n.thread_status,g=function(t){return r(t.callstatus&i.CIST_LUA),t.l_savedpc-1},L=function(t){return 0!==t.func.value.p.lineinfo.length?t.func.value.p.lineinfo[g(t)]:-1},d=function(t){if(t.status===v.LUA_YIELD){var e=t.ci,a=e.funcOff;e.func=t.stack[e.extra],e.funcOff=e.extra,e.extra=a}},A=function(t,e,a,r){null!==e&&0!==a||(a=0,e=null),t.ci.callstatus&i.CIST_LUA&&(t.oldpc=t.ci.l_savedpc),t.hook=e,t.basehookcount=r,t.hookcount=t.basehookcount,t.hookmask=a},T=function(t){return t.hook},k=function(t){return t.hookmask},b=function(t){return t.basehookcount},x=function(t,e,a){var r=void 0,n=void 0;if(e<0)return 0;for(r=t.ci;e>0&&r!==t.base_ci;r=r.previous)e--;return 0===e&&r!==t.base_ci?(n=1,a.i_ci=r):n=0,n},O=function(t,e){r(e<t.upvalues.length);var a=t.upvalues[e].name;return null===a?["?".charCodeAt(0)]:a.getstr()},m=function(t,e){var a=t.func.value.p.numparams;return e>=t.l_base-t.funcOff-a?null:{pos:t.funcOff+a+e,name:n.to_luastring("(*vararg)",!0)}},U=function(t,e,a){var r=void 0,u=null;if(e.callstatus&i.CIST_LUA){if(a<0)return m(e,-a);r=e.l_base,u=l.luaF_getlocalname(e.func.value.p,a,g(e))}else r=e.funcOff+1;if(null===u){if(!((e===t.ci?t.top:e.next.funcOff)-r>=a&&a>0))return null;u=n.to_luastring("(*temporary)",!0)}return{pos:r+(a-1),name:u}},E=function(t,e,a){var n=void 0;if(d(t),null===e)n=t.stack[t.top-1].ttisLclosure()?l.luaF_getlocalname(t.stack[t.top-1].value.p,a,0):null;else{var u=U(t,e.i_ci,a);u?(n=u.name,o.pushobj2s(t,t.stack[u.pos]),r(t.top<=t.ci.top,"stack overflow")):n=null}return d(t),n},N=function(t,e,a){var r=void 0;d(t);var n=U(t,e.i_ci,a);return n?(r=n.name,o.setobjs2s(t,n.pos,t.top-1),delete t.stack[--t.top]):r=null,d(t),r},S=function(t,e){if(null===e||e instanceof o.CClosure)t.source=n.to_luastring("=[JS]",!0),t.linedefined=-1,t.lastlinedefined=-1,t.what=["J".charCodeAt(0)];else{var a=e.p;t.source=a.source?a.source.getstr():n.to_luastring("=?",!0),t.linedefined=a.linedefined,t.lastlinedefined=a.lastlinedefined,t.what=0===t.linedefined?n.to_luastring("main",!0):n.to_luastring("Lua",!0)}t.short_src=o.luaO_chunkid(t.source,f.LUA_IDSIZE)},R=function(t,e){if(null===e||e instanceof o.CClosure)t.stack[t.top]=new o.TValue(h.LUA_TNIL,null),t.top++,r(t.top<=t.ci.top,"stack overflow");else{var a=e.p.lineinfo,n=c.luaH_new(t);t.stack[t.top]=new o.TValue(h.LUA_TTABLE,n),t.top++,r(t.top<=t.ci.top,"stack overflow");for(var u=new o.TValue(h.LUA_TBOOLEAN,!0),l=0;l<a.length;l++)c.luaH_setint(n,a[l],u)}},y=function(t,e){var a={name:null,funcname:null};return null===e?null:e.callstatus&i.CIST_FIN?(a.name=n.to_luastring("__gc",!0),a.funcname=n.to_luastring("metamethod",!0),a):!(e.callstatus&i.CIST_TAIL)&&e.previous.callstatus&i.CIST_LUA?K(t,e.previous):null},I=function(t,e,a,r,n){for(var u=1;e.length>0;e=e.slice(1))switch(String.fromCharCode(e[0])){case"S":S(a,r);break;case"l":a.currentline=n&&n.callstatus&i.CIST_LUA?L(n):-1;break;case"u":a.nups=null===r?0:r.nupvalues,null===r||r instanceof o.CClosure?(a.isvararg=!0,a.nparams=0):(a.isvararg=r.p.is_vararg,a.nparams=r.p.numparams);break;case"t":a.istailcall=n?n.callstatus&i.CIST_TAIL:0;break;case"n":var l=y(t,n);null===l?(a.namewhat=[],a.name=null):(a.namewhat=l.funcname,a.name=l.name);break;case"L":case"f":break;default:u=0}return u},M=function(t,e,a){var n=void 0,u=void 0,l=void 0,s=void 0;return d(t),e[0]===">".charCodeAt(0)?(l=null,s=t.stack[t.top-1],r(t,s.ttisfunction(),"function expected"),e=e.slice(1),t.top--):(l=a.i_ci,s=l.func,r(l.func.ttisfunction())),u=s.ttisclosure()?s.value:null,n=I(t,e,a,u,l),e.indexOf("f".charCodeAt(0))>=0&&(o.pushobj2s(t,s),r(t.top<=t.ci.top,"stack overflow")),d(t),e.indexOf("L".charCodeAt(0))>=0&&R(t,u),n},C=function(t,e,a){var r={name:null,funcname:null};if(s.ISK(a)){var u=t.k[s.INDEXK(a)];if(u.ttisstring())return r.name=u.svalue(),r}else{var l=D(t,e,a);if(l&&l.funcname[0]==="c".charCodeAt(0))return l}return r.name=[n.char["?"]],r},w=function(t,e){return t<e?-1:t},P=function(t,e,a){for(var r=-1,n=0,u=s.OpCodesI,l=0;l<e;l++){var o=t.code[l],i=o.A;switch(o.opcode){case u.OP_LOADNIL:var c=o.B;i<=a&&a<=i+c&&(r=w(l,n));break;case u.OP_TFORCALL:a>=i+2&&(r=w(l,n));break;case u.OP_CALL:case u.OP_TAILCALL:a>=i&&(r=w(l,n));break;case u.OP_JMP:var _=o.sBx,f=l+1+_;l<f&&f<=e&&f>n&&(n=f);break;default:s.testAMode(o.opcode)&&a===i&&(r=w(l,n))}}return r},D=function t(e,a,r){var u={name:l.luaF_getlocalname(e,r+1,a),funcname:null};if(u.name)return u.funcname=n.to_luastring("local",!0),u;var o=P(e,a,r),i=s.OpCodesI;if(-1!==o){var c=e.code[o];switch(c.opcode){case i.OP_MOVE:var _=c.B;if(_<c.A)return t(e,o,_);break;case i.OP_GETTABUP:case i.OP_GETTABLE:var f=c.C,p=c.B,h=c.opcode===i.OP_GETTABLE?l.luaF_getlocalname(e,p+1,o):O(e,p);return u.name=C(e,o,f).name,u.funcname=h&&"_ENV"===n.to_jsstring(h)?n.to_luastring("global",!0):n.to_luastring("field",!0),u;case i.OP_GETUPVAL:return u.name=O(e,c.B),u.funcname=n.to_luastring("upvalue",!0),u;case i.OP_LOADK:case i.OP_LOADKX:var v=c.opcode===i.OP_LOADK?c.Bx:e.code[o+1].Ax;if(e.k[v].ttisstring())return u.name=e.k[v].svalue(),u.funcname=n.to_luastring("constant",!0),u;break;case i.OP_SELF:var g=c.C;return u.name=C(e,o,g).name,u.funcname=n.to_luastring("method",!0),u}}return null},K=function(t,e){var a={name:null,funcname:null},r=0,u=e.func.value.p,l=g(e),o=u.code[l],c=s.OpCodesI;if(e.callstatus&i.CIST_HOOKED)return a.name=[n.char["?"]],a.funcname=n.to_luastring("hook",!0),a;switch(o.opcode){case c.OP_CALL:case c.OP_TAILCALL:return D(u,l,o.A);case c.OP_TFORCALL:return a.name=n.to_luastring("for iterator",!0),a.funcname=n.to_luastring("for iterator",!0),a;case c.OP_SELF:case c.OP_GETTABUP:case c.OP_GETTABLE:r=_.TMS.TM_INDEX;break;case c.OP_SETTABUP:case c.OP_SETTABLE:r=_.TMS.TM_NEWINDEX;break;case c.OP_ADD:r=_.TMS.TM_ADD;break;case c.OP_SUB:r=_.TMS.TM_SUB;break;case c.OP_MUL:r=_.TMS.TM_MUL;break;case c.OP_MOD:r=_.TMS.TM_MOD;break;case c.OP_POW:r=_.TMS.TM_POW;break;case c.OP_DIV:r=_.TMS.TM_DIV;break;case c.OP_IDIV:r=_.TMS.TM_IDIV;break;case c.OP_BAND:r=_.TMS.TM_BAND;break;case c.OP_BOR:r=_.TMS.TM_BOR;break;case c.OP_BXOR:r=_.TMS.TM_BXOR;break;case c.OP_SHL:r=_.TMS.TM_SHL;break;case c.OP_SHR:r=_.TMS.TM_SHR;break;case c.OP_UNM:r=_.TMS.TM_UNM;break;case c.OP_BNOT:r=_.TMS.TM_BNOT;break;case c.OP_LEN:r=_.TMS.TM_LEN;break;case c.OP_CONCAT:r=_.TMS.TM_CONCAT;break;case c.OP_EQ:r=_.TMS.TM_EQ;break;case c.OP_LT:r=_.TMS.TM_LT;break;case c.OP_LE:r=_.TMS.TM_LE;break;default:return null}return a.name=t.l_G.tmname[r].getstr(),a.funcname=n.to_luastring("metamethod",!0),a},B=function(t,e,a){for(var r=e.l_base;r<e.top;r++)if(t.stack[r]===a)return r;return!1},G=function(t,e,a){for(var r=e.func.value,u=0;u<r.nupvalues;u++)if(r.upvals[u].v===a)return{name:O(r.p,u),funcname:n.to_luastring("upvalue",!0)};return null},V=function(t,e){var a=t.ci,r=null;if(a.callstatus&i.CIST_LUA){r=G(0,a,e);var u=B(t,a,e);!r&&u&&(r=D(a.func.value.p,g(a),u-a.l_base))}return r?o.luaO_pushfstring(t,n.to_luastring(" (%s '%s')",!0),r.funcname,r.name):n.to_luastring("",!0)},F=function(t,e,a){var r=_.luaT_objtypename(t,e);Y(t,n.to_luastring("attempt to %s a %s value%s",!0),a,r,V(t,e))},X=function(t,e,a){(e.ttisstring()||p.cvt2str(e))&&(e=a),F(t,e,n.to_luastring("concatenate",!0))},j=function(t,e,a,r){!1===p.tonumber(e)&&(a=e),F(t,a,r)},H=function(t,e,a){var r=_.luaT_objtypename(t,e),u=_.luaT_objtypename(t,a);r.join()===u.join()?Y(t,n.to_luastring("attempt to compare two %s values",!0),r):Y(t,n.to_luastring("attempt to compare %s with %s",!0),r,u)},z=function(t,e,a,r){var u=void 0;return u=a?o.luaO_chunkid(a.getstr(),f.LUA_IDSIZE):["?".charCodeAt(0)],o.luaO_pushfstring(t,n.to_luastring("%s:%d: %s",!0),u,r,e)},Y=function(t,e){for(var a=t.ci,r=arguments.length,n=Array(r>2?r-2:0),u=2;u<r;u++)n[u-2]=arguments[u];var l=o.luaO_pushvfstring(t,e,n);a.callstatus&i.CIST_LUA&&z(t,l,a.func.value.p.source,L(a)),Z(t)},Z=function(t){if(0!==t.errfunc){var e=t.errfunc;o.pushobj2s(t,t.stack[t.top-1]),o.setobjs2s(t,t.top-2,e),u.luaD_callnoyield(t,t.top-2,1)}u.luaD_throw(t,v.LUA_ERRRUN)},J=function(t,e,a){!1===p.tointeger(e)&&(a=e),Y(t,n.to_luastring("number%s has no integer representation",!0),V(t,a))},q=function(t){var e=t.ci,a=t.hookmask,r=0==--t.hookcount&&a&n.LUA_MASKCOUNT;if(r)t.hookcount=t.basehookcount;else if(!(a&n.LUA_MASKLINE))return;if(e.callstatus&i.CIST_HOOKYIELD)return void(e.callstatus&=~i.CIST_HOOKYIELD);if(r&&u.luaD_hook(t,n.LUA_HOOKCOUNT,-1),a&n.LUA_MASKLINE){var l=e.func.value.p,o=e.l_savedpc-1,s=0!==l.lineinfo.length?l.lineinfo[o]:-1;(0===o||e.l_savedpc<=t.oldpc||s!==(0!==l.lineinfo.length?l.lineinfo[t.oldpc-1]:-1))&&u.luaD_hook(t,n.LUA_HOOKLINE,s)}t.oldpc=e.l_savedpc,t.status===v.LUA_YIELD&&(r&&(t.hookcount=1),e.l_savedpc--,e.callstatus|=i.CIST_HOOKYIELD,e.funcOff=t.top-1,e.func=t.stack[e.funcOff],u.luaD_throw(t,v.LUA_YIELD))};t.exports.luaG_addinfo=z,t.exports.luaG_concaterror=X,t.exports.luaG_errormsg=Z,t.exports.luaG_opinterror=j,t.exports.luaG_ordererror=H,t.exports.luaG_runerror=Y,t.exports.luaG_tointerror=J,t.exports.luaG_traceexec=q,t.exports.luaG_typeerror=F,t.exports.lua_gethook=T,t.exports.lua_gethookcount=b,t.exports.lua_gethookmask=k,t.exports.lua_getinfo=M,t.exports.lua_getlocal=E,t.exports.lua_getstack=x,t.exports.lua_sethook=A,t.exports.lua_setlocal=N},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=a(3),s=l.constant_types,i=function t(e){r(this,t),this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null},c=function(){function t(e){r(this,t),this.id=e.l_G.id_counter++,this.v=void 0,this.vOff=void 0,this.refcount=0,this.open_next=null}return n(t,[{key:"isopen",value:function(){return void 0!==this.vOff}}]),t}(),_=function(t,e){return new o.LClosure(t,e)},f=function(t,e){for(var a=void 0,r=t.openupval;null!==r&&r.vOff>=e;){if(u(r.isopen()),r.vOff===e)return r;a=r,r=r.open_next}var n=new c(t);return n.open_next=r,a?a.open_next=n:t.openupval=n,n.v=t.stack[e],n.vOff=e,n},p=function(t,e){for(;null!==t.openupval&&t.openupval.vOff>=e;){var a=t.openupval;if(u(a.isopen()),t.openupval=a.open_next,0===a.refcount)a.v=void 0,a.open_next=null;else{var r=a.v;a.v=new o.TValue(r.type,r.value)}a.vOff=void 0}},h=function(t,e){for(var a=0;a<e.nupvalues;a++){var r=new c(t);r.refcount=1,r.v=new o.TValue(s.LUA_TNIL,null),e.upvals[a]=r}},v=function(t,e,a){for(var r=0;r<t.locvars.length&&t.locvars[r].startpc<=a;r++)if(a<t.locvars[r].endpc&&0===--e)return t.locvars[r].varname.getstr();return null};t.exports.MAXUPVAL=255,t.exports.Proto=i,t.exports.UpVal=c,t.exports.luaF_findupval=f,t.exports.luaF_close=p,t.exports.luaF_getlocalname=v,t.exports.luaF_initupvals=h,t.exports.luaF_newLclosure=_},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(1),l=a(3),o=a(6),s=a(17),i=a(7),c=a(11),_=a(13),f=u.constant_types,p=u.thread_status,h=f.LUA_NUMTAGS,v=2*u.LUA_MINSTACK,g=function t(){r(this,t),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN},L=function t(e){r(this,t),this.id=e.id_counter++,this.base_ci=new g,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.openupval=null,this.nny=1,this.status=p.LUA_OK,this.errfunc=0},d=function t(){r(this,t),this.id_counter=0,this.mainthread=null,this.l_registry=new l.TValue(f.LUA_TNIL,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(_.TMS.TM_N),this.mt=new Array(h)},A=function(t){var e=new g;return t.ci.next=e,e.previous=t.ci,e.next=null,t.ci=e,e},T=function(t){t.ci.next=null},k=function(t,e){t.stack=new Array(v),t.top=0,t.stack_last=v-5;var a=t.base_ci;a.next=a.previous=null,a.callstatus=0,a.funcOff=t.top,a.func=t.stack[t.top],t.stack[t.top++]=new l.TValue(f.LUA_TNIL,null),a.top=t.top+u.LUA_MINSTACK,t.ci=a},b=function(t){t.ci=t.base_ci,T(t),t.stack=null},x=function(t,e){var a=i.luaH_new(t);e.l_registry.sethvalue(a),i.luaH_setint(a,u.LUA_RIDX_MAINTHREAD,new l.TValue(f.LUA_TTHREAD,t)),i.luaH_setint(a,u.LUA_RIDX_GLOBALS,new l.TValue(f.LUA_TTABLE,i.luaH_new(t)))},O=function(t){var e=t.l_G;k(t),x(t,e),_.luaT_init(t),e.version=s.lua_version(null)},m=function(t){var e=t.l_G,a=new L(e);return t.stack[t.top]=new l.TValue(f.LUA_TTHREAD,a),t.top++,n(t.top<=t.ci.top,"stack overflow"),a.hookmask=t.hookmask,a.basehookcount=t.basehookcount,a.hook=t.hook,a.hookcount=a.basehookcount,k(a),a},U=function(t,e){c.luaF_close(e,e.stack),b(e)},E=function(){var t=new d,e=new L(t);return t.mainthread=e,o.luaD_rawrunprotected(e,O,null)!==p.LUA_OK&&(e=null),e},N=function(t){c.luaF_close(t,t.stack),b(t)},S=function(t){t=t.l_G.mainthread,N(t)};t.exports.lua_State=L,t.exports.CallInfo=g,t.exports.CIST_OAH=1,t.exports.CIST_LUA=2,t.exports.CIST_HOOKED=4,t.exports.CIST_FRESH=8,t.exports.CIST_YPCALL=16,t.exports.CIST_TAIL=32,t.exports.CIST_HOOKYIELD=64,t.exports.CIST_LEQ=128,t.exports.CIST_FIN=256,t.exports.EXTRA_STACK=5,t.exports.lua_close=S,t.exports.lua_newstate=E,t.exports.lua_newthread=m,t.exports.luaE_extendCI=A,t.exports.luaE_freeCI=T,t.exports.luaE_freethread=U},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(3),l=a(6),o=a(12),s=a(8),i=a(7),c=a(10),_=a(14),f=n.constant_types,p=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(function(t){return n.to_luastring(t)}),h=function(t){return p[t+1]},v={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},g=function(t){t.l_G.tmname[v.TM_INDEX]=new s.luaS_new(t,n.to_luastring("__index",!0)),t.l_G.tmname[v.TM_NEWINDEX]=new s.luaS_new(t,n.to_luastring("__newindex",!0)),t.l_G.tmname[v.TM_GC]=new s.luaS_new(t,n.to_luastring("__gc",!0)),t.l_G.tmname[v.TM_MODE]=new s.luaS_new(t,n.to_luastring("__mode",!0)),t.l_G.tmname[v.TM_LEN]=new s.luaS_new(t,n.to_luastring("__len",!0)),t.l_G.tmname[v.TM_EQ]=new s.luaS_new(t,n.to_luastring("__eq",!0)),t.l_G.tmname[v.TM_ADD]=new s.luaS_new(t,n.to_luastring("__add",!0)),t.l_G.tmname[v.TM_SUB]=new s.luaS_new(t,n.to_luastring("__sub",!0)),t.l_G.tmname[v.TM_MUL]=new s.luaS_new(t,n.to_luastring("__mul",!0)),t.l_G.tmname[v.TM_MOD]=new s.luaS_new(t,n.to_luastring("__mod",!0)),t.l_G.tmname[v.TM_POW]=new s.luaS_new(t,n.to_luastring("__pow",!0)),t.l_G.tmname[v.TM_DIV]=new s.luaS_new(t,n.to_luastring("__div",!0)),t.l_G.tmname[v.TM_IDIV]=new s.luaS_new(t,n.to_luastring("__idiv",!0)),t.l_G.tmname[v.TM_BAND]=new s.luaS_new(t,n.to_luastring("__band",!0)),t.l_G.tmname[v.TM_BOR]=new s.luaS_new(t,n.to_luastring("__bor",!0)),t.l_G.tmname[v.TM_BXOR]=new s.luaS_new(t,n.to_luastring("__bxor",!0)),t.l_G.tmname[v.TM_SHL]=new s.luaS_new(t,n.to_luastring("__shl",!0)),t.l_G.tmname[v.TM_SHR]=new s.luaS_new(t,n.to_luastring("__shr",!0)),t.l_G.tmname[v.TM_UNM]=new s.luaS_new(t,n.to_luastring("__unm",!0)),t.l_G.tmname[v.TM_BNOT]=new s.luaS_new(t,n.to_luastring("__bnot",!0)),t.l_G.tmname[v.TM_LT]=new s.luaS_new(t,n.to_luastring("__lt",!0)),t.l_G.tmname[v.TM_LE]=new s.luaS_new(t,n.to_luastring("__le",!0)),t.l_G.tmname[v.TM_CONCAT]=new s.luaS_new(t,n.to_luastring("__concat",!0)),t.l_G.tmname[v.TM_CALL]=new s.luaS_new(t,n.to_luastring("__call",!0))},L=n.to_luastring("__name",!0),d=function(t,e){var a=void 0;if(e.ttistable()&&null!==(a=e.value.metatable)||e.ttisfulluserdata()&&null!==(a=e.value.metatable)){var r=i.luaH_getstr(a,s.luaS_bless(t,L));if(r.ttisstring())return r.svalue()}return h(e.ttnov())},A=function(t,e,a,r,n,s){var i=t.top;if(u.pushobj2s(t,e),u.pushobj2s(t,a),u.pushobj2s(t,r),s||u.pushobj2s(t,n),t.ci.callstatus&o.CIST_LUA?l.luaD_call(t,i,s):l.luaD_callnoyield(t,i,s),s){var c=t.stack[t.top-1];delete t.stack[--t.top],n.setfrom(c)}},T=function(t,e,a,r,n){var u=m(t,e,n);return u.ttisnil()&&(u=m(t,a,n)),!u.ttisnil()&&(A(t,u,e,a,r,1),!0)},k=function(t,e,a,r,u){if(!T(t,e,a,r,u))switch(u){case v.TM_CONCAT:c.luaG_concaterror(t,e,a);case v.TM_BAND:case v.TM_BOR:case v.TM_BXOR:case v.TM_SHL:case v.TM_SHR:case v.TM_BNOT:var l=_.tonumber(e),o=_.tonumber(a);!1!==l&&!1!==o?c.luaG_tointerror(t,e,a):c.luaG_opinterror(t,e,a,n.to_luastring("perform bitwise operation on",!0));default:c.luaG_opinterror(t,e,a,n.to_luastring("perform arithmetic on",!0))}},b=function(t,e,a,r){var n=new u.TValue;return T(t,e,a,n,r)?!n.l_isfalse():null},x=function(t,e,a){return null===e?null:e.flags&1<<a?null:O(e,a,t.l_G.tmname[a])},O=function(t,e,a){var n=i.luaH_getstr(t,a);return r(e<=v.TM_EQ),n.ttisnil()?(t.flags|=1<<e,null):n},m=function(t,e,a){var r=void 0;switch(e.ttnov()){case f.LUA_TTABLE:case f.LUA_TUSERDATA:r=e.value.metatable;break;default:r=t.l_G.mt[e.ttnov()]}return r?i.luaH_getstr(r,t.l_G.tmname[a]):u.luaO_nilobject};t.exports.fasttm=x,t.exports.TMS=v,t.exports.luaT_callTM=A,t.exports.luaT_callbinTM=T,t.exports.luaT_trybinTM=k,t.exports.luaT_callorderTM=b,t.exports.luaT_gettm=O,t.exports.luaT_gettmbyobj=m,t.exports.luaT_init=g,t.exports.luaT_objtypename=d,t.exports.ttypename=h},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(15),l=a(9),o=a(3),s=a(11),i=a(12),c=a(8),_=a(4),f=a(6),p=a(13),h=a(7),v=a(10),g=n.constant_types,L=n.LUA_MULTRET,d=function(t){var e=t.ci,a=u.OpCodesI,n=e.l_base,l=e.l_code[e.l_savedpc-1],s=l.opcode;switch(s){case a.OP_ADD:case a.OP_SUB:case a.OP_MUL:case a.OP_DIV:case a.OP_IDIV:case a.OP_BAND:case a.OP_BOR:case a.OP_BXOR:case a.OP_SHL:case a.OP_SHR:case a.OP_MOD:case a.OP_POW:case a.OP_UNM:case a.OP_BNOT:case a.OP_LEN:case a.OP_GETTABUP:case a.OP_GETTABLE:case a.OP_SELF:o.setobjs2s(t,n+l.A,t.top-1),delete t.stack[--t.top];break;case a.OP_LE:case a.OP_LT:case a.OP_EQ:var c=!t.stack[t.top-1].l_isfalse();delete t.stack[--t.top],e.callstatus&i.CIST_LEQ&&(r(s===a.OP_LE),e.callstatus^=i.CIST_LEQ,c=!c),r(e.l_code[e.l_savedpc].opcode===a.OP_JMP),c!==!!l.A&&e.l_savedpc++;break;case a.OP_CONCAT:var _=t.top-1,p=l.B,h=_-1-(n+p);o.setobjs2s(t,_-2,_),h>1&&(t.top=_-1,Y(t,h)),o.setobjs2s(t,e.l_base+l.A,t.top-1),f.adjust_top(t,e.top);break;case a.OP_TFORCALL:r(e.l_code[e.l_savedpc].opcode===a.OP_TFORLOOP),f.adjust_top(t,e.top);break;case a.OP_CALL:l.C-1>=0&&f.adjust_top(t,e.top)}},A=function(t,e,a){return e+a.A},T=function(t,e,a){return e+a.B},k=function(t,e,a,r){return u.ISK(r.B)?a[u.INDEXK(r.B)]:t.stack[e+r.B]},b=function(t,e,a,r){return u.ISK(r.C)?a[u.INDEXK(r.C)]:t.stack[e+r.C]},x=function(t){var e=u.OpCodesI,a=t.ci;a.callstatus|=i.CIST_FRESH;t:for(;;){r(a===t.ci);var l=a.func.value,c=l.p.k,g=a.l_base,d=a.l_code[a.l_savedpc++];t.hookmask&(n.LUA_MASKLINE|n.LUA_MASKCOUNT)&&v.luaG_traceexec(t);var x=A(0,g,d),S=d.opcode;switch(S){case e.OP_MOVE:o.setobjs2s(t,x,T(0,g,d));break;case e.OP_LOADK:var y=c[d.Bx];o.setobj2s(t,x,y);break;case e.OP_LOADKX:r(a.l_code[a.l_savedpc].opcode===e.OP_EXTRAARG);var C=c[a.l_code[a.l_savedpc++].Ax];o.setobj2s(t,x,C);break;case e.OP_LOADBOOL:t.stack[x].setbvalue(0!==d.B),0!==d.C&&a.l_savedpc++;break;case e.OP_LOADNIL:for(var w=0;w<=d.B;w++)t.stack[x+w].setnilvalue();break;case e.OP_GETUPVAL:var P=d.B;o.setobj2s(t,x,l.upvals[P].v);break;case e.OP_GETTABUP:var X=l.upvals[d.B].v,j=b(t,g,c,d);Z(t,X,j,x);break;case e.OP_GETTABLE:var H=t.stack[T(0,g,d)],z=b(t,g,c,d);Z(t,H,z,x);break;case e.OP_SETTABUP:var q=l.upvals[d.A].v,W=k(t,g,c,d),Q=b(t,g,c,d);J(t,q,W,Q);break;case e.OP_SETUPVAL:var $=l.upvals[d.B];$.v.setfrom(t.stack[x]);break;case e.OP_SETTABLE:var tt=t.stack[x],et=k(t,g,c,d),at=b(t,g,c,d);J(t,tt,et,at);break;case e.OP_NEWTABLE:t.stack[x].sethvalue(h.luaH_new(t));break;case e.OP_SELF:var rt=T(0,g,d),nt=b(t,g,c,d);o.setobjs2s(t,x+1,rt),Z(t,t.stack[rt],nt,x);break;case e.OP_ADD:var ut=k(t,g,c,d),lt=b(t,g,c,d),ot=void 0,st=void 0;ut.ttisinteger()&&lt.ttisinteger()?t.stack[x].setivalue(ut.value+lt.value|0):!1!==(ot=M(ut))&&!1!==(st=M(lt))?t.stack[x].setfltvalue(ot+st):p.luaT_trybinTM(t,ut,lt,t.stack[x],p.TMS.TM_ADD);break;case e.OP_SUB:var it=k(t,g,c,d),ct=b(t,g,c,d),_t=void 0,ft=void 0;it.ttisinteger()&&ct.ttisinteger()?t.stack[x].setivalue(it.value-ct.value|0):!1!==(_t=M(it))&&!1!==(ft=M(ct))?t.stack[x].setfltvalue(_t-ft):p.luaT_trybinTM(t,it,ct,t.stack[x],p.TMS.TM_SUB);break;case e.OP_MUL:var pt=k(t,g,c,d),ht=b(t,g,c,d),vt=void 0,gt=void 0;pt.ttisinteger()&&ht.ttisinteger()?t.stack[x].setivalue(Math.imul(pt.value,ht.value)):!1!==(vt=M(pt))&&!1!==(gt=M(ht))?t.stack[x].setfltvalue(vt*gt):p.luaT_trybinTM(t,pt,ht,t.stack[x],p.TMS.TM_MUL);break;case e.OP_MOD:var Lt=k(t,g,c,d),dt=b(t,g,c,d),At=void 0,Tt=void 0;Lt.ttisinteger()&&dt.ttisinteger()?t.stack[x].setivalue(B(t,Lt.value,dt.value)):!1!==(At=M(Lt))&&!1!==(Tt=M(dt))?t.stack[x].setfltvalue(_.luai_nummod(t,At,Tt)):p.luaT_trybinTM(t,Lt,dt,t.stack[x],p.TMS.TM_MOD);break;case e.OP_POW:var kt=k(t,g,c,d),bt=b(t,g,c,d),xt=void 0,Ot=void 0;!1!==(xt=M(kt))&&!1!==(Ot=M(bt))?t.stack[x].setfltvalue(Math.pow(xt,Ot)):p.luaT_trybinTM(t,kt,bt,t.stack[x],p.TMS.TM_POW);break;case e.OP_DIV:var mt=k(t,g,c,d),Ut=b(t,g,c,d),Et=void 0,Nt=void 0;!1!==(Et=M(mt))&&!1!==(Nt=M(Ut))?t.stack[x].setfltvalue(Et/Nt):p.luaT_trybinTM(t,mt,Ut,t.stack[x],p.TMS.TM_DIV);break;case e.OP_IDIV:var St=k(t,g,c,d),Rt=b(t,g,c,d),yt=void 0,It=void 0;St.ttisinteger()&&Rt.ttisinteger()?t.stack[x].setivalue(K(t,St.value,Rt.value)):!1!==(yt=M(St))&&!1!==(It=M(Rt))?t.stack[x].setfltvalue(Math.floor(yt/It)):p.luaT_trybinTM(t,St,Rt,t.stack[x],p.TMS.TM_IDIV);break;case e.OP_BAND:var Mt=k(t,g,c,d),Ct=b(t,g,c,d),wt=void 0,Pt=void 0;!1!==(wt=I(Mt))&&!1!==(Pt=I(Ct))?t.stack[x].setivalue(wt&Pt):p.luaT_trybinTM(t,Mt,Ct,t.stack[x],p.TMS.TM_BAND);break;case e.OP_BOR:var Dt=k(t,g,c,d),Kt=b(t,g,c,d),Bt=void 0,Gt=void 0;!1!==(Bt=I(Dt))&&!1!==(Gt=I(Kt))?t.stack[x].setivalue(Bt|Gt):p.luaT_trybinTM(t,Dt,Kt,t.stack[x],p.TMS.TM_BOR);break;case e.OP_BXOR:var Vt=k(t,g,c,d),Ft=b(t,g,c,d),Xt=void 0,jt=void 0;!1!==(Xt=I(Vt))&&!1!==(jt=I(Ft))?t.stack[x].setivalue(Xt^jt):p.luaT_trybinTM(t,Vt,Ft,t.stack[x],p.TMS.TM_BXOR);break;case e.OP_SHL:var Ht=k(t,g,c,d),zt=b(t,g,c,d),Yt=void 0,Zt=void 0;!1!==(Yt=I(Ht))&&!1!==(Zt=I(zt))?t.stack[x].setivalue(G(Yt,Zt)):p.luaT_trybinTM(t,Ht,zt,t.stack[x],p.TMS.TM_SHL);break;case e.OP_SHR:var Jt=k(t,g,c,d),qt=b(t,g,c,d),Wt=void 0,Qt=void 0;!1!==(Wt=I(Jt))&&!1!==(Qt=I(qt))?t.stack[x].setivalue(G(Wt,-Qt)):p.luaT_trybinTM(t,Jt,qt,t.stack[x],p.TMS.TM_SHR);break;case e.OP_UNM:var $t=t.stack[T(0,g,d)],te=void 0;$t.ttisinteger()?t.stack[x].setivalue(0|-$t.value):!1!==(te=M($t))?t.stack[x].setfltvalue(-te):p.luaT_trybinTM(t,$t,$t,t.stack[x],p.TMS.TM_UNM);break;case e.OP_BNOT:var ee=t.stack[T(0,g,d)];ee.ttisinteger()?t.stack[x].setivalue(~ee.value):p.luaT_trybinTM(t,ee,ee,t.stack[x],p.TMS.TM_BNOT);break;case e.OP_NOT:var ae=t.stack[T(0,g,d)];t.stack[x].setbvalue(ae.l_isfalse());break;case e.OP_LEN:D(t,t.stack[x],t.stack[T(0,g,d)]);break;case e.OP_CONCAT:var re=d.B,ne=d.C;t.top=g+ne+1,Y(t,ne-re+1);var ue=g+re;o.setobjs2s(t,x,ue),f.adjust_top(t,a.top);break;case e.OP_JMP:O(t,a,d,0);break;case e.OP_EQ:N(t,k(t,g,c,d),b(t,g,c,d))!==d.A?a.l_savedpc++:m(t,a);break;case e.OP_LT:U(t,k(t,g,c,d),b(t,g,c,d))!==d.A?a.l_savedpc++:m(t,a);break;case e.OP_LE:E(t,k(t,g,c,d),b(t,g,c,d))!==d.A?a.l_savedpc++:m(t,a);break;case e.OP_TEST:(d.C?t.stack[x].l_isfalse():!t.stack[x].l_isfalse())?a.l_savedpc++:m(t,a);break;case e.OP_TESTSET:var le=T(0,g,d),oe=t.stack[le];(d.C?oe.l_isfalse():!oe.l_isfalse())?a.l_savedpc++:(o.setobjs2s(t,x,le),m(t,a));break;case e.OP_CALL:var se=d.B,ie=d.C-1;if(0!==se&&f.adjust_top(t,x+se),!f.luaD_precall(t,x,ie)){a=t.ci;continue t}ie>=0&&f.adjust_top(t,a.top);break;case e.OP_TAILCALL:var ce=d.B;if(0!==ce&&f.adjust_top(t,x+ce),!f.luaD_precall(t,x,L)){var _e=t.ci,fe=_e.previous,pe=_e.func,he=_e.funcOff,ve=fe.funcOff,ge=_e.l_base+pe.value.p.numparams;l.p.p.length>0&&s.luaF_close(t,fe.l_base);for(var Le=0;he+Le<ge;Le++)o.setobjs2s(t,ve+Le,he+Le);fe.l_base=ve+(_e.l_base-he),fe.top=ve+(t.top-he),f.adjust_top(t,fe.top),fe.l_code=_e.l_code,fe.l_savedpc=_e.l_savedpc,fe.callstatus|=i.CIST_TAIL,fe.next=null,a=t.ci=fe,r(t.top===fe.l_base+t.stack[ve].value.p.maxstacksize);continue t}break;case e.OP_RETURN:l.p.p.length>0&&s.luaF_close(t,g);var de=f.luaD_poscall(t,a,x,0!==d.B?d.B-1:t.top-x);if(a.callstatus&i.CIST_FRESH)return;a=t.ci,de&&f.adjust_top(t,a.top),r(a.callstatus&i.CIST_LUA),r(a.l_code[a.l_savedpc-1].opcode===e.OP_CALL);continue t;case e.OP_FORLOOP:if(t.stack[x].ttisinteger()){var Ae=t.stack[x+2].value,Te=t.stack[x].value+Ae|0,ke=t.stack[x+1].value;(0<Ae?Te<=ke:ke<=Te)&&(a.l_savedpc+=d.sBx,t.stack[x].chgivalue(Te),t.stack[x+3].setivalue(Te))}else{var be=t.stack[x+2].value,xe=t.stack[x].value+be,Oe=t.stack[x+1].value;(0<be?xe<=Oe:Oe<=xe)&&(a.l_savedpc+=d.sBx,t.stack[x].chgfltvalue(xe),t.stack[x+3].setfltvalue(xe))}break;case e.OP_FORPREP:var me=t.stack[x],Ue=t.stack[x+1],Ee=t.stack[x+2],Ne=void 0;if(me.ttisinteger()&&Ee.ttisinteger()&&(Ne=R(Ue,Ee.value))){var Se=Ne.stopnow?0:me.value;Ue.value=Ne.ilimit,me.value=Se-Ee.value|0}else{var Re=void 0,ye=void 0,Ie=void 0;!1===(Re=M(Ue))&&v.luaG_runerror(t,n.to_luastring("'for' limit must be a number",!0)),t.stack[x+1].setfltvalue(Re),!1===(ye=M(Ee))&&v.luaG_runerror(t,n.to_luastring("'for' step must be a number",!0)),t.stack[x+2].setfltvalue(ye),!1===(Ie=M(me))&&v.luaG_runerror(t,n.to_luastring("'for' initial value must be a number",!0)),t.stack[x].setfltvalue(Ie-ye)}a.l_savedpc+=d.sBx;break;case e.OP_TFORCALL:var Me=x+3;o.setobjs2s(t,Me+2,x+2),o.setobjs2s(t,Me+1,x+1),o.setobjs2s(t,Me,x),f.adjust_top(t,Me+3),f.luaD_call(t,Me,d.C),f.adjust_top(t,a.top),d=a.l_code[a.l_savedpc++],x=A(0,g,d),r(d.opcode===e.OP_TFORLOOP);case e.OP_TFORLOOP:t.stack[x+1].ttisnil()||(o.setobjs2s(t,x,x+1),a.l_savedpc+=d.sBx);break;case e.OP_SETLIST:var Ce=d.B,we=d.C;0===Ce&&(Ce=t.top-x-1),0===we&&(r(a.l_code[a.l_savedpc].opcode===e.OP_EXTRAARG),we=a.l_code[a.l_savedpc++].Ax);for(var Pe=t.stack[x].value,De=(we-1)*u.LFIELDS_PER_FLUSH+Ce;Ce>0;Ce--)h.luaH_setint(Pe,De--,t.stack[x+Ce]);f.adjust_top(t,a.top);break;case e.OP_CLOSURE:var Ke=l.p.p[d.Bx],Be=V(Ke,l.upvals,t.stack,g);null===Be?F(t,Ke,l.upvals,g,x):t.stack[x].setclLvalue(Be);break;case e.OP_VARARG:var Ge=d.B-1,Ve=g-a.funcOff-l.p.numparams-1,Fe=void 0;for(Ve<0&&(Ve=0),Ge<0&&(Ge=Ve,f.luaD_checkstack(t,Ve),f.adjust_top(t,x+Ve)),Fe=0;Fe<Ge&&Fe<Ve;Fe++)o.setobjs2s(t,x+Fe,g-Ve+Fe);for(;Fe<Ge;Fe++)t.stack[x+Fe].setnilvalue();break;case e.OP_EXTRAARG:throw Error("invalid opcode")}}},O=function(t,e,a,r){var n=a.A;0!==n&&s.luaF_close(t,e.l_base+n-1),e.l_savedpc+=a.sBx+r},m=function(t,e){O(t,e,e.l_code[e.l_savedpc],1)},U=function(t,e,a){if(e.ttisnumber()&&a.ttisnumber())return C(e,a)?1:0;if(e.ttisstring()&&a.ttisstring())return P(e.tsvalue(),a.tsvalue())<0?1:0;var r=p.luaT_callorderTM(t,e,a,p.TMS.TM_LT);return null===r&&v.luaG_ordererror(t,e,a),r?1:0},E=function(t,e,a){var r=void 0;return e.ttisnumber()&&a.ttisnumber()?w(e,a)?1:0:e.ttisstring()&&a.ttisstring()?P(e.tsvalue(),a.tsvalue())<=0?1:0:null!==(r=p.luaT_callorderTM(t,e,a,p.TMS.TM_LE))?r?1:0:(t.ci.callstatus|=i.CIST_LEQ,r=p.luaT_callorderTM(t,a,e,p.TMS.TM_LT),t.ci.callstatus^=i.CIST_LEQ,null===r&&v.luaG_ordererror(t,e,a),r?0:1)},N=function(t,e,a){if(e.ttype()!==a.ttype())return e.ttnov()!==a.ttnov()||e.ttnov()!==g.LUA_TNUMBER?0:e.value===a.value?1:0;var r=void 0;switch(e.ttype()){case g.LUA_TNIL:return 1;case g.LUA_TBOOLEAN:return e.value==a.value?1:0;case g.LUA_TLIGHTUSERDATA:case g.LUA_TNUMINT:case g.LUA_TNUMFLT:case g.LUA_TLCF:return e.value===a.value?1:0;case g.LUA_TSHRSTR:case g.LUA_TLNGSTR:return c.luaS_eqlngstr(e.tsvalue(),a.tsvalue())?1:0;case g.LUA_TUSERDATA:case g.LUA_TTABLE:if(e.value===a.value)return 1;if(null===t)return 0;r=p.fasttm(t,e.value.metatable,p.TMS.TM_EQ),null===r&&(r=p.fasttm(t,a.value.metatable,p.TMS.TM_EQ));break;default:return e.value===a.value?1:0}if(null===r)return 0;var n=new o.TValue;return p.luaT_callTM(t,r,e,a,n,1),n.l_isfalse()?0:1},S=function(t,e){return N(null,t,e)},R=function(t,e){var a=!1,r=y(t,e<0?2:1);if(!1===r){var n=M(t);if(!1===n)return!1;0<n?(r=_.LUA_MAXINTEGER,e<0&&(a=!0)):(r=_.LUA_MININTEGER,e>=0&&(a=!0))}return{stopnow:a,ilimit:r}},y=function t(e,a){if(e.ttisfloat()){var r=e.value,n=Math.floor(r);if(r!==n){if(0===a)return!1;a>1&&(n+=1)}return l.lua_numbertointeger(n)}if(e.ttisinteger())return e.value;if(j(e)){var u=o.luaO_str2num(e.svalue());if(!1!==u)return t(u,a)}return!1},I=function(t){return t.ttisinteger()?t.value:y(t,0)},M=function(t){if(t.ttnov()===g.LUA_TNUMBER)return t.value;if(j(t)){var e=o.luaO_str2num(t.svalue());if(!1!==e)return e.value}return!1},C=function(t,e){return t.value<e.value},w=function(t,e){return t.value<=e.value},P=function(t,e){var a=c.luaS_hashlongstr(t),r=c.luaS_hashlongstr(e);return a===r?0:a<r?-1:1},D=function(t,e,a){var r=void 0;switch(a.ttype()){case g.LUA_TTABLE:var u=a.value;if(null!==(r=p.fasttm(t,u.metatable,p.TMS.TM_LEN)))break;return void e.setivalue(h.luaH_getn(u));case g.LUA_TSHRSTR:case g.LUA_TLNGSTR:return void e.setivalue(a.vslen());default:r=p.luaT_gettmbyobj(t,a,p.TMS.TM_LEN),r.ttisnil()&&v.luaG_typeerror(t,a,n.to_luastring("get length of",!0))}p.luaT_callTM(t,r,a,a,e,1)},K=function(t,e,a){return 0===a&&v.luaG_runerror(t,n.to_luastring("attempt to divide by zero")),0|Math.floor(e/a)},B=function(t,e,a){return 0===a&&v.luaG_runerror(t,n.to_luastring("attempt to perform 'n%%0'")),e-Math.floor(e/a)*a|0},G=function(t,e){return e<0?e<=-32?0:t>>>-e:e>=32?0:t<<e},V=function(t,e,a,r){var n=t.cache;if(null!==n)for(var u=t.upvalues,l=u.length,o=0;o<l;o++){var s=u[o].instack?a[r+u[o].idx]:e[u[o].idx].v;if(n.upvals[o].v!==s)return null}return n},F=function(t,e,a,r,n){var u=e.upvalues.length,l=e.upvalues,i=new o.LClosure(t,u);i.p=e,t.stack[n].setclLvalue(i);for(var c=0;c<u;c++)l[c].instack?i.upvals[c]=s.luaF_findupval(t,r+l[c].idx):i.upvals[c]=a[l[c].idx],i.upvals[c].refcount++;e.cache=i},X=function(t){return t.ttisnumber()},j=function(t){return t.ttisstring()},H=function(t,e){var a=t.stack[e];return!!a.ttisstring()||!!X(a)&&(o.luaO_tostring(t,a),!0)},z=function(t){return t.ttisstring()&&0===t.vslen()},Y=function(t,e){r(e>=2);do{var a=t.top,n=2;if((t.stack[a-2].ttisstring()||X(t.stack[a-2]))&&H(t,a-1))if(z(t.stack[a-1]))H(t,a-2);else if(z(t.stack[a-2]))o.setobjs2s(t,a-2,a-1);else{var u=new Array(e);for(u[e-1]=t.stack[a-1].svalue(),n=1;n<e;n++){if(!H(t,a-n-1)){u=u.slice(e-n);break}u[e-n-1]=t.stack[a-n-1].svalue()}var l=c.luaS_bless(t,Array.prototype.concat.apply([],u));o.setsvalue2s(t,a-n,l)}else p.luaT_trybinTM(t,t.stack[a-2],t.stack[a-1],t.stack[a-2],p.TMS.TM_CONCAT);for(e-=n-1;t.top>a-(n-1);)delete t.stack[--t.top]}while(e>1)},Z=function(t,e,a,r){for(var u=0;u<2e3;u++){var l=void 0;if(e.ttistable()){var s=h.luaH_get(t,e.value,a);if(!s.ttisnil())return void o.setobj2s(t,r,s);if(null===(l=p.fasttm(t,e.value.metatable,p.TMS.TM_INDEX)))return void t.stack[r].setnilvalue()}else l=p.luaT_gettmbyobj(t,e,p.TMS.TM_INDEX),l.ttisnil()&&v.luaG_typeerror(t,e,n.to_luastring("index",!0));if(l.ttisfunction())return void p.luaT_callTM(t,l,e,a,t.stack[r],1);e=l}v.luaG_runerror(t,n.to_luastring("'__index' chain too long; possible loop",!0))},J=function(t,e,a,r){for(var u=0;u<2e3;u++){var l=void 0;if(e.ttistable()){var o=e.value,s=h.luaH_set(t,o,a);if(!s.ttisnil()||null===(l=p.fasttm(t,o.metatable,p.TMS.TM_NEWINDEX)))return r.ttisnil()?h.luaH_delete(t,o,a):s.setfrom(r),void h.invalidateTMcache(o)}else(l=p.luaT_gettmbyobj(t,e,p.TMS.TM_NEWINDEX)).ttisnil()&&v.luaG_typeerror(t,e,n.to_luastring("index",!0));if(l.ttisfunction())return void p.luaT_callTM(t,l,e,a,r,0);e=l}v.luaG_runerror(t,n.to_luastring("'__newindex' chain too long; possible loop",!0))};t.exports.cvt2str=X,t.exports.cvt2num=j,t.exports.luaV_gettable=Z,t.exports.luaV_concat=Y,t.exports.luaV_div=K,t.exports.luaV_equalobj=N,t.exports.luaV_execute=x,t.exports.luaV_finishOp=d,t.exports.luaV_lessequal=E,t.exports.luaV_lessthan=U,t.exports.luaV_mod=B,t.exports.luaV_objlen=D,t.exports.luaV_rawequalobj=S,t.exports.luaV_shiftl=G,t.exports.luaV_tointeger=y,t.exports.settable=J,t.exports.tointeger=I,t.exports.tonumber=M},function(t,e,a){"use strict";var r=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],n={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},u=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],l=function(t){return 3&u[t]},o=function(t){return u[t]>>4&3},s=function(t){return u[t]>>2&3},i=function(t){return 64&u[t]},c=function(t){return 128&u[t]},_=function(t){return 256&t},f=function(t){return-257&t},p=function(t){return 256|t},h=function(t,e){return~(-1<<t)<<e},v=function(t,e){return~h(t,e)},g=function(t){return t.opcode},L=function(t,e){return t.code=t.code&v(6,0)|e<<0&h(6,0),y(t)},d=function(t,e,a,r){return t.code=t.code&v(r,a)|e<<a&h(r,a),y(t)},A=function(t){return t.A},T=function(t,e){return d(t,e,6,8)},k=function(t){return t.B},b=function(t,e){return d(t,e,23,9)},x=function(t){return t.C},O=function(t,e){return d(t,e,14,9)},m=function(t){return t.Bx},U=function(t,e){return d(t,e,14,18)},E=function(t){return t.Ax},N=function(t,e){return d(t,e,6,26)},S=function(t){return t.sBx},R=function(t,e){return U(t,e+131071)},y=function(t){if("number"==typeof t)return{code:t,opcode:t>>0&h(6,0),A:t>>6&h(8,0),B:t>>23&h(9,0),C:t>>14&h(9,0),Bx:t>>14&h(18,0),Ax:t>>6&h(26,0),sBx:(t>>14&h(18,0))-131071};var e=t.code;return t.opcode=e>>0&h(6,0),t.A=e>>6&h(8,0),t.B=e>>23&h(9,0),t.C=e>>14&h(9,0),t.Bx=e>>14&h(18,0),t.Ax=e>>6&h(26,0),t.sBx=(e>>14&h(18,0))-131071,t},I=function(t,e,a,r){return y(t<<0|e<<6|a<<23|r<<14)},M=function(t,e,a){return y(t<<0|e<<6|a<<14)},C=function(t,e){return y(t<<0|e<<6)};t.exports.BITRK=256,t.exports.CREATE_ABC=I,t.exports.CREATE_ABx=M,t.exports.CREATE_Ax=C,t.exports.GET_OPCODE=g,t.exports.GETARG_A=A,t.exports.GETARG_B=k,t.exports.GETARG_C=x,t.exports.GETARG_Bx=m,t.exports.GETARG_Ax=E,t.exports.GETARG_sBx=S,t.exports.INDEXK=f,t.exports.ISK=_,t.exports.LFIELDS_PER_FLUSH=50,t.exports.MAXARG_A=255,t.exports.MAXARG_Ax=67108863,t.exports.MAXARG_B=511,t.exports.MAXARG_Bx=262143,t.exports.MAXARG_C=511,t.exports.MAXARG_sBx=131071,t.exports.MAXINDEXRK=255,t.exports.NO_REG=255,t.exports.OpArgK=3,t.exports.OpArgN=0,t.exports.OpArgR=2,t.exports.OpArgU=1,t.exports.OpCodes=r,t.exports.OpCodesI=n,t.exports.POS_A=6,t.exports.POS_Ax=6,t.exports.POS_B=23,t.exports.POS_Bx=14,t.exports.POS_C=14,t.exports.POS_OP=0,t.exports.RKASK=p,t.exports.SETARG_A=T,t.exports.SETARG_Ax=N,t.exports.SETARG_B=b,t.exports.SETARG_Bx=U,t.exports.SETARG_C=O,t.exports.SETARG_sBx=R,t.exports.SET_OPCODE=L,t.exports.SIZE_A=8,t.exports.SIZE_Ax=26,t.exports.SIZE_B=9,t.exports.SIZE_Bx=18,t.exports.SIZE_C=9,t.exports.SIZE_OP=6,t.exports.fullins=y,t.exports.getBMode=o,t.exports.getCMode=s,t.exports.getOpMode=l,t.exports.iABC=0,t.exports.iABx=1,t.exports.iAsBx=2,t.exports.iAx=3,t.exports.testAMode=i,t.exports.testTMode=c},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=function t(){r(this,t),this.buffer=null,this.n=0},o=function(t,e){t.n-=e},s=function(t){t.n=0,t.buffer=[]},i=function(){function t(e,a,n){r(this,t),this.L=e,u("function"==typeof a,"ZIO requires a reader"),this.reader=a,this.data=n,this.n=0,this.buffer=null,this.off=0}return n(t,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:c(this)}}]),t}(),c=function(t){var e=void 0,a=t.reader(t.L,t.data);return null===a?-1:(a instanceof DataView?(t.buffer=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),t.off=0,e=a.byteLength-a.byteOffset):(u("string"!=typeof a,"Should only load binary of array of bytes"),t.buffer=a,t.off=0,e=a.length),0===e?-1:(t.n=e-1,t.buffer[t.off++]))},_=function(t,e,a,r){for(;r;){if(0===t.n){if(-1===c(t))return r;t.n++,t.off--}for(var n=r<=t.n?r:t.n,u=0;u<n;u++)e[a++]=t.buffer[t.off++];t.n-=n,0===t.n&&(t.buffer=null),r-=n}return 0};t.exports.EOZ=-1,t.exports.luaZ_buffremove=o,t.exports.luaZ_fill=c,t.exports.luaZ_read=_,t.exports.luaZ_resetbuffer=s,t.exports.MBuffer=l,t.exports.ZIO=i},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(10),l=a(6),o=a(38),s=a(11),i=a(3),c=a(12),_=a(8),f=a(13),p=a(9),h=a(14),v=a(7),g=a(16),L=s.MAXUPVAL,d=n.constant_types,A=n.thread_status,T=i.TValue,k=i.CClosure,b=function(t){return t!==i.luaO_nilobject},x=function(t){return null===t?n.LUA_VERSION_NUM:t.l_G.version},O=function(t,e){var a=t.l_G.panic;return t.l_G.panic=e,a},m=function(t,e){var a=t.l_G.atnativeerror;return t.l_G.atnativeerror=e,a},U=function(t,e){var a=t.ci;if(e>0){var u=a.funcOff+e;return r(e<=a.top-(a.funcOff+1),"unacceptable index"),u>=t.top?i.luaO_nilobject:t.stack[u]}return e>n.LUA_REGISTRYINDEX?(r(0!==e&&-e<=t.top,"invalid index"),t.stack[t.top+e]):e===n.LUA_REGISTRYINDEX?t.l_G.l_registry:(e=n.LUA_REGISTRYINDEX-e,r(e<=L+1,"upvalue index too large"),a.func.ttislcf()?i.luaO_nilobject:e<=a.func.value.nupvalues?a.func.value.upvalue[e-1]:i.luaO_nilobject)},E=function(t,e){var a=t.ci;if(e>0){var u=a.funcOff+e;return r(e<=a.top-(a.funcOff+1),"unacceptable index"),u>=t.top?null:u}if(e>n.LUA_REGISTRYINDEX)return r(0!==e&&-e<=t.top,"invalid index"),t.top+e;throw Error("attempt to use pseudo-index")},N=function(t,e){var a=void 0,n=t.ci;if(r(e>=0,"negative 'n'"),t.stack_last-t.top>e)a=!0;else{t.top+c.EXTRA_STACK>p.LUAI_MAXSTACK-e?a=!1:(l.luaD_growstack(t,e),a=!0)}return a&&n.top<t.top+e&&(n.top=t.top+e),a},S=function(t,e,a){if(t!==e){r(a<t.top-t.ci.funcOff,"not enough elements in the stack"),r(t.l_G===e.l_G,"moving among independent states"),r(e.ci.top-e.top>=a,"stack overflow"),t.top-=a;for(var n=0;n<a;n++)e.stack[e.top]=new i.TValue,i.setobj2s(e,e.top,t.stack[t.top+n]),delete t.stack[t.top+n],e.top++}},R=function(t,e){return e>0||e<=n.LUA_REGISTRYINDEX?e:t.top-t.ci.funcOff+e},y=function(t){return t.top-(t.ci.funcOff+1)},I=function(t,e){i.pushobj2s(t,U(t,e)),r(t.top<=t.ci.top,"stack overflow")},M=function(t,e){var a=t.ci.funcOff,n=void 0;e>=0?(r(e<=t.stack_last-(a+1),"new top too large"),n=a+1+e):(r(-(e+1)<=t.top-(a+1),"invalid new top"),n=t.top+e+1),l.adjust_top(t,n)},C=function(t,e){M(t,-e-1)},w=function(t,e,a){for(;e<a;e++,a--){var r=t.stack[e],n=new T(r.type,r.value);i.setobjs2s(t,e,a),i.setobj2s(t,a,n)}},P=function(t,e,a){var u=t.top-1,l=E(t,e),o=t.stack[l];r(b(o)&&e>n.LUA_REGISTRYINDEX,"index not in the stack"),r((a>=0?a:-a)<=u-l+1,"invalid 'n'");var s=a>=0?u-a:l-a-1;w(t,l,s),w(t,s+1,t.top-1),w(t,l,t.top-1)},D=function(t,e,a){var r=U(t,e);U(t,a).setfrom(r)},K=function(t,e){P(t,e,-1),C(t,1)},B=function(t,e){P(t,e,1)},G=function(t,e){D(t,-1,e),C(t,1)},V=function(t){t.stack[t.top]=new T(d.LUA_TNIL,null),t.top++,r(t.top<=t.ci.top,"stack overflow")},F=function(t,e){r("number"==typeof e),t.stack[t.top]=new T(d.LUA_TNUMFLT,e),t.top++,r(t.top<=t.ci.top,"stack overflow")},X=function(t,e){r("number"==typeof e&&(0|e)===e),t.stack[t.top]=new T(d.LUA_TNUMINT,e),t.top++,r(t.top<=t.ci.top,"stack overflow")},j=function(t,e,a){r("number"==typeof a);var u=void 0;return 0===a?u=_.luaS_bless(t,[]):(r(n.is_luastring(e)&&e.length>=a,"lua_pushlstring expects array of byte"),u=_.luaS_bless(t,e.slice(0,a))),i.pushsvalue2s(t,u),r(t.top<=t.ci.top,"stack overflow"),u.value},H=function(t,e){if(r(n.is_luastring(e)||void 0===e||null===e,"lua_pushstring expects array of byte"),void 0===e||null===e)t.stack[t.top]=new T(d.LUA_TNIL,null),t.top++;else{var a=_.luaS_new(t,e);i.pushsvalue2s(t,a),e=a.getstr()}return r(t.top<=t.ci.top,"stack overflow"),e},z=function(t,e,a){return r(n.is_luastring(e)),i.luaO_pushvfstring(t,e,a)},Y=function(t,e){r(n.is_luastring(e));for(var a=arguments.length,u=Array(a>2?a-2:0),l=2;l<a;l++)u[l-2]=arguments[l];return i.luaO_pushvfstring(t,e,u)},Z=function(t,e){if(r("string"==typeof e||void 0===e||null===e,"lua_pushliteral expects a JS string"),void 0===e||null===e)t.stack[t.top]=new T(d.LUA_TNIL,null),t.top++;else{var a=_.luaS_newliteral(t,e);i.pushsvalue2s(t,a),e=a.getstr()}return r(t.top<=t.ci.top,"stack overflow"),e},J=function(t,e,a){if(r("function"==typeof e),r("number"==typeof a),0===a)t.stack[t.top]=new T(d.LUA_TLCF,e);else{r(a<t.top-t.ci.funcOff,"not enough elements in the stack"),r(a<=L,"upvalue index too large");for(var n=new k(t,e,a),u=0;u<a;u++)n.upvalue[u].setfrom(t.stack[t.top-a+u]);for(var l=1;l<a;l++)delete t.stack[--t.top];a>0&&--t.top,t.stack[t.top].setclCvalue(n)}t.top++,r(t.top<=t.ci.top,"stack overflow")},q=J,W=function(t,e){J(t,e,0)},Q=W,$=function(t,e){t.stack[t.top]=new T(d.LUA_TBOOLEAN,!!e),t.top++,r(t.top<=t.ci.top,"stack overflow")},tt=function(t,e){t.stack[t.top]=new T(d.LUA_TLIGHTUSERDATA,e),t.top++,r(t.top<=t.ci.top,"stack overflow")},et=function(t){return t.stack[t.top]=new T(d.LUA_TTHREAD,t),t.top++,r(t.top<=t.ci.top,"stack overflow"),t.l_G.mainthread===t},at=function(t){pt(t,n.LUA_REGISTRYINDEX,n.LUA_RIDX_GLOBALS)},rt=function(t,e,a){r(n.is_luastring(a),"key must be an array of bytes");var u=_.luaS_new(t,a);r(1<t.top-t.ci.funcOff,"not enough elements in the stack"),i.pushsvalue2s(t,u),r(t.top<=t.ci.top,"stack overflow"),h.settable(t,e,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},nt=function(t,e){rt(t,v.luaH_getint(t.l_G.l_registry.value,n.LUA_RIDX_GLOBALS),e)},ut=function(t,e){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var a=void 0,n=U(t,e);switch(t.stack[t.top-1].ttisnil()?a=null:(r(t.stack[t.top-1].ttistable(),"table expected"),a=t.stack[t.top-1].value),n.ttnov()){case d.LUA_TUSERDATA:case d.LUA_TTABLE:n.value.metatable=a;break;default:t.l_G.mt[n.ttnov()]=a}return delete t.stack[--t.top],!0},lt=function(t,e){r(2<t.top-t.ci.funcOff,"not enough elements in the stack");var a=U(t,e);h.settable(t,a,t.stack[t.top-2],t.stack[t.top-1]),delete t.stack[--t.top],delete t.stack[--t.top]},ot=function(t,e,a){rt(t,U(t,e),a)},st=function(t,e,a){r("number"==typeof a&&(0|a)===a),r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var n=U(t,e);t.stack[t.top]=new T(d.LUA_TNUMINT,a),t.top++,r(t.top<=t.ci.top,"stack overflow"),h.settable(t,n,t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top],delete t.stack[--t.top]},it=function(t,e){r(2<t.top-t.ci.funcOff,"not enough elements in the stack");var a=U(t,e);r(a.ttistable(),"table expected");var n=t.stack[t.top-2],u=t.stack[t.top-1];if(u.ttisnil())v.luaH_delete(t,a.value,n);else{v.luaH_set(t,a.value,n).setfrom(u)}v.invalidateTMcache(a.value),delete t.stack[--t.top],delete t.stack[--t.top]},ct=function(t,e,a){r(2<t.top-t.ci.funcOff,"not enough elements in the stack");var n=U(t,e);r(n.ttistable(),"table expected"),v.luaH_setint(n.value,a,t.stack[t.top-1]),delete t.stack[--t.top]},_t=function(t,e,a){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var n=U(t,e);r(t,n.ttistable(),"table expected");var u=new T(d.LUA_TLIGHTUSERDATA,a),l=t.stack[t.top-1];if(l.ttisnil())v.luaH_delete(t,n.value,u);else{v.luaH_set(t,n.value,u).setfrom(l)}delete t.stack[--t.top]},ft=function(t,e,a){r(n.is_luastring(a),"key must be an array of bytes");var u=_.luaS_new(t,a);return i.pushsvalue2s(t,u),r(t.top<=t.ci.top,"stack overflow"),h.luaV_gettable(t,e,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},pt=function(t,e,a){var n=U(t,e);return r(n.ttistable(),"table expected"),i.pushobj2s(t,v.luaH_getint(n.value,a)),r(t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},ht=function(t,e,a){var n=U(t,e);r(n.ttistable(),"table expected");var u=new T(d.LUA_TLIGHTUSERDATA,a);return i.pushobj2s(t,v.luaH_get(t,n.value,u)),r(t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},vt=function(t,e){var a=U(t,e);return r(a.ttistable(a),"table expected"),i.setobj2s(t,t.top-1,v.luaH_get(t,a.value,t.stack[t.top-1])),t.stack[t.top-1].ttnov()},gt=function(t,e,a){var n=new i.TValue(d.LUA_TTABLE,v.luaH_new(t));t.stack[t.top]=n,t.top++,r(t.top<=t.ci.top,"stack overflow")},Lt=function(t,e){return new i.Udata(t,e)},dt=function(t,e){var a=Lt(t,e);return t.stack[t.top]=new i.TValue(d.LUA_TUSERDATA,a),t.top++,r(t.top<=t.ci.top,"stack overflow"),a.data},At=function(t,e,a){switch(e.ttype()){case d.LUA_TCCL:var r=e.value;return 1<=a&&a<=r.nupvalues?{name:[],val:r.upvalue[a-1]}:null;case d.LUA_TLCL:var u=e.value,l=u.p;if(!(1<=a&&a<=l.upvalues.length))return null;var o=l.upvalues[a-1].name;return{name:o?o.getstr():n.to_luastring("(*no name)",!0),val:u.upvals[a-1].v};default:return null}},Tt=function(t,e,a){var n=At(0,U(t,e),a);if(n){var u=n.name,l=n.val;return i.pushobj2s(t,l),r(t.top<=t.ci.top,"stack overflow"),u}return null},kt=function(t,e,a){var n=U(t,e);r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var u=At(0,n,a);if(u){var l=u.name;return u.val.setfrom(t.stack[t.top-1]),delete t.stack[--t.top],l}return null},bt=function(t){gt(t)},xt=function(t,e,a){W(t,a),nt(t,e)},Ot=function(t,e){var a=U(t,e),n=void 0,u=!1;switch(a.ttnov()){case d.LUA_TTABLE:case d.LUA_TUSERDATA:n=a.value.metatable;break;default:n=t.l_G.mt[a.ttnov()]}return null!==n&&void 0!==n&&(t.stack[t.top]=new T(d.LUA_TTABLE,n),t.top++,r(t.top<=t.ci.top,"stack overflow"),u=!0),u},mt=function(t,e){var a=U(t,e);r(t,a.ttisfulluserdata(),"full userdata expected");var n=a.value.uservalue;return t.stack[t.top]=new T(n.type,n.value),t.top++,r(t.top<=t.ci.top,"stack overflow"),t.stack[t.top-1].ttnov()},Ut=function(t,e){var a=U(t,e);return h.luaV_gettable(t,a,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},Et=function(t,e,a){return ft(t,U(t,e),a)},Nt=function(t,e,a){r("number"==typeof a&&(0|a)===a);var n=U(t,e);return t.stack[t.top]=new T(d.LUA_TNUMINT,a),t.top++,r(t.top<=t.ci.top,"stack overflow"),h.luaV_gettable(t,n,t.stack[t.top-1],t.top-1),t.stack[t.top-1].ttnov()},St=function(t,e){return ft(t,v.luaH_getint(t.l_G.l_registry.value,n.LUA_RIDX_GLOBALS),e)},Rt=function(t,e){return!U(t,e).l_isfalse()},yt=function(t,e){var a=U(t,e);if(!a.ttisstring()){if(!h.cvt2str(a))return null;i.luaO_tostring(t,a)}return a.svalue()},It=yt,Mt=function(t,e){var a=U(t,e);if(!a.ttisstring()){if(!h.cvt2str(a))return null;i.luaO_tostring(t,a)}return a.jsstring()},Ct=Mt,wt=function(t,e){var a=U(t,e);if(!a.ttisstring()){if(!h.cvt2str(a))return null;i.luaO_tostring(t,a)}var r=new DataView(new ArrayBuffer(a.vslen()));return a.svalue().forEach(function(t,e){return r.setUint8(e,t,!0)}),r},Pt=function(t,e){var a=U(t,e);switch(a.ttype()){case d.LUA_TSHRSTR:case d.LUA_TLNGSTR:return a.vslen();case d.LUA_TUSERDATA:return a.value.len;case d.LUA_TTABLE:return v.luaH_getn(a.value);default:return 0}},Dt=function(t,e){var a=U(t,e);return a.ttislcf()||a.ttisCclosure()?a.value:null},Kt=function(t,e){return h.tointeger(U(t,e))},Bt=function(t,e){var a=h.tonumber(U(t,e));return!1===a?0:a},Gt=function(t,e){return h.tonumber(U(t,e))},Vt=function(t,e){var a=U(t,e);switch(a.ttnov()){case d.LUA_TUSERDATA:return a.value.data;case d.LUA_TLIGHTUSERDATA:return a.value;default:return null}},Ft=function(t,e){var a=U(t,e);return a.ttisthread()?a.value:null},Xt=function(t,e){var a=U(t,e);switch(a.ttype()){case d.LUA_TTABLE:case d.LUA_TLCL:case d.LUA_TCCL:case d.LUA_TLCF:case d.LUA_TTHREAD:case d.LUA_TUSERDATA:case d.LUA_TLIGHTUSERDATA:return a.value;default:return null}},jt=new WeakMap,Ht=function(t,e){var a=jt.get(t);return!!a&&(null===e||e.l_G===a)},zt=function(t,e,a){var n=function(n){r(n instanceof c.lua_State&&t===n.l_G,"must be from same global state"),n.stack[n.top]=new T(e,a),n.top++,r(n.top<=n.ci.top,"stack overflow")};return jt.set(n,t),n},Yt=function(t,e){var a=U(t,e);return zt(t.l_G,a.type,a.value)},Zt=function(t,e,a,u){var l=U(t,e),o=U(t,a),s=0;if(b(l)&&b(o))switch(u){case n.LUA_OPEQ:s=h.luaV_equalobj(t,l,o);break;case n.LUA_OPLT:s=h.luaV_lessthan(t,l,o);break;case n.LUA_OPLE:s=h.luaV_lessequal(t,l,o);break;default:r(!1,"invalid option")}return s},Jt=function(t,e){var a=i.luaO_str2num(e);return a?(t.stack[t.top]=a,t.top++,r(t.top<=t.ci.top,"stack overflow"),e.length+1):0},qt=function(t,e){return h.tointeger(U(t,e))},Wt=function(t,e){l.luaD_callnoyield(t,e.funcOff,e.nresults)},Qt=function(t,e){var a=U(t,e);return b(a)?a.ttnov():d.LUA_TNONE},$t=function(t,e){return r(d.LUA_TNONE<=e&&e<d.LUA_NUMTAGS,"invalid tag"),f.ttypename(e)},te=function(t,e){var a=U(t,e);return a.ttislcf(a)||a.ttisCclosure()},ee=function(t,e){return Qt(t,e)===d.LUA_TNIL},ae=function(t,e){return Qt(t,e)===d.LUA_TBOOLEAN},re=function(t,e){return Qt(t,e)===d.LUA_TNONE},ne=function(t,e){return Qt(t,e)<=0},ue=function(t,e){return U(t,e).ttistable()},le=function(t,e){return U(t,e).ttisinteger()},oe=function(t,e){return!1!==h.tonumber(U(t,e))},se=function(t,e){var a=U(t,e);return a.ttisstring()||h.cvt2str(a)},ie=function(t,e){var a=U(t,e);return a.ttisfulluserdata(a)||a.ttislightuserdata()},ce=function(t,e){return Qt(t,e)===d.LUA_TTHREAD},_e=function(t,e){return Qt(t,e)===d.LUA_TFUNCTION},fe=function(t,e){return Qt(t,e)===d.LUA_TLIGHTUSERDATA},pe=function(t,e,a){var r=U(t,e),n=U(t,a);return b(r)&&b(n)?h.luaV_equalobj(null,r,n):0},he=function(t,e){e!==n.LUA_OPUNM&&e!==n.LUA_OPBNOT?r(2<t.top-t.ci.funcOff,"not enough elements in the stack"):(r(1<t.top-t.ci.funcOff,"not enough elements in the stack"),i.pushobj2s(t,t.stack[t.top-1]),r(t.top<=t.ci.top,"stack overflow")),i.luaO_arith(t,e,t.stack[t.top-2],t.stack[t.top-1],t.stack[t.top-2]),delete t.stack[--t.top]},ve=function(t,e,a,u,o){r(n.is_luastring(u),"lua_load expect an array of byte as chunkname"),r(!o||n.is_luastring(o),"lua_load expect an array of byte as mode"),u||(u=[n.char["?"]]);var s=new g.ZIO(t,e,a),i=l.luaD_protectedparser(t,s,u,o);if(i===A.LUA_OK){var c=t.stack[t.top-1].value;if(c.nupvalues>=1){var _=v.luaH_getint(t.l_G.l_registry.value,n.LUA_RIDX_GLOBALS);c.upvals[0].v.setfrom(_)}}return i},ge=function(t,e,a,n){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var u=t.stack[t.top-1];return u.ttisLclosure()?o.luaU_dump(t,u.value.p,e,a,n):1},Le=function(t){return t.status},de=function(t,e){r(1<t.top-t.ci.funcOff,"not enough elements in the stack");var a=U(t,e);r(t,a.ttisfulluserdata(),"full userdata expected"),a.value.uservalue.setfrom(t.stack[t.top-1]),delete t.stack[--t.top]},Ae=function(t,e,a,u,o){r(null===o||!(t.ci.callstatus&c.CIST_LUA),"cannot use continuations inside hooks"),r(e+1<t.top-t.ci.funcOff,"not enough elements in the stack"),r(t.status===A.LUA_OK,"cannot do calls on non-normal thread"),r(e===n.LUA_MULTRET||t.ci.top-t.top>=e-a,"results from function overflow current stack size");var s=t.top-(e+1);null!==o&&0===t.nny?(t.ci.c_k=o,t.ci.c_ctx=u,l.luaD_call(t,s,a)):l.luaD_callnoyield(t,s,a),a===n.LUA_MULTRET&&t.ci.top<t.top&&(t.ci.top=t.top)},Te=function(t,e,a){Ae(t,e,a,0,null)},ke=function(t,e,a,u,o,s){r(e+1<t.top-t.ci.funcOff,"not enough elements in the stack"),r(t.status===A.LUA_OK,"cannot do calls on non-normal thread"),r(e===n.LUA_MULTRET||t.ci.top-t.top>=e-a,"results from function overflow current stack size");var i={func:null,funcOff:NaN,nresults:NaN},_=void 0,f=void 0;if(f=0===u?0:E(t,u),i.funcOff=t.top-(e+1),i.func=t.stack[i.funcOff],null===s||t.nny>0)i.nresults=a,_=l.luaD_pcall(t,Wt,i,i.funcOff,f);else{var p=t.ci;p.c_k=s,p.c_ctx=o,p.extra=i.funcOff,p.c_old_errfunc=t.errfunc,t.errfunc=f,p.callstatus&=~c.CIST_OAH|t.allowhook,p.callstatus|=c.CIST_YPCALL,l.luaD_call(t,i.funcOff,a),p.callstatus&=~c.CIST_YPCALL,t.errfunc=p.c_old_errfunc,_=A.LUA_OK}return a===n.LUA_MULTRET&&t.ci.top<t.top&&(t.ci.top=t.top),_},be=function(t,e,a,r){return ke(t,e,a,r,0,null)},xe=function(t){r(1<t.top-t.ci.funcOff,"not enough elements in the stack"),u.luaG_errormsg(t)},Oe=function(t,e){var a=U(t,e);return r(a.ttistable(),"table expected"),t.stack[t.top]=new T,v.luaH_next(t,a.value,t.top-1)?(t.top++,r(t.top<=t.ci.top,"stack overflow"),1):(delete t.stack[t.top],delete t.stack[--t.top],0)},me=function(t,e){r(e<t.top-t.ci.funcOff,"not enough elements in the stack"),e>=2?h.luaV_concat(t,e):0===e&&(i.pushsvalue2s(t,_.luaS_bless(t,[])),r(t.top<=t.ci.top,"stack overflow"))},Ue=function(t,e){var a=U(t,e),n=new T;h.luaV_objlen(t,n,a),t.stack[t.top]=n,t.top++,r(t.top<=t.ci.top,"stack overflow")},Ee=function(t,e,a){var n=U(t,e);r(n.ttisLclosure(),"Lua function expected");var u=n.value;return r(1<=a&&a<=u.p.upvalues.length,"invalid upvalue index"),{closure:u,upval:u.upvals[a-1],upvalOff:a-1}},Ne=function(t,e,a){var n=U(t,e);switch(n.ttype()){case d.LUA_TLCL:return Ee(t,e,a).upval;case d.LUA_TCCL:var u=n.value;return r(1<=a&&a<=u.nupvalues,"invalid upvalue index"),u.upvalue[a-1];default:return r(!1,"closure expected"),null}},Se=function(t,e,a,n,u){var l=Ee(t,e,a),o=Ee(t,n,u),s=l.upval,i=o.upval,c=l.closure;r(s.refcount>0),s.refcount--,c.upvals[l.upvalOff]=i,i.refcount++},Re=function(){},ye=function(){return console.warn("lua_getallocf is not available"),0},Ie=function(){return console.warn("lua_setallocf is not available"),0},Me=function(){return console.warn("lua_getextraspace is not available"),0};t.exports.index2addr=U,t.exports.index2addr_=E,t.exports.lua_absindex=R,t.exports.lua_arith=he,t.exports.lua_atpanic=O,t.exports.lua_atnativeerror=m,t.exports.lua_call=Te,t.exports.lua_callk=Ae,t.exports.lua_checkstack=N,t.exports.lua_compare=Zt,t.exports.lua_concat=me,t.exports.lua_copy=D,t.exports.lua_createtable=gt,t.exports.lua_dump=ge,t.exports.lua_error=xe,t.exports.lua_gc=Re,t.exports.lua_getallocf=ye,t.exports.lua_getextraspace=Me,t.exports.lua_getfield=Et,t.exports.lua_getglobal=St,t.exports.lua_geti=Nt,t.exports.lua_getmetatable=Ot,t.exports.lua_gettable=Ut,t.exports.lua_gettop=y,t.exports.lua_getupvalue=Tt,t.exports.lua_getuservalue=mt,t.exports.lua_insert=B,t.exports.lua_isboolean=ae,t.exports.lua_iscfunction=te,t.exports.lua_isfunction=_e,t.exports.lua_isinteger=le,t.exports.lua_islightuserdata=fe,t.exports.lua_isnil=ee,t.exports.lua_isnone=re,t.exports.lua_isnoneornil=ne,t.exports.lua_isnumber=oe,t.exports.lua_isproxy=Ht,t.exports.lua_isstring=se,t.exports.lua_istable=ue,t.exports.lua_isthread=ce,t.exports.lua_isuserdata=ie,t.exports.lua_len=Ue,t.exports.lua_load=ve,t.exports.lua_newtable=bt,t.exports.lua_newuserdata=dt,t.exports.lua_next=Oe,t.exports.lua_pcall=be,t.exports.lua_pcallk=ke,t.exports.lua_pop=C,t.exports.lua_pushboolean=$,t.exports.lua_pushcclosure=J,t.exports.lua_pushcfunction=W,t.exports.lua_pushfstring=Y,t.exports.lua_pushglobaltable=at,t.exports.lua_pushinteger=X,t.exports.lua_pushjsclosure=q,t.exports.lua_pushjsfunction=Q,t.exports.lua_pushlightuserdata=tt,t.exports.lua_pushliteral=Z,t.exports.lua_pushlstring=j,t.exports.lua_pushnil=V,t.exports.lua_pushnumber=F,t.exports.lua_pushstring=H,t.exports.lua_pushthread=et,t.exports.lua_pushvalue=I,t.exports.lua_pushvfstring=z,t.exports.lua_rawequal=pe,t.exports.lua_rawget=vt,t.exports.lua_rawgeti=pt,t.exports.lua_rawgetp=ht,t.exports.lua_rawlen=Pt,t.exports.lua_rawset=it,t.exports.lua_rawseti=ct,t.exports.lua_rawsetp=_t,t.exports.lua_register=xt,t.exports.lua_remove=K,t.exports.lua_replace=G,t.exports.lua_rotate=P,t.exports.lua_setallocf=Ie,t.exports.lua_setfield=ot,t.exports.lua_setglobal=nt,t.exports.lua_seti=st,t.exports.lua_setmetatable=ut,t.exports.lua_settable=lt,t.exports.lua_settop=M,t.exports.lua_setupvalue=kt,t.exports.lua_setuservalue=de,t.exports.lua_status=Le,t.exports.lua_stringtonumber=Jt,t.exports.lua_toboolean=Rt,t.exports.lua_tocfunction=Dt,t.exports.lua_todataview=wt,t.exports.lua_tointeger=Kt,t.exports.lua_tointegerx=qt,t.exports.lua_tojsstring=Ct,t.exports.lua_toljsstring=Mt,t.exports.lua_tolstring=yt,t.exports.lua_tonumber=Bt,t.exports.lua_tonumberx=Gt,t.exports.lua_topointer=Xt,t.exports.lua_toproxy=Yt,t.exports.lua_tostring=It,t.exports.lua_tothread=Ft,t.exports.lua_touserdata=Vt,t.exports.lua_type=Qt,t.exports.lua_typename=$t,t.exports.lua_upvalueid=Ne,t.exports.lua_upvaluejoin=Se,t.exports.lua_version=x,t.exports.lua_xmove=S},function(t,e,a){"use strict";var r=a(2),n=a(5),u=a(24);t.exports.lua=r,t.exports.lauxlib=n,t.exports.lualib=u},function(t,e,a){"use strict";function r(t,a){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(a)?r.showHidden=a:a&&e._extend(r,a),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=n),o(r,t,r.depth)}function n(t,e){var a=r.styles[e];return a?"["+r.colors[a][0]+"m"+t+"["+r.colors[a][1]+"m":t}function u(t,e){return t}function l(t){var e={};return t.forEach(function(t,a){e[t]=!0}),e}function o(t,a,r){if(t.customInspect&&a&&m(a.inspect)&&a.inspect!==e.inspect&&(!a.constructor||a.constructor.prototype!==a)){var n=a.inspect(r,t);return d(n)||(n=o(t,n,r)),n}var u=s(t,a);if(u)return u;var h=Object.keys(a),v=l(h);if(t.showHidden&&(h=Object.getOwnPropertyNames(a)),O(a)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return i(a);if(0===h.length){if(m(a)){var g=a.name?": "+a.name:"";return t.stylize("[Function"+g+"]","special")}if(k(a))return t.stylize(RegExp.prototype.toString.call(a),"regexp");if(x(a))return t.stylize(Date.prototype.toString.call(a),"date");if(O(a))return i(a)}var L="",A=!1,T=["{","}"];if(p(a)&&(A=!0,T=["[","]"]),m(a)){L=" [Function"+(a.name?": "+a.name:"")+"]"}if(k(a)&&(L=" "+RegExp.prototype.toString.call(a)),x(a)&&(L=" "+Date.prototype.toUTCString.call(a)),O(a)&&(L=" "+i(a)),0===h.length&&(!A||0==a.length))return T[0]+L+T[1];if(r<0)return k(a)?t.stylize(RegExp.prototype.toString.call(a),"regexp"):t.stylize("[Object]","special");t.seen.push(a);var b;return b=A?c(t,a,r,v,h):h.map(function(e){return _(t,a,r,v,e,A)}),t.seen.pop(),f(b,L,T)}function s(t,e){if(T(e))return t.stylize("undefined","undefined");if(d(e)){var a="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(a,"string")}return L(e)?t.stylize(""+e,"number"):h(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function i(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,a,r,n){for(var u=[],l=0,o=e.length;l<o;++l)R(e,String(l))?u.push(_(t,e,a,r,String(l),!0)):u.push("");return n.forEach(function(n){n.match(/^\d+$/)||u.push(_(t,e,a,r,n,!0))}),u}function _(t,e,a,r,n,u){var l,s,i;if(i=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},i.get?s=i.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):i.set&&(s=t.stylize("[Setter]","special")),R(r,n)||(l="["+n+"]"),s||(t.seen.indexOf(i.value)<0?(s=v(a)?o(t,i.value,null):o(t,i.value,a-1),s.indexOf("\n")>-1&&(s=u?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),T(l)){if(u&&n.match(/^\d+$/))return s;l=JSON.stringify(""+n),l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=t.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=t.stylize(l,"string"))}return l+": "+s}function f(t,e,a){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?a[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+a[1]:a[0]+e+" "+t.join(", ")+" "+a[1]}function p(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function L(t){return"number"==typeof t}function d(t){return"string"==typeof t}function A(t){return"symbol"===(void 0===t?"undefined":y(t))}function T(t){return void 0===t}function k(t){return b(t)&&"[object RegExp]"===E(t)}function b(t){return"object"===(void 0===t?"undefined":y(t))&&null!==t}function x(t){return b(t)&&"[object Date]"===E(t)}function O(t){return b(t)&&("[object Error]"===E(t)||t instanceof Error)}function m(t){return"function"==typeof t}function U(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===(void 0===t?"undefined":y(t))||void 0===t}function E(t){return Object.prototype.toString.call(t)}function N(t){return t<10?"0"+t.toString(10):t.toString(10)}function S(){var t=new Date,e=[N(t.getHours()),N(t.getMinutes()),N(t.getSeconds())].join(":");return[t.getDate(),w[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I=/%[sdj%]/g;e.format=function(t){if(!d(t)){for(var e=[],a=0;a<arguments.length;a++)e.push(r(arguments[a]));return e.join(" ")}for(var a=1,n=arguments,u=n.length,l=String(t).replace(I,function(t){if("%%"===t)return"%";if(a>=u)return t;switch(t){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(t){return"[Circular]"}default:return t}}),o=n[a];a<u;o=n[++a])v(o)||!b(o)?l+=" "+o:l+=" "+r(o);return l},e.deprecate=function(t,a){function r(){if(!n){if(process.throwDeprecation)throw new Error(a);process.traceDeprecation?console.trace(a):console.error(a),n=!0}return t.apply(this,arguments)}if(T(global.process))return function(){return e.deprecate(t,a).apply(this,arguments)};if(!0===process.noDeprecation)return t;var n=!1;return r};var M,C={};e.debuglog=function(t){if(T(M)&&(M=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!C[t])if(new RegExp("\\b"+t+"\\b","i").test(M)){var a=process.pid;C[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,a,r)}}else C[t]=function(){};return C[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=h,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=L,e.isString=d,e.isSymbol=A,e.isUndefined=T,e.isRegExp=k,e.isObject=b,e.isDate=x,e.isError=O,e.isFunction=m,e.isPrimitive=U,e.isBuffer=a(34);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=a(35),e._extend=function(t,e){if(!e||!b(e))return t;for(var a=Object.keys(e),r=a.length;r--;)t[a[r]]=e[a[r]];return t}},function(t,e,a){"use strict";var r;!function(){function n(t){return l(o(t),arguments)}function u(t,e){return n.apply(null,[t].concat(e||[]))}function l(t,e){var a,r,u,l,o,i,c,_,f,p=1,h=t.length,v="";for(r=0;r<h;r++)if("string"==typeof t[r])v+=t[r];else if(Array.isArray(t[r])){if(l=t[r],l[2])for(a=e[p],u=0;u<l[2].length;u++){if(!a.hasOwnProperty(l[2][u]))throw new Error(n('[sprintf] property "%s" does not exist',l[2][u]));a=a[l[2][u]]}else a=l[1]?e[l[1]]:e[p++];if(s.not_type.test(l[8])&&s.not_primitive.test(l[8])&&a instanceof Function&&(a=a()),s.numeric_arg.test(l[8])&&"number"!=typeof a&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %T",a));switch(s.number.test(l[8])&&(_=a>=0),l[8]){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l[6]?parseInt(l[6]):0);break;case"e":a=l[7]?parseFloat(a).toExponential(l[7]):parseFloat(a).toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"g":a=l[7]?String(Number(a.toPrecision(l[7]))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=l[7]?a.substring(0,l[7]):a;break;case"t":a=String(!!a),a=l[7]?a.substring(0,l[7]):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=l[7]?a.substring(0,l[7]):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=l[7]?a.substring(0,l[7]):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}s.json.test(l[8])?v+=a:(!s.number.test(l[8])||_&&!l[3]?f="":(f=_?"+":"-",a=a.toString().replace(s.sign,"")),i=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",c=l[6]-(f+a).length,o=l[6]&&c>0?i.repeat(c):"",v+=l[5]?f+a+o:"0"===i?f+o+a:o+f+a)}return v}function o(t){if(i[t])return i[t];for(var e,a=t,r=[],n=0;a;){if(null!==(e=s.text.exec(a)))r.push(e[0]);else if(null!==(e=s.modulo.exec(a)))r.push("%");else{if(null===(e=s.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){n|=1;var u=[],l=e[2],o=[];if(null===(o=s.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(u.push(o[1]);""!==(l=l.substring(o[0].length));)if(null!==(o=s.key_access.exec(l)))u.push(o[1]);else{if(null===(o=s.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");u.push(o[1])}e[2]=u}else n|=2;if(3===n)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(e)}a=a.substring(e[0].length)}return i[t]=r}var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},i=Object.create(null);e.sprintf=n,e.vsprintf=u,"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=u,void 0!==(r=function(){return{sprintf:n,vsprintf:u}}.call(e,a,e,t))&&(t.exports=r))}()},function(t,e,a){"use strict";var r=function(t){return/^\d$/.test(String.fromCharCode(t))},n=function(t){return/^[0-9a-fA-F]$/.test(String.fromCharCode(t))},u=function(t){return/^[\x20-\x7E]$/.test(String.fromCharCode(t))},l=function(t){return/^\s$/.test(String.fromCharCode(t))},o=function(t){return/^[_a-zA-Z]$/.test(String.fromCharCode(t))},s=function(t){return/^[_a-zA-Z0-9]$/.test(String.fromCharCode(t))};t.exports.lisdigit=r,t.exports.lislalnum=s,t.exports.lislalpha=o,t.exports.lisprint=u,t.exports.lisspace=l,t.exports.lisxdigit=n},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=a(36),s=a(6),i=a(11),c=a(23),_=a(4),f=a(3),p=a(15),h=a(8),v=a(7),g=o.BinOpr,L=p.OpCodesI,d=i.Proto,A=c.RESERVED,T=o.UnOpr,k=l.char,b=function(t){return t===m.VCALL||t===m.VVARARG},x=function(t,e){return h.luaS_eqlngstr(t,e)},O=function t(){r(this,t),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN},m={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},U=function(t){return m.VLOCAL<=t&&t<=m.VINDEXED},E=function(t){return t===m.VNONRELOC||t===m.VLOCAL},N=function(){function t(){r(this,t),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return n(t,[{key:"to",value:function(t){this.k=t.k,this.u=t.u,this.t=t.t,this.f=t.f}}]),t}(),S=function t(){r(this,t),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN},R=function t(){r(this,t),this.idx=NaN},y=function t(){r(this,t),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN},I=function t(){r(this,t),this.arr=[],this.n=NaN,this.size=NaN},M=function t(){r(this,t),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new I,this.label=new I},C=function(t,e){t.t.token=0,c.luaX_syntaxerror(t,e)},w=function(t,e){c.luaX_syntaxerror(t,f.luaO_pushfstring(t.L,l.to_luastring("%s expected",!0),c.luaX_token2str(t,e)))},P=function(t,e,a){var r=t.ls.L,n=t.f.linedefined,u=0===n?l.to_luastring("main function",!0):f.luaO_pushfstring(r,l.to_luastring("function at line %d",!0),n),o=f.luaO_pushfstring(r,l.to_luastring("too many %s (limit is %d) in %s",!0),a,e,u);c.luaX_syntaxerror(t.ls,o)},D=function(t,e,a,r){e>a&&P(t,a,r)},K=function(t,e){return t.t.token===e&&(c.luaX_next(t),!0)},B=function(t,e){t.t.token!==e&&w(t,e)},G=function(t,e){B(t,e),c.luaX_next(t)},V=function(t,e,a){e||c.luaX_syntaxerror(t,a)},F=function(t,e,a,r){K(t,e)||(r===t.linenumber?w(t,e):c.luaX_syntaxerror(t,f.luaO_pushfstring(t.L,l.to_luastring("%s expected (to close %s at line %d)"),c.luaX_token2str(t,e),c.luaX_token2str(t,a),r)))},X=function(t){B(t,A.TK_NAME);var e=t.t.seminfo.ts;return c.luaX_next(t),e},j=function(t,e,a){t.f=t.t=o.NO_JUMP,t.k=e,t.u.info=a},H=function(t,e,a){j(e,m.VK,o.luaK_stringK(t.fs,a))},z=function(t,e){H(t,e,X(t))},Y=function(t,e){var a=t.fs,r=a.f;return r.locvars[a.nlocvars]=new f.LocVar,r.locvars[a.nlocvars].varname=e,a.nlocvars++},Z=function(t,e){var a=t.fs,r=t.dyd,n=Y(t,e);D(a,r.actvar.n+1-a.firstlocal,200,l.to_luastring("local variables",!0)),r.actvar.arr[r.actvar.n]=new R,r.actvar.arr[r.actvar.n].idx=n,r.actvar.n++},J=function(t,e){Z(t,c.luaX_newstring(t,l.to_luastring(e,!0)))},q=function(t,e){var a=t.ls.dyd.actvar.arr[t.firstlocal+e].idx;return u(a<t.nlocvars),t.f.locvars[a]},W=function(t,e){var a=t.fs;for(a.nactvar=a.nactvar+e;e;e--)q(a,a.nactvar-e).startpc=a.pc},Q=function(t,e){for(t.ls.dyd.actvar.n-=t.nactvar-e;t.nactvar>e;)q(t,--t.nactvar).endpc=t.pc},$=function(t,e){for(var a=t.f.upvalues,r=0;r<t.nups;r++)if(x(a[r].name,e))return r;return-1},tt=function(t,e,a){var r=t.f;return D(t,t.nups+1,i.MAXUPVAL,l.to_luastring("upvalues",!0)),r.upvalues[t.nups]={instack:a.k===m.VLOCAL,idx:a.u.info,name:e},t.nups++},et=function(t,e){for(var a=t.nactvar-1;a>=0;a--)if(x(e,q(t,a).varname))return a;return-1},at=function(t,e){for(var a=t.bl;a.nactvar>e;)a=a.previous;a.upval=1},rt=function t(e,a,r,n){if(null===e)j(r,m.VVOID,0);else{var u=et(e,a);if(u>=0)j(r,m.VLOCAL,u),n||at(e,u);else{var l=$(e,a);if(l<0){if(t(e.prev,a,r,0),r.k===m.VVOID)return;l=tt(e,a,r)}j(r,m.VUPVAL,l)}}},nt=function(t,e){var a=X(t),r=t.fs;if(rt(r,a,e,1),e.k===m.VVOID){var n=new N;rt(r,t.envn,e,1),u(e.k!==m.VVOID),H(t,n,a),o.luaK_indexed(r,e,n)}},ut=function(t,e,a,r){var n=t.fs,u=e-a;if(b(r.k))u++,u<0&&(u=0),o.luaK_setreturns(n,r,u),u>1&&o.luaK_reserveregs(n,u-1);else if(r.k!==m.VVOID&&o.luaK_exp2nextreg(n,r),u>0){var l=n.freereg;o.luaK_reserveregs(n,u),o.luaK_nil(n,l,u)}a>e&&(t.fs.freereg-=a-e)},lt=function(t){var e=t.L;++e.nCcalls,D(t.fs,e.nCcalls,_.LUAI_MAXCCALLS,l.to_luastring("JS levels",!0))},ot=function(t){return t.L.nCcalls--},st=function(t,e,a){var r=t.fs,n=t.dyd.gt,s=n.arr[e];if(u(x(s.name,a.name)),s.nactvar<a.nactvar){var i=q(r,s.nactvar).varname,c=f.luaO_pushfstring(t.L,l.to_luastring("<goto %s> at line %d jumps into the scope of local '%s'"),s.name.getstr(),s.line,i.getstr());C(t,c)}o.luaK_patchlist(r,s.pc,a.pc);for(var _=e;_<n.n-1;_++)n.arr[_]=n.arr[_+1];n.n--},it=function(t,e){for(var a=t.fs.bl,r=t.dyd,n=r.gt.arr[e],u=a.firstlabel;u<r.label.n;u++){var l=r.label.arr[u];if(x(l.name,n.name))return n.nactvar>l.nactvar&&(a.upval||r.label.n>a.firstlabel)&&o.luaK_patchclose(t.fs,n.pc,l.nactvar),st(t,e,l),!0}return!1},ct=function(t,e,a,r,n){var u=e.n;return e.arr[u]=new y,e.arr[u].name=a,e.arr[u].line=r,e.arr[u].nactvar=t.fs.nactvar,e.arr[u].pc=n,e.n=u+1,u},_t=function(t,e){for(var a=t.dyd.gt,r=t.fs.bl.firstgoto;r<a.n;)x(a.arr[r].name,e.name)?st(t,r,e):r++},ft=function(t,e){for(var a=e.firstgoto,r=t.ls.dyd.gt;a<r.n;){var n=r.arr[a];n.nactvar>e.nactvar&&(e.upval&&o.luaK_patchclose(t,n.pc,e.nactvar),n.nactvar=e.nactvar),it(t.ls,a)||a++}},pt=function(t,e,a){e.isloop=a,e.nactvar=t.nactvar,e.firstlabel=t.ls.dyd.label.n,e.firstgoto=t.ls.dyd.gt.n,e.upval=0,e.previous=t.bl,t.bl=e,u(t.freereg===t.nactvar)},ht=function(t){var e=h.luaS_newliteral(t.L,"break"),a=ct(t,t.dyd.label,e,0,t.fs.pc);_t(t,t.dyd.label.arr[a])},vt=function(t,e){var a=c.isreserved(e.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";a=f.luaO_pushfstring(t.L,l.to_luastring(a),e.name.getstr(),e.line),C(t,a)},gt=function(t){var e=t.L,a=new d(e),r=t.fs;return r.f.p[r.np++]=a,a},Lt=function(t,e){var a=t.fs.prev;j(e,m.VRELOCABLE,o.luaK_codeABx(a,L.OP_CLOSURE,0,a.np-1)),o.luaK_exp2nextreg(a,e)},dt=function(t,e,a){e.prev=t.fs,e.ls=t,t.fs=e,e.pc=0,e.lasttarget=0,e.jpc=o.NO_JUMP,e.freereg=0,e.nk=0,e.np=0,e.nups=0,e.nlocvars=0,e.nactvar=0,e.firstlocal=t.dyd.actvar.n,e.bl=null;var r=new d(t.L);r=e.f,r.source=t.source,r.maxstacksize=2,pt(e,a,!1)},At=function(t){var e=t.bl,a=t.ls;if(e.previous&&e.upval){var r=o.luaK_jump(t);o.luaK_patchclose(t,r,e.nactvar),o.luaK_patchtohere(t,r)}e.isloop&&ht(a),t.bl=e.previous,Q(t,e.nactvar),u(e.nactvar===t.nactvar),t.freereg=t.nactvar,a.dyd.label.n=e.firstlabel,e.previous?ft(t,e):e.firstgoto<a.dyd.gt.n&&vt(a,a.dyd.gt.arr[e.firstgoto])},Tt=function(t){var e=t.fs;o.luaK_ret(e,0,0),At(e),u(null===e.bl),t.fs=e.prev},kt=function(t,e){switch(t.t.token){case A.TK_ELSE:case A.TK_ELSEIF:case A.TK_END:case A.TK_EOS:return!0;case A.TK_UNTIL:return e;default:return!1}},bt=function(t){for(;!kt(t,1);){if(t.t.token===A.TK_RETURN)return void he(t);he(t)}},xt=function(t,e){var a=t.fs,r=new N;o.luaK_exp2anyregup(a,e),c.luaX_next(t),z(t,r),o.luaK_indexed(a,e,r)},Ot=function(t,e){c.luaX_next(t),Xt(t,e),o.luaK_exp2val(t.fs,e),G(t,k["]"])},mt=function t(){r(this,t),this.v=new N,this.t=new N,this.nh=NaN,this.na=NaN,this.tostore=NaN},Ut=function(t,e){var a=t.fs,r=t.fs.freereg,n=new N,u=new N;t.t.token===A.TK_NAME?(D(a,e.nh,_.MAX_INT,l.to_luastring("items in a constructor",!0)),z(t,n)):Ot(t,n),e.nh++,G(t,k["="]);var s=o.luaK_exp2RK(a,n);Xt(t,u),o.luaK_codeABC(a,L.OP_SETTABLE,e.t.u.info,s,o.luaK_exp2RK(a,u)),a.freereg=r},Et=function(t,e){e.v.k!==m.VVOID&&(o.luaK_exp2nextreg(t,e.v),e.v.k=m.VVOID,e.tostore===p.LFIELDS_PER_FLUSH&&(o.luaK_setlist(t,e.t.u.info,e.na,e.tostore),e.tostore=0))},Nt=function(t,e){0!==e.tostore&&(b(e.v.k)?(o.luaK_setmultret(t,e.v),o.luaK_setlist(t,e.t.u.info,e.na,l.LUA_MULTRET),e.na--):(e.v.k!==m.VVOID&&o.luaK_exp2nextreg(t,e.v),o.luaK_setlist(t,e.t.u.info,e.na,e.tostore)))},St=function(t,e){Xt(t,e.v),D(t.fs,e.na,_.MAX_INT,l.to_luastring("items in a constructor",!0)),e.na++,e.tostore++},Rt=function(t,e){switch(t.t.token){case A.TK_NAME:c.luaX_lookahead(t)!==k["="]?St(t,e):Ut(t,e);break;case k["["]:Ut(t,e);break;default:St(t,e)}},yt=function(t,e){var a=t.fs,r=t.linenumber,n=o.luaK_codeABC(a,L.OP_NEWTABLE,0,0,0),l=new mt;l.na=l.nh=l.tostore=0,l.t=e,j(e,m.VRELOCABLE,n),j(l.v,m.VVOID,0),o.luaK_exp2nextreg(t.fs,e),G(t,k["{"]);do{if(u(l.v.k===m.VVOID||l.tostore>0),t.t.token===k["}"])break;Et(a,l),Rt(t,l)}while(K(t,k[","])||K(t,k[";"]));F(t,k["}"],k["{"],r),Nt(a,l),p.SETARG_B(a.f.code[n],f.luaO_int2fb(l.na)),p.SETARG_C(a.f.code[n],f.luaO_int2fb(l.nh))},It=function(t){var e=t.fs,a=e.f,r=0;if(a.is_vararg=!1,t.t.token!==k[")"])do{switch(t.t.token){case A.TK_NAME:Z(t,X(t)),r++;break;case A.TK_DOTS:c.luaX_next(t),a.is_vararg=!0;break;default:c.luaX_syntaxerror(t,l.to_luastring("<name> or '...' expected",!0))}}while(!a.is_vararg&&K(t,k[","]));W(t,r),a.numparams=e.nactvar,o.luaK_reserveregs(e,e.nactvar)},Mt=function(t,e,a,r){var n=new S,u=new O;n.f=gt(t),n.f.linedefined=r,dt(t,n,u),G(t,k["("]),a&&(J(t,"self"),W(t,1)),It(t),G(t,k[")"]),bt(t),n.f.lastlinedefined=t.linenumber,F(t,A.TK_END,A.TK_FUNCTION,r),Lt(t,e),Tt(t)},Ct=function(t,e){var a=1;for(Xt(t,e);K(t,k[","]);)o.luaK_exp2nextreg(t.fs,e),Xt(t,e),a++;return a},wt=function(t,e,a){var r=t.fs,n=new N;switch(t.t.token){case k["("]:c.luaX_next(t),t.t.token===k[")"]?n.k=m.VVOID:(Ct(t,n),o.luaK_setmultret(r,n)),F(t,k[")"],k["("],a);break;case k["{"]:yt(t,n);break;case A.TK_STRING:H(t,n,t.t.seminfo.ts),c.luaX_next(t);break;default:c.luaX_syntaxerror(t,l.to_luastring("function arguments expected",!0))}u(e.k===m.VNONRELOC);var s=void 0,i=e.u.info;b(n.k)?s=l.LUA_MULTRET:(n.k!==m.VVOID&&o.luaK_exp2nextreg(r,n),s=r.freereg-(i+1)),j(e,m.VCALL,o.luaK_codeABC(r,L.OP_CALL,i,s+1,2)),o.luaK_fixline(r,a),r.freereg=i+1},Pt=function(t,e){switch(t.t.token){case k["("]:var a=t.linenumber;return c.luaX_next(t),Xt(t,e),F(t,k[")"],k["("],a),void o.luaK_dischargevars(t.fs,e);case A.TK_NAME:return void nt(t,e);default:c.luaX_syntaxerror(t,l.to_luastring("unexpected symbol",!0))}},Dt=function(t,e){var a=t.fs,r=t.linenumber;for(Pt(t,e);;)switch(t.t.token){case k["."]:xt(t,e);break;case k["["]:var n=new N;o.luaK_exp2anyregup(a,e),Ot(t,n),o.luaK_indexed(a,e,n);break;case k[":"]:var u=new N;c.luaX_next(t),z(t,u),o.luaK_self(a,e,u),wt(t,e,r);break;case k["("]:case A.TK_STRING:case k["{"]:o.luaK_exp2nextreg(a,e),wt(t,e,r);break;default:return}},Kt=function(t,e){switch(t.t.token){case A.TK_FLT:j(e,m.VKFLT,0),e.u.nval=t.t.seminfo.r;break;case A.TK_INT:j(e,m.VKINT,0),e.u.ival=t.t.seminfo.i;break;case A.TK_STRING:H(t,e,t.t.seminfo.ts);break;case A.TK_NIL:j(e,m.VNIL,0);break;case A.TK_TRUE:j(e,m.VTRUE,0);break;case A.TK_FALSE:j(e,m.VFALSE,0);break;case A.TK_DOTS:var a=t.fs;V(t,a.f.is_vararg,l.to_luastring("cannot use '...' outside a vararg function",!0)),j(e,m.VVARARG,o.luaK_codeABC(a,L.OP_VARARG,0,1,0));break;case k["{"]:return void yt(t,e);case A.TK_FUNCTION:return c.luaX_next(t),void Mt(t,e,0,t.linenumber);default:return void Dt(t,e)}c.luaX_next(t)},Bt=function(t){switch(t){case A.TK_NOT:return T.OPR_NOT;case k["-"]:return T.OPR_MINUS;case k["~"]:return T.OPR_BNOT;case k["#"]:return T.OPR_LEN;default:return T.OPR_NOUNOPR}},Gt=function(t){switch(t){case k["+"]:return g.OPR_ADD;case k["-"]:return g.OPR_SUB;case k["*"]:return g.OPR_MUL;case k["%"]:return g.OPR_MOD;case k["^"]:return g.OPR_POW;case k["/"]:return g.OPR_DIV;case A.TK_IDIV:return g.OPR_IDIV;case k["&"]:return g.OPR_BAND;case k["|"]:return g.OPR_BOR;case k["~"]:return g.OPR_BXOR;case A.TK_SHL:return g.OPR_SHL;case A.TK_SHR:return g.OPR_SHR;case A.TK_CONCAT:return g.OPR_CONCAT;case A.TK_NE:return g.OPR_NE;case A.TK_EQ:return g.OPR_EQ;case k["<"]:return g.OPR_LT;case A.TK_LE:return g.OPR_LE;case k[">"]:return g.OPR_GT;case A.TK_GE:return g.OPR_GE;case A.TK_AND:return g.OPR_AND;case A.TK_OR:return g.OPR_OR;default:return g.OPR_NOBINOPR}},Vt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Ft=function t(e,a,r){lt(e);var n=Bt(e.t.token);if(n!==T.OPR_NOUNOPR){var u=e.linenumber;c.luaX_next(e),t(e,a,12),o.luaK_prefix(e.fs,n,a,u)}else Kt(e,a);for(var l=Gt(e.t.token);l!==g.OPR_NOBINOPR&&Vt[l].left>r;){var s=new N,i=e.linenumber;c.luaX_next(e),o.luaK_infix(e.fs,l,a);var _=t(e,s,Vt[l].right);o.luaK_posfix(e.fs,l,a,s,i),l=_}return ot(e),l},Xt=function(t,e){Ft(t,e,0)},jt=function(t){var e=t.fs,a=new O;pt(e,a,0),bt(t),At(e)},Ht=function t(){r(this,t),this.prev=null,this.v=new N},zt=function(t,e,a){for(var r=t.fs,n=r.freereg,u=!1;e;e=e.prev)e.v.k===m.VINDEXED&&(e.v.u.ind.vt===a.k&&e.v.u.ind.t===a.u.info&&(u=!0,e.v.u.ind.vt=m.VLOCAL,e.v.u.ind.t=n),a.k===m.VLOCAL&&e.v.u.ind.idx===a.u.info&&(u=!0,e.v.u.ind.idx=n));if(u){var l=a.k===m.VLOCAL?L.OP_MOVE:L.OP_GETUPVAL;o.luaK_codeABC(r,l,n,a.u.info,0),o.luaK_reserveregs(r,1)}},Yt=function t(e,a,r){var n=new N;if(V(e,U(a.v.k),l.to_luastring("syntax error",!0)),K(e,k[","])){var u=new Ht;u.prev=a,Dt(e,u.v),u.v.k!==m.VINDEXED&&zt(e,a,u.v),D(e.fs,r+e.L.nCcalls,_.LUAI_MAXCCALLS,l.to_luastring("JS levels",!0)),t(e,u,r+1)}else{G(e,k["="]);var s=Ct(e,n);if(s===r)return o.luaK_setoneret(e.fs,n),void o.luaK_storevar(e.fs,a.v,n);ut(e,r,s,n)}j(n,m.VNONRELOC,e.fs.freereg-1),o.luaK_storevar(e.fs,a.v,n)},Zt=function(t){var e=new N;return Xt(t,e),e.k===m.VNIL&&(e.k=m.VFALSE),o.luaK_goiftrue(t.fs,e),e.f},Jt=function(t,e){var a=t.linenumber,r=void 0;K(t,A.TK_GOTO)?r=X(t):(c.luaX_next(t),r=h.luaS_newliteral(t.L,"break"));var n=ct(t,t.dyd.gt,r,a,e);it(t,n)},qt=function(t,e,a){for(var r=t.bl.firstlabel;r<e.n;r++)if(x(a,e.arr[r].name)){var n=f.luaO_pushfstring(t.ls.L,l.to_luastring("label '%s' already defined on line %d",!0),a.getstr(),e.arr[r].line);C(t.ls,n)}},Wt=function(t){for(;t.t.token===k[";"]||t.t.token===A.TK_DBCOLON;)he(t)},Qt=function(t,e,a){var r=t.fs,n=t.dyd.label,u=void 0;qt(r,n,e),G(t,A.TK_DBCOLON),u=ct(t,n,e,a,o.luaK_getlabel(r)),Wt(t),kt(t,0)&&(n.arr[u].nactvar=r.bl.nactvar),_t(t,n.arr[u])},$t=function(t,e){var a=t.fs,r=new O;c.luaX_next(t);var n=o.luaK_getlabel(a),u=Zt(t);pt(a,r,1),G(t,A.TK_DO),jt(t),o.luaK_jumpto(a,n),F(t,A.TK_END,A.TK_WHILE,e),At(a),o.luaK_patchtohere(a,u)},te=function(t,e){var a=t.fs,r=o.luaK_getlabel(a),n=new O,u=new O;pt(a,n,1),pt(a,u,0),c.luaX_next(t),bt(t),F(t,A.TK_UNTIL,A.TK_REPEAT,e);var l=Zt(t);u.upval&&o.luaK_patchclose(a,l,u.nactvar),At(a),o.luaK_patchlist(a,l,r),At(a)},ee=function(t){var e=new N;return Xt(t,e),o.luaK_exp2nextreg(t.fs,e),u(e.k===m.VNONRELOC),e.u.info},ae=function(t,e,a,r,n){var u=new O,l=t.fs,s=void 0;W(t,3),G(t,A.TK_DO);var i=n?o.luaK_codeAsBx(l,L.OP_FORPREP,e,o.NO_JUMP):o.luaK_jump(l);pt(l,u,0),W(t,r),o.luaK_reserveregs(l,r),jt(t),At(l),o.luaK_patchtohere(l,i),n?s=o.luaK_codeAsBx(l,L.OP_FORLOOP,e,o.NO_JUMP):(o.luaK_codeABC(l,L.OP_TFORCALL,e,0,r),o.luaK_fixline(l,a),s=o.luaK_codeAsBx(l,L.OP_TFORLOOP,e+2,o.NO_JUMP)),o.luaK_patchlist(l,s,i+1),o.luaK_fixline(l,a)},re=function(t,e,a){var r=t.fs,n=r.freereg;J(t,"(for index)"),J(t,"(for limit)"),J(t,"(for step)"),Z(t,e),G(t,k["="]),ee(t),G(t,k[","]),ee(t),K(t,k[","])?ee(t):(o.luaK_codek(r,r.freereg,o.luaK_intK(r,1)),o.luaK_reserveregs(r,1)),ae(t,n,a,1,1)},ne=function(t,e){var a=t.fs,r=new N,n=4,u=a.freereg;for(J(t,"(for generator)"),J(t,"(for state)"),J(t,"(for control)"),Z(t,e);K(t,k[","]);)Z(t,X(t)),n++;G(t,A.TK_IN);var l=t.linenumber;ut(t,3,Ct(t,r),r),o.luaK_checkstack(a,3),ae(t,u,l,n-3,0)},ue=function(t,e){var a=t.fs,r=new O;pt(a,r,1),c.luaX_next(t);var n=X(t);switch(t.t.token){case k["="]:re(t,n,e);break;case k[","]:case A.TK_IN:ne(t,n);break;default:c.luaX_syntaxerror(t,l.to_luastring("'=' or 'in' expected",!0))}F(t,A.TK_END,A.TK_FOR,e),At(a)},le=function(t,e){var a=new O,r=t.fs,n=new N,u=void 0;if(c.luaX_next(t),Xt(t,n),G(t,A.TK_THEN),t.t.token===A.TK_GOTO||t.t.token===A.TK_BREAK){for(o.luaK_goiffalse(t.fs,n),pt(r,a,!1),Jt(t,n.t);K(t,k[";"]););if(kt(t,0))return At(r),e;u=o.luaK_jump(r)}else o.luaK_goiftrue(t.fs,n),pt(r,a,!1),u=n.f;return bt(t),At(r),t.t.token!==A.TK_ELSE&&t.t.token!==A.TK_ELSEIF||(e=o.luaK_concat(r,e,o.luaK_jump(r))),o.luaK_patchtohere(r,u),e},oe=function(t,e){var a=t.fs,r=o.NO_JUMP;for(r=le(t,r);t.t.token===A.TK_ELSEIF;)r=le(t,r);K(t,A.TK_ELSE)&&jt(t),F(t,A.TK_END,A.TK_IF,e),o.luaK_patchtohere(a,r)},se=function(t){var e=new N,a=t.fs;Z(t,X(t)),W(t,1),Mt(t,e,0,t.linenumber),q(a,e.u.info).startpc=a.pc},ie=function(t){var e=0,a=void 0,r=new N;do{Z(t,X(t)),e++}while(K(t,k[","]));K(t,k["="])?a=Ct(t,r):(r.k=m.VVOID,a=0),ut(t,e,a,r),W(t,e)},ce=function(t,e){var a=0;for(nt(t,e);t.t.token===k["."];)xt(t,e);return t.t.token===k[":"]&&(a=1,xt(t,e)),a},_e=function(t,e){var a=new N,r=new N;c.luaX_next(t);var n=ce(t,a);Mt(t,r,n,e),o.luaK_storevar(t.fs,a,r),o.luaK_fixline(t.fs,e)},fe=function(t){var e=t.fs,a=new Ht;Dt(t,a.v),t.t.token===k["="]||t.t.token===k[","]?(a.prev=null,Yt(t,a,1)):(V(t,a.v.k===m.VCALL,l.to_luastring("syntax error",!0)),p.SETARG_C(o.getinstruction(e,a.v),1))},pe=function(t){var e=t.fs,a=new N,r=void 0,n=void 0;kt(t,1)||t.t.token===k[";"]?r=n=0:(n=Ct(t,a),b(a.k)?(o.luaK_setmultret(e,a),a.k===m.VCALL&&1===n&&(p.SET_OPCODE(o.getinstruction(e,a),L.OP_TAILCALL),u(o.getinstruction(e,a).A===e.nactvar)),r=e.nactvar,n=l.LUA_MULTRET):1===n?r=o.luaK_exp2anyreg(e,a):(o.luaK_exp2nextreg(e,a),r=e.nactvar,u(n===e.freereg-r))),o.luaK_ret(e,r,n),K(t,k[";"])},he=function(t){var e=t.linenumber;switch(lt(t),t.t.token){case k[";"]:c.luaX_next(t);break;case A.TK_IF:oe(t,e);break;case A.TK_WHILE:$t(t,e);break;case A.TK_DO:c.luaX_next(t),jt(t),F(t,A.TK_END,A.TK_DO,e);break;case A.TK_FOR:ue(t,e);break;case A.TK_REPEAT:te(t,e);break;case A.TK_FUNCTION:_e(t,e);break;case A.TK_LOCAL:c.luaX_next(t),K(t,A.TK_FUNCTION)?se(t):ie(t);break;case A.TK_DBCOLON:c.luaX_next(t),Qt(t,X(t),e);break;case A.TK_RETURN:c.luaX_next(t),pe(t);break;case A.TK_BREAK:case A.TK_GOTO:Jt(t,o.luaK_jump(t.fs));break;default:fe(t)}u(t.fs.f.maxstacksize>=t.fs.freereg&&t.fs.freereg>=t.fs.nactvar),t.fs.freereg=t.fs.nactvar,ot(t)},ve=function(t,e){var a=new O,r=new N;dt(t,e,a),e.f.is_vararg=!0,j(r,m.VLOCAL,0),tt(e,t.envn,r),c.luaX_next(t),bt(t),B(t,A.TK_EOS),Tt(t)},ge=function(t,e,a,r,n,l){var o=new c.LexState,_=new S,f=i.luaF_newLclosure(t,1);return s.luaD_inctop(t),t.stack[t.top-1].setclLvalue(f),o.h=v.luaH_new(t),s.luaD_inctop(t),t.stack[t.top-1].sethvalue(o.h),_.f=f.p=new d(t),_.f.source=h.luaS_new(t,n),o.buff=a,o.dyd=r,r.actvar.n=r.gt.n=r.label.n=0,c.luaX_setinput(t,o,e,_.f.source,l),ve(o,_),u(!_.prev&&1===_.nups&&!o.fs),u(0===r.actvar.n&&0===r.gt.n&&0===r.label.n),delete t.stack[--t.top],f};t.exports.Dyndata=M,t.exports.expkind=m,t.exports.expdesc=N,t.exports.luaY_parser=ge,t.exports.vkisinreg=E},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(0),u=a(1),l=a(10),o=a(6),s=a(21),i=a(3),c=a(8),_=a(7),f=a(4),p=a(16),h=u.thread_status,v=u.char,g={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},L=g,d=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"],A=function t(){r(this,t),this.r=NaN,this.i=NaN,this.ts=null},T=function t(){r(this,t),this.token=NaN,this.seminfo=new A},k=function t(){r(this,t),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new T,this.lookahead=new T,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null},b=function(t,e){var a=t.buff;a.n+1>a.buffer.length&&a.buffer.length>=f.MAX_INT/2&&C(t,u.to_luastring("lexical element too long",!0),0),a.buffer[a.n++]=e<0?255+e+1:e},x=function(t,e){if(e<257)return i.luaO_pushfstring(t.L,u.to_luastring("'%c'",!0),e);var a=d[e-257];return e<L.TK_EOS?i.luaO_pushfstring(t.L,u.to_luastring("'%s'",!0),u.to_luastring(a)):u.to_luastring(a)},O=function(t){return t.current===v["\n"]||t.current===v["\r"]},m=function(t){t.current=t.z.zgetc()},U=function(t){b(t,t.current),m(t)},E=function(t,e){var a=t.L,r=c.luaS_new(a,e),l=_.luaH_set(a,t.h,new i.TValue(u.CT.LUA_TLNGSTR,r));if(l.ttisnil())l.setbvalue(!0);else{var o=t.h.strong.get(c.luaS_hashlongstr(r));n(o.value==l),r=o.key.tsvalue()}return r},N=function(t){var e=t.current;n(O(t)),m(t),O(t)&&t.current!==e&&m(t),++t.linenumber>=f.MAX_INT&&C(t,u.to_luastring("chunk has too many lines",!0),0)},S=function(t,e,a,r,n){e.t={token:0,seminfo:new A},e.L=t,e.current=n,e.lookahead={token:L.TK_EOS,seminfo:new A},e.z=a,e.fs=null,e.linenumber=1,e.lastline=1,e.source=r,e.envn=c.luaS_newliteral(t,"_ENV")},R=function(t,e){return t.current===e.charCodeAt(0)&&(m(t),!0)},y=function(t,e){return(t.current===e[0].charCodeAt(0)||t.current===e[1].charCodeAt(0))&&(U(t),!0)},I=function(t,e){var a="Ee",r=t.current;for(n(s.lisdigit(t.current)),U(t),r===v[0]&&y(t,"xX")&&(a="Pp");;)if(y(t,a)&&y(t,"-+"),s.lisxdigit(t.current))U(t);else{if(t.current!==v["."])break;U(t)}var l=i.luaO_str2num(t.buff.buffer);return!1===l&&C(t,u.to_luastring("malformed number",!0),L.TK_FLT),l.ttisinteger()?(e.i=l.value,L.TK_INT):(n(l.ttisfloat()),e.r=l.value,L.TK_FLT)},M=function(t,e){switch(e){case L.TK_NAME:case L.TK_STRING:case L.TK_FLT:case L.TK_INT:return i.luaO_pushfstring(t.L,u.to_luastring("'%s'",!0),t.buff.buffer);default:return x(t,e)}},C=function(t,e,a){e=l.luaG_addinfo(t.L,e,t.source,t.linenumber),a&&i.luaO_pushfstring(t.L,u.to_luastring("%s near %s"),e,M(t,a)),o.luaD_throw(t.L,h.LUA_ERRSYNTAX)},w=function(t,e){C(t,e,t.t.token)},P=function(t){var e=0,a=t.current;for(n(a===v["["]||a===v["]"]),U(t);t.current===v["="];)U(t),e++;return t.current===a?e:-e-1},D=function(t,e,a){var r=t.linenumber;U(t),O(t)&&N(t);for(var n=!1;!n;)switch(t.current){case p.EOZ:var l=e?"string":"comment",o="unfinished long "+l+" (starting at line "+r+")";C(t,u.to_luastring(o),L.TK_EOS);break;case v["]"]:P(t)===a&&(U(t),n=!0);break;case v["\n"]:case v["\r"]:b(t,v["\n"]),N(t),e||p.luaZ_resetbuffer(t.buff);break;default:e?U(t):m(t)}e&&(e.ts=E(t,t.buff.buffer.slice(2+a,2+a-2*(2+a))))},K=function(t,e,a){e||(t.current!==p.EOZ&&U(t),C(t,a,L.TK_STRING))},B=function(t){return U(t),K(t,s.lisxdigit(t.current),u.to_luastring("hexadecimal digit expected",!0)),i.luaO_hexavalue(t.current)},G=function(t){var e=B(t);return e=(e<<4)+B(t),p.luaZ_buffremove(t.buff,2),e},V=function(t){var e=4;U(t),K(t,t.current===v["{"],u.to_luastring("missing '{'",!0));var a=B(t);for(U(t);s.lisxdigit(t.current);)e++,a=(a<<4)+i.luaO_hexavalue(t.current),K(t,a<=1114111,u.to_luastring("UTF-8 value too large",!0)),U(t);return K(t,t.current===v["}"],u.to_luastring("missing '}'",!0)),m(t),p.luaZ_buffremove(t.buff,e),a},F=function(t){for(var e=i.luaO_utf8esc(V(t)),a=e.buff,r=e.n;r>0;r--)b(t,a[i.UTF8BUFFSZ-r])},X=function(t){var e=0,a=void 0;for(a=0;a<3&&s.lisdigit(t.current);a++)e=10*e+t.current-v[0],U(t);return K(t,e<=255,u.to_luastring("decimal escape too large",!0)),p.luaZ_buffremove(t.buff,a),e},j=function(t,e,a){for(U(t);t.current!==e;)switch(t.current){case p.EOZ:C(t,u.to_luastring("unfinished string",!0),L.TK_EOS);break;case v["\n"]:case v["\r"]:C(t,u.to_luastring("unfinished string",!0),L.TK_STRING);break;case v["\\"]:U(t);var r=void 0,n=void 0;switch(t.current){case v.a:n=7,r="read_save";break;case v.b:n=v["\b"],r="read_save";break;case v.f:n=v["\f"],r="read_save";break;case v.n:n=v["\n"],r="read_save";break;case v.r:n=v["\r"],r="read_save";break;case v.t:n=v["\t"],r="read_save";break;case v.v:n=v["\v"],r="read_save";break;case v.x:n=G(t),r="read_save";break;case v.u:F(t),r="no_save";break;case v["\n"]:case v["\r"]:N(t),n=v["\n"],r="only_save";break;case v["\\"]:case v['"']:case v["'"]:n=t.current,r="read_save";break;case p.EOZ:r="no_save";break;case v.z:for(p.luaZ_buffremove(t.buff,1),m(t);s.lisspace(t.current);)O(t)?N(t):m(t);r="no_save";break;default:K(t,s.lisdigit(t.current),u.to_luastring("invalid escape sequence",!0)),n=X(t),r="only_save"}"read_save"===r&&m(t),"read_save"!==r&&"only_save"!==r||(p.luaZ_buffremove(t.buff,1),b(t,n));break;default:U(t)}U(t),a.ts=E(t,t.buff.buffer.slice(1,t.buff.n-1))},H=Object.create(null);d.forEach(function(t,e){return H[c.luaS_hash(u.to_luastring(t))]=e});var z=function(t){var e=H[c.luaS_hashlongstr(t)];return void 0!==e&&e<=22},Y=function(t,e){for(p.luaZ_resetbuffer(t.buff);;)switch(n("number"==typeof t.current),t.current){case v["\n"]:case v["\r"]:N(t);break;case v[" "]:case v["\f"]:case v["\t"]:case v["\v"]:m(t);break;case v["-"]:if(m(t),t.current!==v["-"])return v["-"];if(m(t),t.current===v["["]){var a=P(t);if(p.luaZ_resetbuffer(t.buff),a>=0){D(t,null,a),p.luaZ_resetbuffer(t.buff);break}}for(;!O(t)&&t.current!==p.EOZ;)m(t);break;case v["["]:var r=P(t);return r>=0?(D(t,e,r),L.TK_STRING):(-1!==r&&C(t,u.to_luastring("invalid long string delimiter",!0),L.TK_STRING),v["["]);case v["="]:return m(t),R(t,"=")?L.TK_EQ:v["="];case v["<"]:return m(t),R(t,"=")?L.TK_LE:R(t,"<")?L.TK_SHL:v["<"];case v[">"]:return m(t),R(t,"=")?L.TK_GE:R(t,">")?L.TK_SHR:v[">"];case v["/"]:return m(t),R(t,"/")?L.TK_IDIV:v["/"];case v["~"]:return m(t),R(t,"=")?L.TK_NE:v["~"];case v[":"]:return m(t),R(t,":")?L.TK_DBCOLON:v[":"];case v['"']:case v["'"]:return j(t,t.current,e),L.TK_STRING;case v["."]:return U(t),R(t,".")?R(t,".")?L.TK_DOTS:L.TK_CONCAT:s.lisdigit(t.current)?I(t,e):v["."];case v[0]:case v[1]:case v[2]:case v[3]:case v[4]:case v[5]:case v[6]:case v[7]:case v[8]:case v[9]:return I(t,e);case p.EOZ:return L.TK_EOS;default:if(s.lislalpha(t.current)){do{U(t)}while(s.lislalnum(t.current));var l=E(t,t.buff.buffer);e.ts=l;var o=H[c.luaS_hashlongstr(l)];return void 0!==o&&o<=22?o+257:L.TK_NAME}var i=t.current;return m(t),i}},Z=function(t){t.lastline=t.linenumber,t.lookahead.token!==L.TK_EOS?(t.t.token=t.lookahead.token,t.t.seminfo.i=t.lookahead.seminfo.i,t.t.seminfo.r=t.lookahead.seminfo.r,t.t.seminfo.ts=t.lookahead.seminfo.ts,t.lookahead.token=L.TK_EOS):t.t.token=Y(t,t.t.seminfo)},J=function(t){return n(t.lookahead.token===L.TK_EOS),t.lookahead.token=Y(t,t.lookahead.seminfo),t.lookahead.token};t.exports.FIRST_RESERVED=257,t.exports.LexState=k,t.exports.RESERVED=g,t.exports.isreserved=z,t.exports.luaX_lookahead=J,t.exports.luaX_newstring=E,t.exports.luaX_next=Z,t.exports.luaX_setinput=S,t.exports.luaX_syntaxerror=w,t.exports.luaX_token2str=x,t.exports.luaX_tokens=d},function(t,e,a){"use strict";var r=a(2),n=a(39),u="_"+r.LUA_VERSION_MAJOR+"_"+r.LUA_VERSION_MINOR;t.exports.LUA_VERSUFFIX=u;t.exports.LUA_COLIBNAME="coroutine",t.exports.luaopen_coroutine=a(25).luaopen_coroutine;t.exports.LUA_TABLIBNAME="table",t.exports.luaopen_table=a(28).luaopen_table;t.exports.LUA_OSLIBNAME="os",t.exports.luaopen_os=a(31).luaopen_os;t.exports.LUA_STRLIBNAME="string",t.exports.luaopen_string=a(27).luaopen_string;t.exports.LUA_UTF8LIBNAME="utf8",t.exports.luaopen_utf8=a(29).luaopen_utf8;t.exports.LUA_BITLIBNAME="bit32";t.exports.LUA_MATHLIBNAME="math",t.exports.luaopen_math=a(26).luaopen_math;t.exports.LUA_DBLIBNAME="debug",t.exports.luaopen_debug=a(30).luaopen_debug;t.exports.LUA_LOADLIBNAME="package",t.exports.luaopen_package=a(32).luaopen_package,t.exports.luaL_openlibs=n.luaL_openlibs},function(t,e,a){"use strict";var r=a(2),n=a(5),u=function(t){var e=r.lua_tothread(t,1);return n.luaL_argcheck(t,e,1,r.to_luastring("thread expected",!0)),e},l=function(t,e,a){if(!r.lua_checkstack(e,a))return r.lua_pushliteral(t,"too many arguments to resume"),-1;if(r.lua_status(e)===r.LUA_OK&&0===r.lua_gettop(e))return r.lua_pushliteral(t,"cannot resume dead coroutine"),-1;r.lua_xmove(t,e,a);var n=r.lua_resume(e,t,a);if(n===r.LUA_OK||n===r.LUA_YIELD){var u=r.lua_gettop(e);return r.lua_checkstack(t,u+1)?(r.lua_xmove(e,t,u),u):(r.lua_pop(e,u),r.lua_pushliteral(t,"too many results to resume"),-1)}return r.lua_xmove(e,t,1),-1},o=function(t){var e=u(t),a=l(t,e,r.lua_gettop(t)-1);return a<0?(r.lua_pushboolean(t,0),r.lua_insert(t,-2),2):(r.lua_pushboolean(t,1),r.lua_insert(t,-(a+1)),a+1)},s=function(t){var e=r.lua_tothread(t,r.lua_upvalueindex(1)),a=l(t,e,r.lua_gettop(t));return a<0?(r.lua_type(t,-1)===r.LUA_TSTRING&&(n.luaL_where(t,1),r.lua_insert(t,-2),r.lua_concat(t,2)),r.lua_error(t)):a},i=function(t){n.luaL_checktype(t,1,r.LUA_TFUNCTION);var e=r.lua_newthread(t);return r.lua_pushvalue(t,1),r.lua_xmove(t,e,1),1},c=function(t){return i(t),r.lua_pushcclosure(t,s,1),1},_=function(t){return r.lua_yield(t,r.lua_gettop(t))},f=function(t){var e=u(t);if(t===e)r.lua_pushliteral(t,"running");else switch(r.lua_status(e)){case r.LUA_YIELD:r.lua_pushliteral(t,"suspended");break;case r.LUA_OK:var a=new r.lua_Debug;r.lua_getstack(e,0,a)>0?r.lua_pushliteral(t,"normal"):0===r.lua_gettop(e)?r.lua_pushliteral(t,"dead"):r.lua_pushliteral(t,"suspended");break;default:r.lua_pushliteral(t,"dead")}return 1},p=function(t){return r.lua_pushboolean(t,r.lua_isyieldable(t)),1},h=function(t){return r.lua_pushboolean(t,r.lua_pushthread(t)),2},v={create:i,isyieldable:p,resume:o,running:h,status:f,wrap:c,yield:_},g=function(t){return n.luaL_newlib(t,v),1};t.exports.luaopen_coroutine=g},function(t,e,a){"use strict";var r=a(2),n=a(5),u=a(4),l=a(9),o=function(t){var e=void 0,a=void 0,l=Math.random();switch(r.lua_gettop(t)){case 0:return r.lua_pushnumber(t,l),1;case 1:e=1,a=n.luaL_checkinteger(t,1);break;case 2:e=n.luaL_checkinteger(t,1),a=n.luaL_checkinteger(t,2);break;default:return n.luaL_error(t,r.to_luastring("wrong number of arguments",!0))}return n.luaL_argcheck(t,e<=a,1,r.to_luastring("interval is empty",!0)),n.luaL_argcheck(t,e>=0||a<=u.MAX_INT+e,1,r.to_luastring("interval too large",!0)),l*=a-e+1,r.lua_pushinteger(t,Math.floor(l)+e),1},s=function(t){if(r.lua_isinteger(t,1)){var e=r.lua_tointeger(t,1);e<0&&(e=0|-e),r.lua_pushinteger(t,e)}else r.lua_pushnumber(t,Math.abs(n.luaL_checknumber(t,1)));return 1},i=function(t){return r.lua_pushnumber(t,Math.sin(n.luaL_checknumber(t,1))),1},c=function(t){return r.lua_pushnumber(t,Math.cos(n.luaL_checknumber(t,1))),1},_=function(t){return r.lua_pushnumber(t,Math.tan(n.luaL_checknumber(t,1))),1},f=function(t){return r.lua_pushnumber(t,Math.asin(n.luaL_checknumber(t,1))),1},p=function(t){return r.lua_pushnumber(t,Math.acos(n.luaL_checknumber(t,1))),1},h=function(t){var e=n.luaL_checknumber(t,1),a=n.luaL_optnumber(t,2,1);return r.lua_pushnumber(t,Math.atan2(e,a)),1},v=function(t){var e=r.lua_tointegerx(t,1);return!1!==e?r.lua_pushinteger(t,e):(n.luaL_checkany(t,1),r.lua_pushnil(t)),1},g=function(t,e){var a=l.lua_numbertointeger(e);!1!==a?r.lua_pushinteger(t,a):r.lua_pushnumber(t,e)},L=function(t){return r.lua_isinteger(t,1)?r.lua_settop(t,1):g(t,Math.floor(n.luaL_checknumber(t,1))),1},d=function(t){return r.lua_isinteger(t,1)?r.lua_settop(t,1):g(t,Math.ceil(n.luaL_checknumber(t,1))),1},A=function(t){return r.lua_pushnumber(t,Math.sqrt(n.luaL_checknumber(t,1))),1},T=function(t){var e=n.luaL_checkinteger(t,1),a=n.luaL_checkinteger(t,2);return r.lua_pushboolean(t,e>=0?a<0||e<a:a<0&&e<a),1},k=function(t){var e=n.luaL_checknumber(t,1),a=void 0;if(r.lua_isnoneornil(t,2))a=Math.log(e);else{var u=n.luaL_checknumber(t,2);a=2===u?Math.log2(e):10===u?Math.log10(e):Math.log(e)/Math.log(u)}return r.lua_pushnumber(t,a),1},b=function(t){return r.lua_pushnumber(t,Math.exp(n.luaL_checknumber(t,1))),1},x=function(t){return r.lua_pushnumber(t,n.luaL_checknumber(t,1)*(180/Math.PI)),1},O=function(t){return r.lua_pushnumber(t,n.luaL_checknumber(t,1)*(Math.PI/180)),1},m=function(t){var e=r.lua_gettop(t),a=1;n.luaL_argcheck(t,e>=1,1,r.to_luastring("value expected",!0));for(var u=2;u<=e;u++)r.lua_compare(t,u,a,r.LUA_OPLT)&&(a=u);return r.lua_pushvalue(t,a),1},U=function(t){var e=r.lua_gettop(t),a=1;n.luaL_argcheck(t,e>=1,1,r.to_luastring("value expected",!0));for(var u=2;u<=e;u++)r.lua_compare(t,a,u,r.LUA_OPLT)&&(a=u);return r.lua_pushvalue(t,a),1},E=function(t){return r.lua_type(t,1)===r.LUA_TNUMBER?r.lua_isinteger(t,1)?r.lua_pushliteral(t,"integer"):r.lua_pushliteral(t,"float"):(n.luaL_checkany(t,1),r.lua_pushnil(t)),1},N=function(t){if(r.lua_isinteger(t,1)&&r.lua_isinteger(t,2)){var e=r.lua_tointeger(t,2);0===e?n.luaL_argerror(t,2,r.to_luastring("zero",!0)):r.lua_pushinteger(t,r.lua_tointeger(t,1)%e|0)}else{var a=n.luaL_checknumber(t,1),u=n.luaL_checknumber(t,2);r.lua_pushnumber(t,a%u)}return 1},S=function(t){if(r.lua_isinteger(t,1))r.lua_settop(t,1),r.lua_pushnumber(t,0);else{var e=n.luaL_checknumber(t,1),a=e<0?Math.ceil(e):Math.floor(e);g(t,a),r.lua_pushnumber(t,e===a?0:e-a)}return 2},R={abs:s,acos:p,asin:f,atan:h,ceil:d,cos:c,deg:x,exp:b,floor:L,fmod:N,log:k,max:U,min:m,modf:S,rad:O,random:o,sin:i,sqrt:A,tan:_,tointeger:v,type:E,ult:T},y=function(t){return n.luaL_newlib(t,R),r.lua_pushnumber(t,Math.PI),r.lua_setfield(t,-2,r.to_luastring("pi",!0)),r.lua_pushnumber(t,1/0),r.lua_setfield(t,-2,r.to_luastring("huge",!0)),r.lua_pushinteger(t,u.MAX_INT),r.lua_setfield(t,-2,r.to_luastring("maxinteger",!0)),r.lua_pushinteger(t,u.MIN_INT),r.lua_setfield(t,-2,r.to_luastring("mininteger",!0)),1};t.exports.luaopen_math=y},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var u=a(0),l=a(20).sprintf,o=a(5),s=a(2),i=a(9),c=a(4),_="%",f=_.charCodeAt(0),p=function(t){var e=t.indexOf(0);return e>-1?e:t.length},h=function(t,e){return t>=0?t:0-t>e?0:e+t+1},v=function(t){var e=o.luaL_checkstring(t,1),a=e.length,r=h(o.luaL_checkinteger(t,2),a),n=h(o.luaL_optinteger(t,3,-1),a);return r<1&&(r=1),n>a&&(n=a),r<=n?s.lua_pushstring(t,e.slice(r-1,r-1+(n-r+1))):s.lua_pushliteral(t,""),1},g=function(t){return s.lua_pushinteger(t,o.luaL_checkstring(t,1).length),1},L=function(t){for(var e=s.lua_gettop(t),a=[],r=1;r<=e;r++){var n=o.luaL_checkinteger(t,r);o.luaL_argcheck(t,n>=0&&n<=255,"value out of range"),a.push(n)}return s.lua_pushstring(t,a),1},d=function(t,e,a,r){return r.push.apply(r,n(e.slice(0,a))),0},A=function(t){var e=[],a=s.lua_toboolean(t,2);return o.luaL_checktype(t,1,s.LUA_TFUNCTION),s.lua_settop(t,1),0!==s.lua_dump(t,d,e,a)?o.luaL_error(t,s.to_luastring("unable to dump given function")):(s.lua_pushstring(t,e),1)},T=i.LUA_NUMBER_FRMLEN.length+1,k=function(t,e,a){var r=Math.floor(a);return t[e]=r<10?r+"0".charCodeAt(0):r-10+"a".charCodeAt(0),a-r},b=function(t){if(Object.is(t,1/0))return s.to_luastring("inf",!0).slice(0);if(Object.is(t,-1/0))return s.to_luastring("-inf",!0).slice(0);if(Number.isNaN(t))return s.to_luastring("nan",!0).slice(0);if(0===t){var e=l(i.LUA_NUMBER_FMT+"x0p+0",t);return Object.is(t,-0)&&(e="-"+e),s.to_luastring(e)}var a=[],r=i.frexp(t),n=r[0],u=r[1],o=0;if(n<0&&(a[o++]="-".charCodeAt(0),n=-n),a[o++]="0".charCodeAt(0),a[o++]="x".charCodeAt(0),n=k(a,o++,2*n),u-=1,n>0){a[o++]=i.lua_getlocaledecpoint().charCodeAt(0);do{n=k(a,o++,16*n)}while(n>0)}var c=s.to_luastring(l("p%+d",u));return a.concat(c)},x=function(t,e,a){var r=b(a);if(e[T]==="A".charCodeAt(0))for(var n=0;n<r.length;n++)r[n]=String.fromCharCode(r[n]).toUpperCase().charCodeAt(0);else e[T]!=="a".charCodeAt(0)&&o.luaL_error(t,s.to_luastring("modifiers for format '%%a'/'%%A' not implemented"));return r},O=["-".charCodeAt(0),"+".charCodeAt(0)," ".charCodeAt(0),"#".charCodeAt(0),"0".charCodeAt(0)],m=function(t){return"a".charCodeAt(0)<=t&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)},U=function(t){return"0".charCodeAt(0)<=t&&t<="9".charCodeAt(0)},E=function(t){return 0<=t&&t<=31||127===t},N=function(t){return t>32&&t<127},S=function(t){return/^[a-z]$/.test(String.fromCharCode(t))},R=function(t){return/^[A-Z]$/.test(String.fromCharCode(t))},y=function(t){return/^[a-zA-Z0-9]$/.test(String.fromCharCode(t))},I=function(t){return N(t)&&!y(t)},M=function(t){return/^\s$/.test(String.fromCharCode(t))},C=function(t){return/^[0-9A-Fa-f]$/.test(String.fromCharCode(t))},w=function(t,e){for(var a=0;a<e.length;a++)t.push(e[a])},P=function(t,e){t.push('"'.charCodeAt(0));for(var a=e.length;a--;){if(e[0]==='"'.charCodeAt(0)||e[0]==="\\".charCodeAt(0)||e[0]==="\n".charCodeAt(0))t.push("\\".charCodeAt(0)),t.push(e[0]);else if(E(e[0])){var r=[];r=U(e[1])?s.to_luastring(l("\\%03d",e[0])):s.to_luastring(l("\\%d",e[0])),w(t,r)}else t.push(e[0]);e=e.slice(1)}t.push('"'.charCodeAt(0))},D=function(t){if(t.indexOf(".".charCodeAt(0))<0){var e=i.lua_getlocaledecpoint().charCodeAt(0),a=t.indexOf(e);a&&(t[a]=".")}},K=function(t,e,a){switch(s.lua_type(t,a)){case s.LUA_TSTRING:var r=s.lua_tostring(t,a);P(e,r,r.length);break;case s.LUA_TNUMBER:if(s.lua_isinteger(t,a)){var n=s.lua_tointeger(t,a),u=n===c.LUA_MININTEGER?"0x%"+i.LUA_INTEGER_FRMLEN+"x":i.LUA_INTEGER_FMT;w(e,s.to_luastring(l(u,n)))}else{var _=s.lua_tonumber(t,a);w(e,x(t,s.to_luastring("%"+i.LUA_INTEGER_FRMLEN+"a"),_)),D(e)}break;case s.LUA_TNIL:case s.LUA_TBOOLEAN:w(e,o.luaL_tolstring(t,a));break;default:o.luaL_argerror(t,a,s.to_luastring("value has no literal form",!0))}},B=function(t,e,a){for(var r=e;0!==r[0]&&O.indexOf(r[0])>=0;)r=r.slice(1);e.length-r.length>=O.length&&o.luaL_error(t,s.to_luastring("invalid format (repeated flags)",!0)),U(r[0])&&(r=r.slice(1)),U(r[0])&&(r=r.slice(1)),r[0]===".".charCodeAt(0)&&(r=r.slice(1),U(r[0])&&(r=r.slice(1)),U(r[0])&&(r=r.slice(1))),U(r[0])&&o.luaL_error(t,s.to_luastring("invalid format (width or precision too long)",!0)),a[0]="%".charCodeAt(0);for(var n=0;n<e.length-r.length+1;n++)a[n+1]=e[n];return{form:a,p:r}},G=function(t,e){for(var a=t.length,r=e.length,n=t[a-1],u=0;u<e.length;u++)t[u+a-1]=e[u];return t[a+r-1]=n,t},V=function(t){for(var e=s.lua_gettop(t),a=1,r=o.luaL_checkstring(t,a),u=[];r.length>0;)if(r[0]!==f)u.push(r[0]),r=r.slice(1);else if((r=r.slice(1))[0]===f)u.push(r[0]),r=r.slice(1);else{var c=[];++a>e&&o.luaL_argerror(t,a,s.to_luastring("no value",!0));var _=B(t,r,c);switch(r=_.p,c=_.form,String.fromCharCode(r[0])){case"c":r=r.slice(1),u.push(o.luaL_checkinteger(t,a));break;case"d":case"i":case"o":case"u":case"x":case"X":r=r.slice(1);var h=o.luaL_checkinteger(t,a);c=G(c,i.LUA_INTEGER_FRMLEN.split("").map(function(t){return t.charCodeAt(0)})),w(u,s.to_luastring(l(String.fromCharCode.apply(String,n(c)),h)));break;case"a":case"A":r=r.slice(1),c=G(c,i.LUA_INTEGER_FRMLEN.split("").map(function(t){return t.charCodeAt(0)})),w(u,x(t,c,o.luaL_checknumber(t,a)));break;case"e":case"E":case"f":case"g":case"G":r=r.slice(1);var v=o.luaL_checknumber(t,a);c=G(c,i.LUA_INTEGER_FRMLEN.split("").map(function(t){return t.charCodeAt(0)})),w(u,s.to_luastring(l(String.fromCharCode.apply(String,n(c)),v)));break;case"q":r=r.slice(1),K(t,u,a);break;case"s":r=r.slice(1);var g=o.luaL_tolstring(t,a);c.length<=2||0===c[2]?(w(u,g),s.lua_pop(t,1)):(o.luaL_argcheck(t,g.length===p(g),a,s.to_luastring("string contains zeros",!0)),c.indexOf(".".charCodeAt(0))<0&&g.length>=100?(w(u,g),s.lua_pop(t,1)):(w(u,s.to_luastring(l(String.fromCharCode.apply(String,n(c)),s.to_jsstring(g)))),s.lua_pop(t,1)));break;default:return o.luaL_error(t,s.to_luastring("invalid option '%%%c' to 'format'"),r[0])}}return s.lua_pushstring(t,u),1},F=function t(e){r(this,t),this.L=e,this.islittle=!0,this.maxalign=1},X={Kint:0,Kuint:1,Kfloat:2,Kchar:3,Kstring:4,Kzstr:5,Kpadding:6,Kpaddalign:7,Knop:8},j=function(t){return"0".charCodeAt(0)<=t&&t<="9".charCodeAt(0)},H=function(t,e){if(t.off>=t.s.length||!j(t.s[t.off]))return e;var a=0;do{a=10*a+(t.s[t.off++]-"0".charCodeAt(0))}while(t.off<t.s.length&&j(t.s[t.off])&&a<=214748363.8);return a},z=function(t,e,a){var r=H(e,a);return(r>16||r<=0)&&o.luaL_error(t.L,s.to_luastring("integral size (%d) out of limits [1,%d]"),r,16),r},Y=function(t,e){var a={opt:NaN,size:NaN};switch(a.opt=e.s[e.off++],a.size=0,a.opt){case"b".charCodeAt(0):return a.size=1,a.opt=X.Kint,a;case"B".charCodeAt(0):return a.size=1,a.opt=X.Kuint,a;case"h".charCodeAt(0):return a.size=2,a.opt=X.Kint,a;case"H".charCodeAt(0):return a.size=2,a.opt=X.Kuint,a;case"l".charCodeAt(0):return a.size=4,a.opt=X.Kint,a;case"L".charCodeAt(0):return a.size=4,a.opt=X.Kuint,a;case"j".charCodeAt(0):return a.size=4,a.opt=X.Kint,a;case"J".charCodeAt(0):case"T".charCodeAt(0):return a.size=4,a.opt=X.Kuint,a;case"f".charCodeAt(0):return a.size=4,a.opt=X.Kfloat,a;case"d".charCodeAt(0):case"n".charCodeAt(0):return a.size=8,a.opt=X.Kfloat,a;case"i".charCodeAt(0):return a.size=z(t,e,4),a.opt=X.Kint,a;case"I".charCodeAt(0):return a.size=z(t,e,4),a.opt=X.Kuint,a;case"s".charCodeAt(0):return a.size=z(t,e,4),a.opt=X.Kstring,a;case"c".charCodeAt(0):return a.size=H(e,-1),-1===a.size&&o.luaL_error(t.L,s.to_luastring("missing size for format option 'c'")),a.opt=X.Kchar,a;case"z".charCodeAt(0):return a.opt=X.Kzstr,a;case"x".charCodeAt(0):return a.size=1,a.opt=X.Kpadding,a;case"X".charCodeAt(0):return a.opt=X.Kpaddalign,a;case" ".charCodeAt(0):break;case"<".charCodeAt(0):t.islittle=!0;break;case">".charCodeAt(0):t.islittle=!1;break;case"=".charCodeAt(0):t.islittle=!0;break;case"!".charCodeAt(0):t.maxalign=z(t,e,8);break;default:o.luaL_error(t.L,s.to_luastring("invalid format option '%c'"),a.opt)}return a.opt=X.Knop,a},Z=function(t,e,a){var r={opt:NaN,size:NaN,ntoalign:NaN},n=Y(t,a);r.size=n.size,r.opt=n.opt;var u=r.size;if(r.opt===X.Kpaddalign)if(a.off>=a.s.length||0===a.s[a.off])o.luaL_argerror(t.L,1,s.to_luastring("invalid next option for option 'X'",!0));else{var l=Y(t,a);u=l.size,l=l.opt,l!==X.Kchar&&0!==u||o.luaL_argerror(t.L,1,s.to_luastring("invalid next option for option 'X'",!0))}return u<=1||r.opt===X.Kchar?r.ntoalign=0:(u>t.maxalign&&(u=t.maxalign),0!=(u&u-1)&&o.luaL_argerror(t.L,1,s.to_luastring("format asks for alignment not power of 2",!0)),r.ntoalign=u-(e&u-1)&u-1),r},J=function(t,e,a,r,n){var u=new Array(r);u[a?0:r-1]=255&e;for(var l=1;l<r;l++)e>>=8,u[a?l:r-1-l]=255&e;if(n&&r>4)for(var o=4;o<r;o++)u[a?o:r-1-o]=255;t.push.apply(t,u)},q=function(t,e,a,r){var n=new DataView(new ArrayBuffer(r));4===r?n.setFloat32(0,e,a):n.setFloat64(0,e,a);for(var u=0;u<r;u++)t.push(n.getUint8(u,a))},W=function(t){var e=[],a=new F(t),r={s:o.luaL_checkstring(t,1),off:0},u=1,l=0;for(s.lua_pushnil(t);r.off<r.s.length;){var i=Z(a,l,r),c=i.opt,_=i.size,f=i.ntoalign;for(l+=f+_;f-- >0;)e.push(0);switch(u++,c){case X.Kint:var p=o.luaL_checkinteger(t,u);if(_<4){var h=1<<8*_-1;o.luaL_argcheck(t,-h<=p&&p<h,u,s.to_luastring("integer overflow",!0))}J(e,p,a.islittle,_,p<0);break;case X.Kuint:var v=o.luaL_checkinteger(t,u);_<4&&o.luaL_argcheck(t,v>>>0<1<<8*_,u,s.to_luastring("unsigned overflow",!0)),J(e,v>>>0,a.islittle,_,!1);break;case X.Kfloat:var g=o.luaL_checknumber(t,u);q(e,g,a.islittle,_);break;case X.Kchar:var L=o.luaL_checkstring(t,u),d=L.length;for(o.luaL_argcheck(t,d<=_,u,s.to_luastring("string longer than given size",!0)),e.push.apply(e,n(L));d++<_;)e.push(0);break;case X.Kstring:var A=o.luaL_checkstring(t,u),T=A.length;o.luaL_argcheck(t,_>=4||T<1<<8*_,u,s.to_luastring("string length does not fit in given size",!0)),J(e,T,a.islittle,_,0),e.push.apply(e,n(A)),l+=T;break;case X.Kzstr:var k=o.luaL_checkstring(t,u),b=k.length;o.luaL_argcheck(t,k.indexOf(0)<0,u,s.to_luastring("strings contains zeros",!0)),e.push.apply(e,n(k)),e.push(0),l+=b+1;break;case X.Kpadding:e.push(0);case X.Kpaddalign:case X.Knop:u--}}return s.lua_pushstring(t,e),1},Q=function(t){return s.lua_pushstring(t,o.luaL_checkstring(t,1).slice(0).reverse()),1},$=function(t){return s.lua_pushstring(t,s.to_luastring(s.to_jsstring(o.luaL_checkstring(t,1)).toLowerCase())),1},tt=function(t){return s.lua_pushstring(t,s.to_luastring(s.to_jsstring(o.luaL_checkstring(t,1)).toUpperCase())),1},et=function(t){var e=o.luaL_checkstring(t,1),a=o.luaL_checkinteger(t,2),r=o.luaL_optstring(t,3,[]);if(e.length+r.length<e.length||e.length+r.length>2147483647/a)return o.luaL_error(t,s.to_luastring("resulting string too large",!0));for(var n=[],u=0;u<a-1;u++)n=n.concat(e.concat(r));return n=n.concat(e),s.lua_pushstring(t,a>0?n:[]),1},at=function(t){var e=o.luaL_checkstring(t,1),a=e.length,r=h(o.luaL_optinteger(t,2,1),a),n=h(o.luaL_optinteger(t,3,r),a);if(r<1&&(r=1),n>a&&(n=a),r>n)return 0;if(n-r>=c.MAX_INT)return o.luaL_error(t,s.to_luastring("string slice too long",!0));var u=n-r+1;o.luaL_checkstack(t,u,s.to_luastring("string slice too long",!0));for(var l=0;l<u;l++)s.lua_pushinteger(t,e[r+l-1]);return u},rt=function(t){for(var e=new F(t),a={s:o.luaL_checkstring(t,1),off:0},r=0;a.off<a.s.length;){var n=Z(e,r,a),u=n.opt,l=n.size;switch(l+=n.ntoalign,o.luaL_argcheck(t,r<=2147483647-l,1,s.to_luastring("format result too large",!0)),r+=l,u){case X.Kstring:case X.Kzstr:o.luaL_argerror(t,1,s.to_luastring("variable-length format",!0))}}return s.lua_pushinteger(t,r),1},nt=function(t,e,a,r,n){for(var u=0,l=r<=4?r:4,i=l-1;i>=0;i--)u<<=8,u|=e[a?i:r-1-i];if(r<4){if(n){var c=1<<8*r-1;u=(u^c)-c}}else if(r>4)for(var _=!n||u>=0?0:255,f=l;f<r;f++)e[a?f:r-1-f]!==_&&o.luaL_error(t,s.to_luastring("%d-byte integer does not fit into Lua Integer"),r);return u},ut=function(t,e,a,r){u(e.length>=r);for(var n=new DataView(new ArrayBuffer(r)),l=0;l<r;l++)n.setUint8(l,e[l],a);return 4==r?n.getFloat32(0,a):n.getFloat64(0,a)},lt=function(t){var e=new F(t),a={s:o.luaL_checkstring(t,1),off:0},r=o.luaL_checkstring(t,2),n=r.length,u=h(o.luaL_optinteger(t,3,1),n)-1,l=0;for(o.luaL_argcheck(t,u<=n&&u>=0,3,s.to_luastring("initial position out of string",!0));a.off<a.s.length;){var i=Z(e,u,a),c=i.opt,_=i.size,f=i.ntoalign;switch(u+f+_>n&&o.luaL_argerror(t,2,s.to_luastring("data string too short",!0)),u+=f,o.luaL_checkstack(t,2,s.to_luastring("too many results",!0)),l++,c){case X.Kint:case X.Kuint:var p=nt(t,r.slice(u),e.islittle,_,c===X.Kint);s.lua_pushinteger(t,p);break;case X.Kfloat:var v=ut(0,r.slice(u),e.islittle,_);s.lua_pushnumber(t,v);break;case X.Kchar:s.lua_pushstring(t,r.slice(u,u+_));break;case X.Kstring:var g=nt(t,r.slice(u),e.islittle,_,0);o.luaL_argcheck(t,u+g+_<=n,2,s.to_luastring("data string too short",!0)),s.lua_pushstring(t,r.slice(u+_,u+_+g)),u+=g;break;case X.Kzstr:var L=r.slice(u).indexOf(0);s.lua_pushstring(t,r.slice(u,u+L)),u+=L+1;break;case X.Kpaddalign:case X.Kpadding:case X.Knop:l--}u+=_}return s.lua_pushinteger(t,u+1),l+1},ot=["^".charCodeAt(0),"$".charCodeAt(0),"*".charCodeAt(0),"+".charCodeAt(0),"?".charCodeAt(0),".".charCodeAt(0),"(".charCodeAt(0),"[".charCodeAt(0),"%".charCodeAt(0),"-".charCodeAt(0)],st=function t(e){r(this,t),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=e,this.matchdepth=NaN,this.level=NaN,this.capture=[]},it=function(t,e){return e-="1".charCodeAt(0),e<0||e>=t.level||-1===t.capture[e].len?o.luaL_error(t.L,s.to_luastring("invalid capture index %%%d"),e+1):e},ct=function(t){var e=t.level;for(e--;e>=0;e--)if(-1===t.capture[e].len)return e;return o.luaL_error(t.L,s.to_luastring("invalid pattern capture"))},_t=function(t,e){switch(t.p[e++]){case f:return e===t.p_end&&o.luaL_error(t.L,s.to_luastring("malformed pattern (ends with '%%')")),e+1;case"[".charCodeAt(0):t.p[e]==="^".charCodeAt(0)&&e++;do{e===t.p_end&&o.luaL_error(t.L,s.to_luastring("malformed pattern (missing ']')")),t.p[e++]===f&&e<t.p_end&&e++}while(t.p[e]!=="]".charCodeAt(0));return e+1;default:return e}},ft=function(t,e){var a=void 0;switch(String.fromCharCode(e).toLowerCase().charCodeAt(0)){case"a".charCodeAt(0):a=m(t);break;case"c".charCodeAt(0):a=E(t);break;case"d".charCodeAt(0):a=U(t);break;case"g".charCodeAt(0):a=N(t);break;case"l".charCodeAt(0):a=S(t);break;case"p".charCodeAt(0):a=I(t);break;case"s".charCodeAt(0):a=M(t);break;case"u".charCodeAt(0):a=R(t);break;case"w".charCodeAt(0):a=y(t);break;case"x".charCodeAt(0):a=C(t);break;case"z".charCodeAt(0):a=0===t;break;default:return e===t}return S(e)?a:!a},pt=function(t,e,a,r){var n=!0;for(t.p[a+1]==="^".charCodeAt(0)&&(n=!1,a++);++a<r;)if(t.p[a]===f){if(a++,ft(e,t.p[a]))return n}else if(t.p[a+1]==="-".charCodeAt(0)&&a+2<r){if(a+=2,t.p[a-2]<=e&&e<=t.p[a])return n}else if(t.p[a]===e)return n;return!n},ht=function(t,e,a,r){if(e>=t.src_end)return!1;var n=t.src[e];switch(t.p[a]){case".".charCodeAt(0):return!0;case f:return ft(n,t.p[a+1]);case"[".charCodeAt(0):return pt(t,n,a,r-1);default:return t.p[a]===n}},vt=function(t,e,a){if(a>=t.p_end-1&&o.luaL_error(t.L,s.to_luastring("malformed pattern (missing arguments to '%%b'")),t.src[e]!==t.p[a])return null;for(var r=t.p[a],n=t.p[a+1],u=1;++e<t.src_end;)if(t.src[e]===n){if(0==--u)return e+1}else t.src[e]===r&&u++;return null},gt=function(t,e,a,r){for(var n=0;ht(t,e+n,a,r);)n++;for(;n>=0;){var u=bt(t,e+n,r+1);if(u)return u;n--}return null},Lt=function(t,e,a,r){for(;;){var n=bt(t,e,r+1);if(null!==n)return n;if(!ht(t,e,a,r))return null;e++}},dt=function(t,e,a,r){var n=t.level;n>=32&&o.luaL_error(t.L,s.to_luastring("too many captures",!0)),t.capture[n]=t.capture[n]?t.capture[n]:{},t.capture[n].init=e,t.capture[n].len=r,t.level=n+1;var u=void 0;return null===(u=bt(t,e,a))&&t.level--,u},At=function(t,e,a){var r=ct(t);t.capture[r].len=e-t.capture[r].init;var n=void 0;return null===(n=bt(t,e,a))&&(t.capture[r].len=-1),n},Tt=function(t,e,a,r,n){for(var u=e+n;e<u;e++,r++)if(t[e]!==a[r])return!1;return!0},kt=function(t,e,a){a=it(t,a);var r=t.capture[a].len;return t.src_end-e>=r&&Tt(t.src,t.capture[a].init,t.src,e,r)?e+r:null},bt=function t(e,a,r){var n=!1,u=!0;for(0==e.matchdepth--&&o.luaL_error(e.L,s.to_luastring("pattern too complex",!0));u||n;)if(u=!1,r!==e.p_end)switch(n?"x".charCodeAt(0):e.p[r]){case"(".charCodeAt(0):a=e.p[r+1]===")".charCodeAt(0)?dt(e,a,r+2,-2):dt(e,a,r+1,-1);break;case")".charCodeAt(0):a=At(e,a,r+1);break;case"$".charCodeAt(0):if(r+1!==e.p_end){n=!0;break}a=0===e.src.slice(a).length?a:null;break;case f:switch(e.p[r+1]){case"b".charCodeAt(0):a=vt(e,a,r+2),null!==a&&(r+=4,u=!0);break;case"f".charCodeAt(0):r+=2,e.p[r]!=="[".charCodeAt(0)&&o.luaL_error(e.L,s.to_luastring("missing '[' after '%%f' in pattern"));var l=_t(e,r),i=a===e.src_init?0:e.src[a-1];if(!pt(e,i,r,l-1)&&pt(e,a===e.src_end?0:e.src[a],r,l-1)){r=l,u=!0;break}a=null;break;case"0".charCodeAt(0):case"1".charCodeAt(0):case"2".charCodeAt(0):case"3".charCodeAt(0):case"4".charCodeAt(0):case"5".charCodeAt(0):case"6".charCodeAt(0):case"7".charCodeAt(0):case"8".charCodeAt(0):case"9".charCodeAt(0):a=kt(e,a,e.p[r+1]),null!==a&&(r+=2,u=!0);break;default:n=!0}break;default:n=!1;var c=_t(e,r);if(ht(e,a,r,c))switch(e.p[c]){case"?".charCodeAt(0):var _=void 0;null!==(_=t(e,a+1,c+1))?a=_:(r=c+1,u=!0);break;case"+".charCodeAt(0):a++;case"*".charCodeAt(0):a=gt(e,a,r,c);break;case"-".charCodeAt(0):a=Lt(e,a,r,c);break;default:a++,r=c,u=!0}else{if(e.p[c]==="*".charCodeAt(0)||e.p[c]==="?".charCodeAt(0)||e.p[c]==="-".charCodeAt(0)){r=c+1,u=!0;break}a=null}}return e.matchdepth++,a},xt=function(t,e,a,r){if(e>=t.level)0===e?s.lua_pushlstring(t.L,t.src.slice(a,r),r-a):o.luaL_error(t.L,s.to_luastring("invalid capture index %%%d"),e+1);else{var n=t.capture[e].len;-1===n&&o.luaL_error(t.L,s.to_luastring("unfinished capture",!0)),-2===n?s.lua_pushinteger(t.L,t.capture[e].init-t.src_init+1):s.lua_pushlstring(t.L,t.src.slice(t.capture[e].init),n)}},Ot=function(t,e,a){var r=0===t.level&&t.src.slice(e)?1:t.level;o.luaL_checkstack(t.L,r,s.to_luastring("too many catpures",!0));for(var n=0;n<r;n++)xt(t,n,e,a);return r},mt=function(t,e){var a=0;do{for(var r=!1,n=t.slice(a),u=0;u<ot.length;u++)if(n.indexOf(ot[u])>-1){r=!0;break}if(r)return!1;a+=1}while(a<=e);return!0},Ut=function(t,e,a,r,n,u){t.L=e,t.matchdepth=200,t.src=a,t.src_init=0,t.src_end=r,t.p=n,t.p_end=u},Et=function(t){t.level=0,u(200===t.matchdepth)},Nt=function(t,e,a){var r=a>>>0,n=e.length,u=t.length+1-n;t:for(;r<u;r++){for(var l=0;l<n;l++)if(t[r+l]!==e[l])continue t;return r}return-1},St=function(t,e){var a=o.luaL_checkstring(t,1),r=o.luaL_checkstring(t,2),n=a.length,u=r.length,l=h(o.luaL_optinteger(t,3,1),n);if(l<1)l=1;else if(l>n+1)return s.lua_pushnil(t),1;if(e&&(s.lua_toboolean(t,4)||mt(r,u))){var i=Nt(a.slice(l-1),r,0);if(i>-1)return s.lua_pushinteger(t,l+i),s.lua_pushinteger(t,l+i+u-1),2}else{var c=new st(t),_=l-1,f=r[0]==="^".charCodeAt(0);f&&(r=r.slice(1),u--),Ut(c,t,a,n,r,u);do{var p=void 0;if(Et(c),null!==(p=bt(c,_,0)))return e?(s.lua_pushinteger(t,_+1),s.lua_pushinteger(t,p),Ot(c,null,0)+2):Ot(c,_,p)}while(_++<c.src_end&&!f)}return s.lua_pushnil(t),1},Rt=function(t){return St(t,1)},yt=function(t){return St(t,0)},It=function t(){r(this,t),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new st},Mt=function(t){var e=s.lua_touserdata(t,s.lua_upvalueindex(3));e.ms.L=t;for(var a=e.src;a<=e.ms.src_end;a++){Et(e.ms);var r=void 0;if(null!==(r=bt(e.ms,a,e.p))&&r!==e.lastmatch)return e.src=e.lastmatch=r,Ot(e.ms,a,r)}return 0},Ct=function(t){var e=o.luaL_checkstring(t,1),a=o.luaL_checkstring(t,2),r=e.length,n=a.length;s.lua_settop(t,2);var u=new It;return s.lua_pushlightuserdata(t,u),Ut(u.ms,t,e,r,a,n),u.src=0,u.p=0,u.lastmatch=null,s.lua_pushcclosure(t,Mt,3),1},wt=function(t,e,a,r){for(var n=t.L,u=s.lua_tostring(n,3),l=u.length,i=0;i<l;i++)u[i]!==f?o.luaL_addchar(e,u[i]):(i++,U(u[i])?u[i]==="0".charCodeAt(0)?o.luaL_addlstring(e,t.src.slice(a),r-a):(xt(t,u[i]-"1".charCodeAt(0),a,r),o.luaL_tolstring(n,-1),s.lua_remove(n,-2),o.luaL_addvalue(e)):(u[i]!==f&&o.luaL_error(n,s.to_luastring("invalid use of '%c' in replacement string"),f),o.luaL_addchar(e,u[i])))},Pt=function(t,e,a,r,n){var u=t.L;switch(n){case s.LUA_TFUNCTION:s.lua_pushvalue(u,3);var l=Ot(t,a,r);s.lua_call(u,l,1);break;case s.LUA_TTABLE:xt(t,0,a,r),s.lua_gettable(u,3);break;default:return void wt(t,e,a,r)}s.lua_toboolean(u,-1)?s.lua_isstring(u,-1)||o.luaL_error(u,s.to_luastring("invalid replacement value (a %s)"),o.luaL_typename(u,-1)):(s.lua_pop(u,1),s.lua_pushlstring(u,t.src.slice(a,r),r-a)),o.luaL_addvalue(e)},Dt=function(t){var e=o.luaL_checkstring(t,1),a=e.length,r=o.luaL_checkstring(t,2),n=r.length,u=null,l=s.lua_type(t,3),i=o.luaL_optinteger(t,4,a+1),c=r[0]==="^".charCodeAt(0),_=0,f=new st(t),p=new o.luaL_Buffer;for(o.luaL_argcheck(t,l===s.LUA_TNUMBER||l===s.LUA_TSTRING||l===s.LUA_TFUNCTION||l===s.LUA_TTABLE,3,s.to_luastring("string/function/table expected",!0)),o.luaL_buffinit(t,p),c&&(r=r.slice(1),n--),Ut(f,t,e,a,r,n),e=0,r=0;_<i;){var h=void 0;if(Et(f),null!==(h=bt(f,e,r))&&h!==u)_++,Pt(f,p,e,h,l),e=u=h;else{if(!(e<f.src_end))break;o.luaL_addchar(p,f.src[e++])}if(c)break}return o.luaL_addlstring(p,f.src.slice(e),f.src_end-e),o.luaL_pushresult(p),s.lua_pushinteger(t,_),2},Kt={byte:at,char:L,dump:A,find:Rt,format:V,gmatch:Ct,gsub:Dt,len:g,lower:$,match:yt,pack:W,packsize:rt,rep:et,reverse:Q,sub:v,unpack:lt,upper:tt},Bt=function(t){s.lua_createtable(t,0,1),s.lua_pushliteral(t,""),s.lua_pushvalue(t,-2),s.lua_setmetatable(t,-2),s.lua_pop(t,1),s.lua_pushvalue(t,-2),s.lua_setfield(t,-2,s.to_luastring("__index",!0)),s.lua_pop(t,1)},Gt=function(t){return o.luaL_newlib(t,Kt),Bt(t),1};t.exports.luaopen_string=Gt},function(t,e,a){"use strict";var r=a(0),n=a(2),u=a(5),l=a(4),o=function(t,e,a){return n.lua_pushstring(t,e),n.lua_rawget(t,-a)!==n.LUA_TNIL},s=function(t,e,a){if(n.lua_type(t,e)!==n.LUA_TTABLE){var r=1;!n.lua_getmetatable(t,e)||1&a&&!o(t,n.to_luastring("__index",!0),++r)||2&a&&!o(t,n.to_luastring("__newindex",!0),++r)||4&a&&!o(t,n.to_luastring("__len",!0),++r)?u.luaL_checktype(t,e,n.LUA_TTABLE):n.lua_pop(t,r)}},i=function(t,e,a){return s(t,e,4|a),u.luaL_len(t,e)},c=function(t,e,a){n.lua_geti(t,1,a),n.lua_isstring(t,-1)||u.luaL_error(t,n.to_luastring("invalid value (%s) at index %d in table for 'concat'"),u.luaL_typename(t,-1),a),u.luaL_addvalue(e)},_=function(t){var e=i(t,1,3)+1,a=void 0;switch(n.lua_gettop(t)){case 2:a=e;break;case 3:a=u.luaL_checkinteger(t,2),u.luaL_argcheck(t,1<=a&&a<=e,2,n.to_luastring("position out of bounds",!0));for(var r=e;r>a;r--)n.lua_geti(t,1,r-1),n.lua_seti(t,1,r);break;default:return u.luaL_error(t,n.to_luastring("wrong number of arguments to 'insert'",!0))}return n.lua_seti(t,1,a),0},f=function(t){var e=i(t,1,3),a=u.luaL_optinteger(t,2,e);for(a!==e&&u.luaL_argcheck(t,1<=a&&a<=e+1,1,n.to_luastring("position out of bounds",!0)),n.lua_geti(t,1,a);a<e;a++)n.lua_geti(t,1,a+1),n.lua_seti(t,1,a);return n.lua_pushnil(t),n.lua_seti(t,1,a),1},p=function(t){var e=u.luaL_checkinteger(t,2),a=u.luaL_checkinteger(t,3),r=u.luaL_checkinteger(t,4),o=n.lua_isnoneornil(t,5)?1:5;if(s(t,1,1),s(t,o,2),a>=e){u.luaL_argcheck(t,e>0||a<l.LUA_MAXINTEGER+e,3,n.to_luastring("too many elements to move",!0));var i=a-e+1;if(u.luaL_argcheck(t,r<=l.LUA_MAXINTEGER-i+1,4,n.to_luastring("destination wrap around",!0)),r>a||r<=e||1!==o&&1!==n.lua_compare(t,1,o,n.LUA_OPEQ))for(var c=0;c<i;c++)n.lua_geti(t,1,e+c),n.lua_seti(t,o,r+c);else for(var _=i-1;_>=0;_--)n.lua_geti(t,1,e+_),n.lua_seti(t,o,r+_)}return n.lua_pushvalue(t,o),1},h=function(t){var e=i(t,1,1),a=u.luaL_optlstring(t,2,[]),r=u.luaL_optinteger(t,3,1);e=u.luaL_optinteger(t,4,e);var n=new u.luaL_Buffer;for(u.luaL_buffinit(t,n);r<e;r++)c(t,n,r),u.luaL_addlstring(n,a);return r===e&&c(t,n,r),u.luaL_pushresult(n),1},v=function(t){var e=n.lua_gettop(t);n.lua_createtable(t,e,1),n.lua_insert(t,1);for(var a=e;a>=1;a--)n.lua_seti(t,1,a);return n.lua_pushinteger(t,e),n.lua_setfield(t,1,["n".charCodeAt(0)]),1},g=function(t){var e=u.luaL_optinteger(t,2,1),a=u.luaL_opt(t,u.luaL_checkinteger,3,u.luaL_len(t,1));if(e>a)return 0;var r=a-e;if(r>=l.MAX_INT||!n.lua_checkstack(t,++r))return u.luaL_error(t,n.to_luastring("too many results to unpack",!0));for(;e<a;e++)n.lua_geti(t,1,e);return n.lua_geti(t,1,a),r},L=function(){return Math.floor(1*Math.random()<<32)},d=function(t,e,a){n.lua_seti(t,1,e),n.lua_seti(t,1,a)},A=function(t,e,a){if(n.lua_isnil(t,2))return n.lua_compare(t,e,a,n.LUA_OPLT);n.lua_pushvalue(t,2),n.lua_pushvalue(t,e-1),n.lua_pushvalue(t,a-2),n.lua_call(t,2,1);var r=n.lua_toboolean(t,-1);return n.lua_pop(t,1),r},T=function(t,e,a){for(var r=e,l=a-1;;){for(;n.lua_geti(t,1,++r),A(t,-1,-2);)r==a-1&&u.luaL_error(t,n.to_luastring("invalid order function for sorting")),n.lua_pop(t,1);for(;n.lua_geti(t,1,--l),A(t,-3,-1);)l<r&&u.luaL_error(t,n.to_luastring("invalid order function for sorting")),n.lua_pop(t,1);if(l<r)return n.lua_pop(t,1),d(t,a-1,r),r;d(t,r,l)}},k=function(t,e,a){var n=Math.floor((e-t)/4),u=a%(2*n)+(t+n);return r(t+n<=u&&u<=e-n),u},b=function t(e,a,r,u){for(;a<r;){if(n.lua_geti(e,1,a),n.lua_geti(e,1,r),A(e,-1,-2)?d(e,a,r):n.lua_pop(e,2),r-a==1)return;var l=void 0;if(l=r-a<100||0===u?Math.floor((a+r)/2):k(a,r,u),n.lua_geti(e,1,l),n.lua_geti(e,1,a),A(e,-2,-1)?d(e,l,a):(n.lua_pop(e,1),n.lua_geti(e,1,r),A(e,-1,-2)?d(e,l,r):n.lua_pop(e,2)),r-a==2)return;n.lua_geti(e,1,l),n.lua_pushvalue(e,-1),n.lua_geti(e,1,r-1),d(e,l,r-1),l=T(e,a,r);var o=void 0;l-a<r-l?(t(e,a,l-1,u),o=l-a,a=l+1):(t(e,l+1,r,u),o=r-l,r=l-1),(r-a)/128>o&&(u=L())}},x=function(t){var e=i(t,1,3);return e>1&&(u.luaL_argcheck(t,e<l.MAX_INT,1,n.to_luastring("array too big",!0)),n.lua_isnoneornil(t,2)||u.luaL_checktype(t,2,n.LUA_TFUNCTION),n.lua_settop(t,2),b(t,1,e,0)),0},O={concat:h,insert:_,move:p,pack:v,remove:f,sort:x,unpack:g},m=function(t){return u.luaL_newlib(t,O),1};t.exports.luaopen_table=m},function(t,e,a){"use strict";var r=a(2),n=a(5),u=a(4),l=function(t){return 128==(192&t)},o=function(t,e){return t>=0?t:0-t>e?0:e+t+1},s=[255,127,2047,65535],i=function(t,e){var a=t[e],r=0;if(a<128)r=a;else{for(var n=0;64&a;){var u=t[e+ ++n];if(128!=(192&u))return null;r=r<<6|63&u,a<<=1}if(r|=(127&a)<<5*n,n>3||r>1114111||r<=s[n])return null;e+=n}return{code:r,pos:e+1}},c=function(t){var e=0,a=n.luaL_checkstring(t,1),u=a.length,l=o(n.luaL_optinteger(t,2,1),u),s=o(n.luaL_optinteger(t,3,-1),u);for(n.luaL_argcheck(t,1<=l&&--l<=u,2,r.to_luastring("initial position out of string")),n.luaL_argcheck(t,--s<u,3,r.to_luastring("final position out of string"));l<=s;){var c=i(a,l);if(null===c)return r.lua_pushnil(t),r.lua_pushinteger(t,l+1),2;l=c.pos,e++}return r.lua_pushinteger(t,e),1},_=function(t,e){var a=n.luaL_checkinteger(t,e);n.luaL_argcheck(t,0<=a&&a<=1114111,e,r.to_luastring("value out of range",!0)),r.lua_pushstring(t,r.to_luastring(String.fromCodePoint(a)))},f=function(t){var e=r.lua_gettop(t);if(1===e)_(t,1);else{var a=new n.luaL_Buffer;n.luaL_buffinit(t,a);for(var u=1;u<=e;u++)_(t,u),n.luaL_addvalue(a);n.luaL_pushresult(a)}return 1},p=function(t){var e=n.luaL_checkstring(t,1),a=n.luaL_checkinteger(t,2),u=a>=0?1:e.length+1;if(u=o(n.luaL_optinteger(t,3,u),e.length),n.luaL_argcheck(t,1<=u&&--u<=e.length,3,r.to_luastring("position out of range",!0)),0===a)for(;u>0&&l(e[u]);)u--;else if(l(e[u])&&n.luaL_error(t,r.to_luastring("initial position is a continuation byte",!0)),a<0)for(;a<0&&u>0;){do{u--}while(u>0&&l(e[u]));a++}else for(a--;a>0&&u<e.length;){do{u++}while(l(e[u]));a--}return 0===a?r.lua_pushinteger(t,u+1):r.lua_pushnil(t),1},h=function(t){var e=n.luaL_checkstring(t,1),a=o(n.luaL_optinteger(t,2,1),e.length),l=o(n.luaL_optinteger(t,3,a),e.length);if(n.luaL_argcheck(t,a>=1,2,r.to_luastring("out of range",!0)),n.luaL_argcheck(t,l<=e.length,3,r.to_luastring("out of range",!0)),a>l)return 0;if(l-a>=u.MAX_INT)return n.luaL_error(t,r.to_luastring("string slice too long",!0));var s=l-a+1;for(n.luaL_checkstack(t,s,r.to_luastring("string slice too long",!0)),s=0,a-=1;a<l;){var c=i(e,a);if(null===c)return n.luaL_error(t,r.to_luastring("invalid UTF-8 code",!0));r.lua_pushinteger(t,c.code),a=c.pos,s++}return s},v=function(t){var e=n.luaL_checkstring(t,1),a=e.length,u=r.lua_tointeger(t,2)-1;if(u<0)u=0;else if(u<a)for(u++;l(e[u]);)u++;if(u>=a)return 0;var o=i(e,u);return null===o||l(e[o.pos])?n.luaL_error(t,r.to_luastring("invalid UTF-8 code",!0)):(r.lua_pushinteger(t,u+1),r.lua_pushinteger(t,o.code),2)},g=function(t){return n.luaL_checkstring(t,1),r.lua_pushcfunction(t,v),r.lua_pushvalue(t,1),r.lua_pushinteger(t,0),3},L={char:f,codepoint:h,codes:g,len:c,offset:p},d=[91,0,45,127,194,45,244,93,91,128,45,191,93,42],A=function(t){return n.luaL_newlib(t,L),r.lua_pushstring(t,d),r.lua_setfield(t,-2,r.to_luastring("charpattern",!0)),1};t.exports.luaopen_utf8=A},function(t,e,a){"use strict";var r=a(0),n=a(2),u=a(5),l=function(t,e,a){t===e||n.lua_checkstack(e,a)||u.luaL_error(t,n.to_luastring("stack overflow",!0))},o=function(t){return n.lua_pushvalue(t,n.LUA_REGISTRYINDEX),1},s=function(t){return u.luaL_checkany(t,1),n.lua_getmetatable(t,1)||n.lua_pushnil(t),1},i=function(t){var e=n.lua_type(t,2);return u.luaL_argcheck(t,e==n.LUA_TNIL||e==n.LUA_TTABLE,2,n.to_luastring("nil or table expected",!0)),n.lua_settop(t,2),n.lua_setmetatable(t,1),1},c=function(t){return n.lua_type(t,1)!==n.LUA_TUSERDATA?n.lua_pushnil(t):n.lua_getuservalue(t,1),1},_=function(t){return u.luaL_checktype(t,1,n.LUA_TUSERDATA),u.luaL_checkany(t,2),n.lua_settop(t,2),n.lua_setuservalue(t,1),1},f=function(t){return n.lua_isthread(t,1)?{arg:1,thread:n.lua_tothread(t,1)}:{arg:0,thread:t}},p=function(t,e,a){n.lua_pushstring(t,a),n.lua_setfield(t,-2,e)},h=function(t,e,a){n.lua_pushinteger(t,a),n.lua_setfield(t,-2,e)},v=function(t,e,a){n.lua_pushboolean(t,a),n.lua_setfield(t,-2,e)},g=function(t,e,a){t==e?n.lua_rotate(t,-2,1):n.lua_xmove(e,t,1),n.lua_setfield(t,-2,a)},L=function(t){var e=new n.lua_Debug,a=f(t),r=a.arg,o=a.thread,s=u.luaL_optstring(t,r+2,n.to_luastring("flnStu",!0));if(l(t,o,3),n.lua_isfunction(t,r+1))s=n.lua_pushfstring(t,n.to_luastring(">%s"),s),n.lua_pushvalue(t,r+1),n.lua_xmove(t,o,1);else if(!n.lua_getstack(o,u.luaL_checkinteger(t,r+1),e))return n.lua_pushnil(t),1;return n.lua_getinfo(o,s,e)||u.luaL_argerror(t,r+2,n.to_luastring("invalid option",!0)),n.lua_newtable(t),s.indexOf("S".charCodeAt(0))>-1&&(p(t,n.to_luastring("source",!0),e.source),p(t,n.to_luastring("short_src",!0),e.short_src),h(t,n.to_luastring("linedefined",!0),e.linedefined),h(t,n.to_luastring("lastlinedefined",!0),e.lastlinedefined),p(t,n.to_luastring("what",!0),e.what)),s.indexOf("l".charCodeAt(0))>-1&&h(t,n.to_luastring("currentline",!0),e.currentline),s.indexOf("u".charCodeAt(0))>-1&&(h(t,n.to_luastring("nups",!0),e.nups),h(t,n.to_luastring("nparams",!0),e.nparams),v(t,n.to_luastring("isvararg",!0),e.isvararg)),s.indexOf("n".charCodeAt(0))>-1&&(p(t,n.to_luastring("name",!0),e.name),p(t,n.to_luastring("namewhat",!0),e.namewhat)),s.indexOf("t".charCodeAt(0))>-1&&v(t,n.to_luastring("istailcall",!0),e.istailcall),s.indexOf("L".charCodeAt(0))>-1&&g(t,o,n.to_luastring("activelines",!0)),s.indexOf("f".charCodeAt(0))>-1&&g(t,o,n.to_luastring("func",!0)),1},d=function(t){var e=f(t),a=e.thread,r=e.arg,o=new n.lua_Debug,s=u.luaL_checkinteger(t,r+2);if(n.lua_isfunction(t,r+1))return n.lua_pushvalue(t,r+1),n.lua_pushstring(t,n.lua_getlocal(t,null,s)),1;var i=u.luaL_checkinteger(t,r+1);if(!n.lua_getstack(a,i,o))return u.luaL_argerror(t,r+1,n.to_luastring("level out of range",!0));l(t,a,1);var c=n.lua_getlocal(a,o,s);return c?(n.lua_xmove(a,t,1),n.lua_pushstring(t,c),n.lua_rotate(t,-2,1),2):(n.lua_pushnil(t),1)},A=function(t){var e=f(t),a=e.thread,r=e.arg,o=new n.lua_Debug,s=u.luaL_checkinteger(t,r+1),i=u.luaL_checkinteger(t,r+2);if(!n.lua_getstack(a,s,o))return u.luaL_argerror(t,r+1,"level out of range");u.luaL_checkany(t,r+3),n.lua_settop(t,r+3),l(t,a,1),n.lua_xmove(t,a,1);var c=n.lua_setlocal(a,o,i);return null===c&&n.lua_pop(a,1),n.lua_pushstring(t,c),1},T=function(t,e){var a=u.luaL_checkinteger(t,2);u.luaL_checktype(t,1,n.LUA_TFUNCTION);var r=e?n.lua_getupvalue(t,1,a):n.lua_setupvalue(t,1,a);return null===r?0:(n.lua_pushstring(t,r),n.lua_insert(t,-(e+1)),e+1)},k=function(t){return T(t,1)},b=function(t){return u.luaL_checkany(t,3),T(t,0)},x=function(t,e,a){var r=u.luaL_checkinteger(t,a);return u.luaL_checktype(t,e,n.LUA_TFUNCTION),u.luaL_argcheck(t,null!==n.lua_getupvalue(t,e,r),a,n.to_luastring("invalid upvalue index",!0)),r},O=function(t){var e=x(t,1,2);return n.lua_pushlightuserdata(t,n.lua_upvalueid(t,1,e)),1},m=function(t){var e=x(t,1,2),a=x(t,3,4);return u.luaL_argcheck(t,!n.lua_iscfunction(t,1),1,n.to_luastring("Lua function expected",!0)),u.luaL_argcheck(t,!n.lua_iscfunction(t,3),3,n.to_luastring("Lua function expected",!0)),n.lua_upvaluejoin(t,1,e,3,a),0},U=n.to_luastring("__hooks__",!0),E=["call","return","line","count","tail call"].map(function(t){return n.to_luastring(t)}),N=function(t,e){n.lua_rawgetp(t,n.LUA_REGISTRYINDEX,U),n.lua_pushthread(t),n.lua_rawget(t,-2)===n.LUA_TFUNCTION&&(n.lua_pushstring(t,E[e.event]),e.currentline>=0?n.lua_pushinteger(t,e.currentline):n.lua_pushnil(t),r(n.lua_getinfo(t,["l".charCodeAt(0),"S".charCodeAt(0)],e)),n.lua_call(t,2,0))},S=function(t,e){var a=0;return t.indexOf("c".charCodeAt(0))>-1&&(a|=n.LUA_MASKCALL),t.indexOf("r".charCodeAt(0))>-1&&(a|=n.LUA_MASKRET),t.indexOf("l".charCodeAt(0))>-1&&(a|=n.LUA_MASKLINE),e>0&&(a|=n.LUA_MASKCOUNT),a},R=function(t,e){var a=0;return t&n.LUA_MASKCALL&&(e[a++]="c".charCodeAt(0)),t&n.LUA_MASKRET&&(e[a++]="r".charCodeAt(0)),t&n.LUA_MASKLINE&&(e[a++]="l".charCodeAt(0)),e},y=function(t){var e=void 0,a=void 0,r=void 0,o=f(t),s=o.thread,i=o.arg;if(n.lua_isnoneornil(t,i+1))n.lua_settop(t,i+1),r=null,e=0,a=0;else{var c=u.luaL_checkstring(t,i+2);u.luaL_checktype(t,i+1,n.LUA_TFUNCTION),a=u.luaL_optinteger(t,i+3,0),r=N,e=S(c,a)}return n.lua_rawgetp(t,n.LUA_REGISTRYINDEX,U)===n.LUA_TNIL&&(n.lua_createtable(t,0,2),n.lua_pushvalue(t,-1),n.lua_rawsetp(t,n.LUA_REGISTRYINDEX,U),n.lua_pushstring(t,["k".charCodeAt(0)]),n.lua_setfield(t,-2,n.to_luastring("__mode",!0)),n.lua_pushvalue(t,-1),n.lua_setmetatable(t,-2)),l(t,s,1),n.lua_pushthread(s),n.lua_xmove(s,t,1),n.lua_pushvalue(t,i+1),n.lua_rawset(t,-3),n.lua_sethook(s,r,e,a),0},I=function(t){var e=f(t),a=e.thread,r=[],u=n.lua_gethookmask(a),o=n.lua_gethook(a);return null===o?n.lua_pushnil(t):o!==N?n.lua_pushliteral(t,"external hook"):(n.lua_rawgetp(t,n.LUA_REGISTRYINDEX,U),l(t,a,1),n.lua_pushthread(a),n.lua_xmove(a,t,1),n.lua_rawget(t,-2),n.lua_remove(t,-2)),n.lua_pushstring(t,R(u,r)),n.lua_pushinteger(t,n.lua_gethookcount(a)),3},M=function(t){var e=f(t),a=e.thread,r=e.arg,l=n.lua_tostring(t,r+1);if(null!==l||n.lua_isnoneornil(t,r+1)){var o=u.luaL_optinteger(t,r+2,t===a?1:0);u.luaL_traceback(t,a,l,o)}else n.lua_pushvalue(t,r+1);return 1},C={gethook:I,getinfo:L,getlocal:d,getmetatable:s,getregistry:o,getupvalue:k,getuservalue:c,sethook:y,setlocal:A,setmetatable:i,setupvalue:b,setuservalue:_,traceback:M,upvalueid:O,upvaluejoin:m},w=function(t){return u.luaL_newlib(t,C),1};t.exports.luaopen_debug=w},function(t,e,a){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var n=a(2),u=a(5),l=a(4),o=a(41),s=n.to_luastring("aAbBcdHIjmMpSUwWxXyYZ%",!0),i=(n.to_luastring("aAbBcCdDeFgGhHIjmMnprRStTuUVwWxXyYzZ%||EcECExEXEyEYOdOeOHOIOmOMOSOuOUOVOwOWOy",!0),n.to_luastring("aAbBcdHIjmMpSUwWxXyYzZ%||#c#x#d#H#I#j#m#M#S#U#w#W#y#Y",!0),s),c=function(t,e,a){n.lua_pushinteger(t,a),n.lua_setfield(t,-2,n.to_luastring(e,!0))},_=function(t,e,a){c(t,"sec",a?e.getUTCSeconds():e.getSeconds()),c(t,"min",a?e.getUTCMinutes():e.getMinutes()),c(t,"hour",a?e.getUTCHours():e.getHours()),c(t,"day",a?e.getUTCDate():e.getDate()),c(t,"month",a?e.getUTCMonth():e.getMonth()),c(t,"year",a?e.getUTCFullYear():e.getFullYear()),c(t,"wday",a?e.getUTCDay():e.getDay());var r=new Date;c(t,"yday",Math.floor((r-new Date(r.getFullYear(),0,0))/864e5))},f=l.MAX_INT/2,p=function(t,e,a,r){var l=n.lua_getfield(t,-1,n.to_luastring(e,!0)),o=n.lua_tointegerx(t,-1);if(!1===o){if(l!==n.LUA_TNIL)return u.luaL_error(t,n.to_luastring("field '%s' is not an integer"),e);if(a<0)return u.luaL_error(t,n.to_luastring("field '%s' missing in date table"),e);o=a}else{if(!(-f<=o&&o<=f))return u.luaL_error(t,n.to_luastring("field '%s' is out-of-bound"),e);o-=r}return n.lua_pop(t,1),o},h=function(t,e,a){for(var l=i,o=1;l.length>0&&o<=e.length;l=l.slice(o))if(l[0]==="|".charCodeAt(0))o++;else if(n.to_jsstring(e.slice(0,o))===n.to_jsstring(l.slice(0,o)))return a.push.apply(a,r(e.slice(0,o))),e.slice(o);u.luaL_argerror(t,1,n.lua_pushliteral(t,"invalid conversion specifier '%"+e+"'",e))},v=function(t){var e=u.luaL_optlstring(t,1,"%c"),a=1e3*u.luaL_opt(t,L,2,(new Date).getTime()/1e3),l=new Date(a),s=!1;if(e[0]==="!".charCodeAt(0)&&(s=!0,e=e.slice(1)),null===l&&u.luaL_error(t,n.to_luastring("time result cannot be represented in this installation",!0)),"*t"===n.to_jsstring(e))n.lua_createtable(t,0,9),_(t,l,s);else{for(var i=void 0,c=[];e.length>0;)i=["%".charCodeAt(0)],e[0]!=="%".charCodeAt(0)?(c.push(e[0]),e=e.slice(1)):(e=e.slice(1),e=h(t,e,i),c.push.apply(c,r(n.to_luastring(o(n.to_jsstring(i),l)))));n.lua_pushstring(t,c)}return 1},g=function(t){var e=new Date;return n.lua_isnoneornil(t,1)||(u.luaL_checktype(t,1,n.LUA_TTABLE),n.lua_settop(t,1),e.setSeconds(p(t,"sec",0,0)),e.setMinutes(p(t,"min",0,0)),e.setHours(p(t,"hour",12,0)),e.setDate(p(t,"day",-1,0)),e.setMonth(p(t,"month",-1,1)),e.setFullYear(p(t,"year",-1,0)),_(t,e)),n.lua_pushinteger(t,Math.floor(e/1e3)),1},L=function(t,e){return u.luaL_checkinteger(t,e)},d=function(t){var e=L(t,1),a=L(t,2);return n.lua_pushnumber(t,new Date(e)-new Date(a)),1},A={date:v,difftime:d,time:g},T=function(t){return u.luaL_newlib(t,A),1};t.exports.luaopen_os=T},function(module,exports,__webpack_require__){"use strict";var lua=__webpack_require__(2),lauxlib=__webpack_require__(5),LUA_IGMARK=["-".charCodeAt(0)],CLIBS=lua.to_luastring("__CLIBS__",!0),LUA_PATH_VAR="LUA_PATH",LUA_CPATH_VAR="LUA_CPATH",LUA_CSUBSEP=lua.LUA_DIRSEP,LUA_LSUBSEP=lua.LUA_DIRSEP,LUA_POF=lua.to_luastring("luaopen_"),LUA_OFSEP=lua.to_luastring("_"),LIB_FAIL="open",AUXMARK=[1],lsys_load=void 0,pathlib;lsys_load=function lsys_load(L,path){var xhr=new XMLHttpRequest;return xhr.open("GET",lua.to_jsstring(path),!1),xhr.send(),xhr.status>=200&&xhr.status<=299?eval(xhr.response):(lua.lua_pushstring(L,lua.to_luastring(xhr.status+": "+xhr.statusText)),null)};var lsys_sym=function(t,e,a){var r=e[lua.to_jsstring(a)];return r&&"function"==typeof r?r:(lua.lua_pushfstring(t,lua.to_luastring("undefined symbol: %s"),a),null)},noenv=function(t){lua.lua_getfield(t,lua.LUA_REGISTRYINDEX,lua.to_luastring("LUA_NOENV"));var e=lua.lua_toboolean(t,-1);return lua.lua_pop(t,1),e},readable=void 0,fs;readable=function(t){var e=new XMLHttpRequest;return e.open("GET",lua.to_jsstring(t),!1),e.send(),e.status>=200&&e.status<=299};var ERRLIB=1,ERRFUNC=2,lookforfunc=function(t,e,a){var r=checkclib(t,e);if(null===r){if(null===(r=lsys_load(t,e,a[0]==="*".charCodeAt(0))))return ERRLIB;addtoclib(t,e,r)}if(a[0]==="*".charCodeAt(0))return lua.lua_pushboolean(t,1),0;var n=lsys_sym(t,r,a);return null===n?ERRFUNC:(lua.lua_pushcfunction(t,n),0)},ll_loadlib=function(t){var e=lauxlib.luaL_checkstring(t,1),a=lauxlib.luaL_checkstring(t,2),r=lookforfunc(t,e,a);return 0===r?1:(lua.lua_pushnil(t),lua.lua_insert(t,-2),lua.lua_pushliteral(t,r===ERRLIB?LIB_FAIL:"init"),3)},env=void 0;env=window;var setpath=function(t,e,a,r){var n=""+a+lua.LUA_VERSUFFIX;lua.lua_pushstring(t,lua.to_luastring(n));var u=env[n];void 0===u&&(u=env[a]),void 0===u||noenv(t)?lua.lua_pushstring(t,lua.to_luastring(r,!0)):(u=lauxlib.luaL_gsub(t,lua.to_luastring(u),lua.to_luastring(lua.LUA_PATH_SEP+lua.LUA_PATH_SEP,!0),lua.to_luastring(lua.LUA_PATH_SEP,!0).concat(AUXMARK).concat(lua.to_luastring(lua.LUA_PATH_SEP,!0))),lauxlib.luaL_gsub(t,u,AUXMARK,lua.to_luastring(r)),lua.lua_remove(t,-2)),lua.lua_setfield(t,-3,e),lua.lua_pop(t,1)},checkclib=function(t,e){lua.lua_rawgetp(t,lua.LUA_REGISTRYINDEX,CLIBS),lua.lua_getfield(t,-1,e);var a=lua.lua_touserdata(t,-1);return lua.lua_pop(t,2),a},addtoclib=function(t,e,a){lua.lua_rawgetp(t,lua.LUA_REGISTRYINDEX,CLIBS),lua.lua_pushlightuserdata(t,a),lua.lua_pushvalue(t,-1),lua.lua_setfield(t,-3,e),lua.lua_rawseti(t,-2,lauxlib.luaL_len(t,-2)+1),lua.lua_pop(t,1)},pushnexttemplate=function(t,e){for(;e[0]===lua.LUA_PATH_SEP.charCodeAt(0);)e=e.slice(1);if(0===e.length)return null;var a=e.indexOf(lua.LUA_PATH_SEP.charCodeAt(0));return a<0&&(a=e.length),lua.lua_pushlstring(t,e,a),e.slice(a)},searchpath=function(t,e,a,r,n){var u=new lauxlib.luaL_Buffer;for(lauxlib.luaL_buffinit(t,u),0!==r[0]&&(e=lauxlib.luaL_gsub(t,e,r,n));null!==(a=pushnexttemplate(t,a));){var l=lauxlib.luaL_gsub(t,lua.lua_tostring(t,-1),lua.to_luastring(lua.LUA_PATH_MARK,!0),e);if(lua.lua_remove(t,-2),readable(l))return l;lua.lua_pushfstring(t,lua.to_luastring("\n\tno file '%s'"),l),lua.lua_remove(t,-2),lauxlib.luaL_addvalue(u)}return lauxlib.luaL_pushresult(u),null},ll_searchpath=function(t){return null!==searchpath(t,lauxlib.luaL_checkstring(t,1),lauxlib.luaL_checkstring(t,2),lauxlib.luaL_optstring(t,3,[".".charCodeAt(0)]),lauxlib.luaL_optstring(t,4,[lua.LUA_DIRSEP.charCodeAt(0)]))?1:(lua.lua_pushnil(t),lua.lua_insert(t,-2),2)},findfile=function(t,e,a,r){lua.lua_getfield(t,lua.lua_upvalueindex(1),a);var n=lua.lua_tostring(t,-1);return null===n&&lauxlib.luaL_error(t,lua.to_luastring("'package.%s' must be a string"),a),searchpath(t,e,n,[".".charCodeAt(0)],r)},checkload=function(t,e,a){return e?(lua.lua_pushstring(t,a),2):lauxlib.luaL_error(t,lua.to_luastring("error loading module '%s' from file '%s':\n\t%s"),lua.lua_tostring(t,1),a,lua.lua_tostring(t,-1))},searcher_Lua=function(t){var e=lauxlib.luaL_checkstring(t,1),a=findfile(t,e,lua.to_luastring("path",!0),lua.to_luastring(LUA_LSUBSEP,!0));return null===a?1:checkload(t,lauxlib.luaL_loadfile(t,a)===lua.LUA_OK,a)},loadfunc=function(t,e,a){var r=void 0;a=lauxlib.luaL_gsub(t,a,[".".charCodeAt(0)],LUA_OFSEP);var n=a.indexOf(LUA_IGMARK[0]);if(n>=0){r=lua.lua_pushlstring(t,a,n),r=lua.lua_pushfstring(t,lua.to_luastring("%s%s"),LUA_POF,r);var u=lookforfunc(t,e,r);if(u!==ERRFUNC)return u;a=n+1}return r=lua.lua_pushfstring(t,lua.to_luastring("%s%s"),LUA_POF,a),lookforfunc(t,e,r)},searcher_C=function(t){var e=lauxlib.luaL_checkstring(t,1),a=findfile(t,e,lua.to_luastring("cpath",!0),lua.to_luastring(LUA_CSUBSEP,!0));return null===a?1:checkload(t,0===loadfunc(t,a,e),a)},searcher_Croot=function(t){var e=lauxlib.luaL_checkstring(t,1),a=e.indexOf(".".charCodeAt(0)),r=void 0;if(a<0)return 0;lua.lua_pushlstring(t,e,a);var n=findfile(t,lua.lua_tostring(t,-1),lua.to_luastring("cpath",!0),lua.to_luastring(LUA_CSUBSEP,!0));return null===n?1:0!==(r=loadfunc(t,n,e))?r!=ERRFUNC?checkload(t,0,n):(lua.lua_pushstring(t,lua.to_luastring("\n\tno module '"+lua.to_jsstring(e)+"' in file '"+lua.to_jsstring(n)+"'")),1):(lua.lua_pushstring(t,n),2)},searcher_preload=function(t){var e=lauxlib.luaL_checkstring(t,1);return lua.lua_getfield(t,lua.LUA_REGISTRYINDEX,lua.to_luastring(lauxlib.LUA_PRELOAD_TABLE,!0)),lua.lua_getfield(t,-1,e)===lua.LUA_TNIL&&lua.lua_pushliteral(t,"\n\tno field package.preload['"+lua.to_jsstring(e)+"']"),1},findloader=function(t,e,a,r){var n=new lauxlib.luaL_Buffer;lauxlib.luaL_buffinit(t,n),lua.lua_getfield(t,lua.lua_upvalueindex(1),lua.to_luastring("searchers",!0))!==lua.LUA_TTABLE&&lauxlib.luaL_error(t,lua.to_luastring("'package.searchers' must be a table"));var u={name:e,i:1,msg:n,ctx:a,k:r};return findloader_cont(t,lua.LUA_OK,u)},findloader_cont=function t(e,a,r){for(;a===lua.LUA_OK?(lua.lua_rawgeti(e,3,r.i)===lua.LUA_TNIL&&(lua.lua_pop(e,1),lauxlib.luaL_pushresult(r.msg),lauxlib.luaL_error(e,lua.to_luastring("module '%s' not found:%s"),r.name,lua.lua_tostring(e,-1))),lua.lua_pushstring(e,r.name),lua.lua_callk(e,1,2,r,t)):a=lua.LUA_OK,!lua.lua_isfunction(e,-2);r.i++)lua.lua_isstring(e,-2)?(lua.lua_pop(e,1),lauxlib.luaL_addvalue(r.msg)):lua.lua_pop(e,2);return r.k(e,lua.LUA_OK,r.ctx)},ll_require=function(t){var e=lauxlib.luaL_checkstring(t,1);return lua.lua_settop(t,1),lua.lua_getfield(t,lua.LUA_REGISTRYINDEX,lua.to_luastring(lauxlib.LUA_LOADED_TABLE,!0)),lua.lua_getfield(t,2,e),lua.lua_toboolean(t,-1)?1:(lua.lua_pop(t,1),findloader(t,e,e,ll_require_cont))},ll_require_cont=function(t,e,a){var r=a;return lua.lua_pushstring(t,r),lua.lua_insert(t,-2),lua.lua_callk(t,2,1,a,ll_require_cont2),ll_require_cont2(t,lua.LUA_OK,a)},ll_require_cont2=function(t,e,a){var r=a;return lua.lua_isnil(t,-1)||lua.lua_setfield(t,2,r),lua.lua_getfield(t,2,r)==lua.LUA_TNIL&&(lua.lua_pushboolean(t,1),lua.lua_pushvalue(t,-1),lua.lua_setfield(t,2,r)),1},pk_funcs={loadlib:ll_loadlib,searchpath:ll_searchpath},ll_funcs={require:ll_require},createsearcherstable=function(t){var e=[searcher_preload,searcher_Lua,searcher_C,searcher_Croot,null];lua.lua_createtable(t);for(var a=0;e[a];a++)lua.lua_pushvalue(t,-2),lua.lua_pushcclosure(t,e[a],1),lua.lua_rawseti(t,-2,a+1);lua.lua_setfield(t,-2,lua.to_luastring("searchers",!0))},createclibstable=function(t){lua.lua_newtable(t),lua.lua_createtable(t,0,1),lua.lua_setmetatable(t,-2),lua.lua_rawsetp(t,lua.LUA_REGISTRYINDEX,CLIBS)},luaopen_package=function(t){return createclibstable(t),lauxlib.luaL_newlib(t,pk_funcs),createsearcherstable(t),setpath(t,lua.to_luastring("path",!0),LUA_PATH_VAR,lua.LUA_PATH_DEFAULT),setpath(t,lua.to_luastring("cpath",!0),LUA_CPATH_VAR,lua.LUA_CPATH_DEFAULT),lua.lua_pushliteral(t,lua.LUA_DIRSEP+"\n"+lua.LUA_PATH_SEP+"\n"+lua.LUA_PATH_MARK+"\n"+lua.LUA_EXEC_DIR+"\n"+LUA_IGMARK+"\n"),lua.lua_setfield(t,-2,lua.to_luastring("config",!0)),lauxlib.luaL_getsubtable(t,lua.LUA_REGISTRYINDEX,lua.to_luastring(lauxlib.LUA_LOADED_TABLE,!0)),lua.lua_setfield(t,-2,lua.to_luastring("loaded",!0)),lauxlib.luaL_getsubtable(t,lua.LUA_REGISTRYINDEX,lua.to_luastring(lauxlib.LUA_PRELOAD_TABLE,!0)),lua.lua_setfield(t,-2,lua.to_luastring("preload",!0)),lua.lua_pushglobaltable(t),lua.lua_pushvalue(t,-2),lauxlib.luaL_setfuncs(t,ll_funcs,1),lua.lua_pop(t,1),1};module.exports.luaopen_package=luaopen_package},function(t,e,a){"use strict";var r=a(18),n=r.lua,u=r.lauxlib,l=r.lualib,o=a(42),s=u.luaL_newstate();l.luaL_openlibs(s),u.luaL_requiref(s,n.to_luastring("js"),o.luaopen_js,1),n.lua_pop(s,1),n.lua_pushstring(s,n.to_luastring(n.FENGARI_COPYRIGHT)),n.lua_setglobal(s,n.to_luastring("_COPYRIGHT"));var i=function(t,e){var a=u.luaL_loadbuffer(s,t,null,e);if(a===n.LUA_OK&&(a=n.lua_pcall(s,0,0,0)),a!==n.LUA_OK){var r=u.luaL_tolstring(s,-1);n.lua_pop(s,1),console.error(n.to_jsstring(r))}},c=function(t){switch(t){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},_=function(t){if(t.src){var e="@"+t.src;if("complete"===document.readyState||t.async)fetch(t.src,{method:"GET",credentials:c(t.crossorigin),redirect:"follow",integrity:t.integrity}).then(function(t){t.ok&&t.arrayBuffer().then(function(t){var a=Array.from(new Uint8Array(t));i(a,n.to_luastring(e))})});else{var a=new XMLHttpRequest;a.open("GET",t.src,!1),a.send();var r=a.response;i(n.to_luastring(r),n.to_luastring(e))}}else{var u=t.innerHTML,l=t.id?"="+t.id:u;i(n.to_luastring(u),n.to_luastring(l))}};new MutationObserver(function(t,e){for(var a=0;a<t.length;a++)for(var r=0;r<t[a].addedNodes.length;r++){var n=t[a].addedNodes[r];"SCRIPT"==n.tagName&&"text/lua"==n.type&&_(n)}}).observe(document,{childList:!0,subtree:!0}),Array.prototype.forEach.call(document.querySelectorAll('script[type="text/lua"]'),_)},function(t,e,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return t&&"object"===(void 0===t?"undefined":r(t))&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,a){"use strict";"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var a=function(){};a.prototype=e.prototype,t.prototype=new a,t.prototype.constructor=t}},function(t,e,a){"use strict";var r=a(0),n=a(1),u=a(23),l=a(3),o=a(15),s=a(22),i=a(7),c=a(14),_=n.CT,f=o.OpCodesI,p=l.TValue,h={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},v={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},g=function(t){return t.t!==t.f},L=function(t,e){var a=s.expkind;if(g(t))return!1;switch(t.k){case a.VKINT:return!e||new p(_.LUA_TNUMINT,t.u.ival);case a.VKFLT:return!e||new p(_.LUA_TNUMFLT,t.u.nval);default:return!1}},d=function(t,e,a){var r=void 0,n=e+a-1;if(t.pc>t.lasttarget&&(r=t.f.code[t.pc-1],r.opcode===f.OP_LOADNIL)){var u=r.A,l=u+r.B;if(u<=e&&e<=l+1||e<=u&&u<=n+1)return u<e&&(e=u),l>n&&(n=l),o.SETARG_A(r,e),void o.SETARG_B(r,n-e)}K(t,f.OP_LOADNIL,e,a-1,0)},A=function(t,e){return t.f.code[e.u.info]},T=function(t,e){var a=t.f.code[e].sBx;return-1===a?-1:e+1+a},k=function(t,e,a){var l=t.f.code[e],s=a-(e+1);r(-1!==a),Math.abs(s)>o.MAXARG_sBx&&u.luaX_syntaxerror(t.ls,n.to_luastring("control structure too long",!0)),o.SETARG_sBx(l,s)},b=function(t,e,a){if(-1===a)return e;if(-1===e)e=a;else{for(var r=e,n=T(t,r);-1!==n;)r=n,n=T(t,r);k(t,r,a)}return e},x=function(t){var e=t.jpc;t.jpc=-1;var a=G(t,f.OP_JMP,0,-1);return a=b(t,a,e)},O=function(t,e){return w(t,x(t),e)},m=function(t,e,a){K(t,f.OP_RETURN,e,a+1,0)},U=function(t,e,a,r,n){return K(t,e,a,r,n),x(t)},E=function(t){return t.lasttarget=t.pc,t.pc},N=function(t,e){return e>=1&&o.testTMode(t.f.code[e-1].opcode)?e-1:e},S=function(t,e){return t.f.code[N(t,e)]},R=function(t,e,a){var r=N(t,e),n=t.f.code[r];return n.opcode===f.OP_TESTSET&&(a!==o.NO_REG&&a!==n.B?o.SETARG_A(n,a):t.f.code[r]=o.CREATE_ABC(f.OP_TEST,n.B,0,n.C),!0)},y=function(t,e){for(;-1!==e;e=T(t,e))R(t,e,o.NO_REG)},I=function(t,e,a,r,n){for(;-1!==e;){var u=T(t,e);R(t,e,r)?k(t,e,a):k(t,e,n),e=u}},M=function(t){I(t,t.jpc,t.pc,o.NO_REG,t.pc),t.jpc=-1},C=function(t,e){E(t),t.jpc=b(t,t.jpc,e)},w=function(t,e,a){a===t.pc?C(t,e):(r(a<t.pc),I(t,e,a,o.NO_REG,a))},P=function(t,e,a){for(a++;-1!==e;e=T(t,e)){var n=t.f.code[e];r(n.opcode===f.OP_JMP&&(0===n.A||n.A>=a)),o.SETARG_A(n,a)}},D=function(t,e){var a=t.f;return M(t),a.code[t.pc]=e,a.lineinfo[t.pc]=t.ls.lastline,t.pc++},K=function(t,e,a,n,u){return r(o.getOpMode(e)===o.iABC),r(o.getBMode(e)!==o.OpArgN||0===n),r(o.getCMode(e)!==o.OpArgN||0===u),r(a<=o.MAXARG_A&&n<=o.MAXARG_B&&u<=o.MAXARG_C),D(t,o.CREATE_ABC(e,a,n,u))},B=function(t,e,a,n){return r(o.getOpMode(e)===o.iABx||o.getOpMode(e)===o.iAsBx),r(o.getCMode(e)===o.OpArgN),r(a<=o.MAXARG_A&&n<=o.MAXARG_Bx),D(t,o.CREATE_ABx(e,a,n))},G=function(t,e,a,r){return B(t,e,a,r+o.MAXARG_sBx)},V=function(t,e){return r(e<=o.MAXARG_Ax),D(t,o.CREATE_Ax(f.OP_EXTRAARG,e))},F=function(t,e,a){if(a<=o.MAXARG_Bx)return B(t,f.OP_LOADK,e,a);var r=B(t,f.OP_LOADKX,e,0);return V(t,a),r},X=function(t,e){var a=t.freereg+e;a>t.f.maxstacksize&&(a>=255&&u.luaX_syntaxerror(t.ls,n.to_luastring("function or expression needs too many registers",!0)),t.f.maxstacksize=a)},j=function(t,e){X(t,e),t.freereg+=e},H=function(t,e){!o.ISK(e)&&e>=t.nactvar&&(t.freereg--,r(e===t.freereg))},z=function(t,e){e.k===s.expkind.VNONRELOC&&H(t,e.u.info)},Y=function(t,e,a){var r=e.k===s.expkind.VNONRELOC?e.u.info:-1,n=a.k===s.expkind.VNONRELOC?a.u.info:-1;r>n?(H(t,r),H(t,n)):(H(t,n),H(t,r))},Z=function(t,e,a){var r=t.f,n=i.luaH_set(t.L,t.ls.h,e);if(n.ttisinteger()){var u=n.value;if(u<t.nk&&r.k[u].ttype()===a.ttype()&&r.k[u].value===a.value)return u}var l=t.nk;return n.setivalue(l),r.k[l]=a,t.nk++,l},J=function(t,e){var a=new p(_.LUA_TLNGSTR,e);return Z(t,a,a)},q=function(t,e){var a=new p(_.LUA_TLIGHTUSERDATA,e),r=new p(_.LUA_TNUMINT,e);return Z(t,a,r)},W=function(t,e){var a=new p(_.LUA_TNUMFLT,e);return Z(t,a,a)},Q=function(t,e){var a=new p(_.LUA_TBOOLEAN,e);return Z(t,a,a)},$=function(t){var e=new p(_.LUA_TNIL,null),a=new p(_.LUA_TTABLE,t.ls.h);return Z(t,a,e)},tt=function(t,e,a){var u=s.expkind;if(e.k===u.VCALL)o.SETARG_C(A(t,e),a+1);else if(e.k===u.VVARARG){var l=A(t,e);o.SETARG_B(l,a+1),o.SETARG_A(l,t.freereg),j(t,1)}else r(a===n.LUA_MULTRET)},et=function(t,e){tt(t,e,n.LUA_MULTRET)},at=function(t,e){var a=s.expkind;e.k===a.VCALL?(r(2===A(t,e).C),e.k=a.VNONRELOC,e.u.info=A(t,e).A):e.k===a.VVARARG&&(o.SETARG_B(A(t,e),2),e.k=a.VRELOCABLE)},rt=function(t,e){var a=s.expkind;switch(e.k){case a.VLOCAL:e.k=a.VNONRELOC;break;case a.VUPVAL:e.u.info=K(t,f.OP_GETUPVAL,0,e.u.info,0),e.k=a.VRELOCABLE;break;case a.VINDEXED:var n=void 0;H(t,e.u.ind.idx),e.u.ind.vt===a.VLOCAL?(H(t,e.u.ind.t),n=f.OP_GETTABLE):(r(e.u.ind.vt===a.VUPVAL),n=f.OP_GETTABUP),e.u.info=K(t,n,0,e.u.ind.t,e.u.ind.idx),e.k=a.VRELOCABLE;break;case a.VVARARG:case a.VCALL:at(t,e)}},nt=function(t,e,a,r){return E(t),K(t,f.OP_LOADBOOL,e,a,r)},ut=function(t,e,a){var n=s.expkind;switch(rt(t,e),e.k){case n.VNIL:d(t,a,1);break;case n.VFALSE:case n.VTRUE:K(t,f.OP_LOADBOOL,a,e.k===n.VTRUE,0);break;case n.VK:F(t,a,e.u.info);break;case n.VKFLT:F(t,a,W(t,e.u.nval));break;case n.VKINT:F(t,a,q(t,e.u.ival));break;case n.VRELOCABLE:var u=A(t,e);o.SETARG_A(u,a);break;case n.VNONRELOC:a!==e.u.info&&K(t,f.OP_MOVE,a,e.u.info,0);break;default:return void r(e.k===n.VJMP)}e.u.info=a,e.k=n.VNONRELOC},lt=function(t,e){e.k!==s.expkind.VNONRELOC&&(j(t,1),ut(t,e,t.freereg-1))},ot=function(t,e){for(;-1!==e;e=T(t,e)){if(S(t,e).opcode!==f.OP_TESTSET)return!0}return!1},st=function(t,e,a){var r=s.expkind;if(ut(t,e,a),e.k===r.VJMP&&(e.t=b(t,e.t,e.u.info)),g(e)){var n=void 0,u=-1,l=-1;if(ot(t,e.t)||ot(t,e.f)){var o=e.k===r.VJMP?-1:x(t);u=nt(t,a,0,1),l=nt(t,a,1,0),C(t,o)}n=E(t),I(t,e.f,n,a,u),I(t,e.t,n,a,l)}e.f=e.t=-1,e.u.info=a,e.k=r.VNONRELOC},it=function(t,e){rt(t,e),z(t,e),j(t,1),st(t,e,t.freereg-1)},ct=function(t,e){if(rt(t,e),e.k===s.expkind.VNONRELOC){if(!g(e))return e.u.info;if(e.u.info>=t.nactvar)return st(t,e,e.u.info),e.u.info}return it(t,e),e.u.info},_t=function(t,e){(e.k!==s.expkind.VUPVAL||g(e))&&ct(t,e)},ft=function(t,e){g(e)?ct(t,e):rt(t,e)},pt=function(t,e){var a=s.expkind,r=!1;switch(ft(t,e),e.k){case a.VTRUE:e.u.info=Q(t,!0),r=!0;break;case a.VFALSE:e.u.info=Q(t,!1),r=!0;break;case a.VNIL:e.u.info=$(t),r=!0;break;case a.VKINT:e.u.info=q(t,e.u.ival),r=!0;break;case a.VKFLT:e.u.info=W(t,e.u.nval),r=!0;break;case a.VK:r=!0}return r&&(e.k=a.VK,e.u.info<=o.MAXINDEXRK)?o.RKASK(e.u.info):ct(t,e)},ht=function(t,e,a){var r=s.expkind;switch(e.k){case r.VLOCAL:return z(t,a),void st(t,a,e.u.info);case r.VUPVAL:var n=ct(t,a);K(t,f.OP_SETUPVAL,n,e.u.info,0);break;case r.VINDEXED:var u=e.u.ind.vt===r.VLOCAL?f.OP_SETTABLE:f.OP_SETTABUP,l=pt(t,a);K(t,u,e.u.ind.t,e.u.ind.idx,l)}z(t,a)},vt=function(t,e,a){ct(t,e);var r=e.u.info;z(t,e),e.u.info=t.freereg,e.k=s.expkind.VNONRELOC,j(t,2),K(t,f.OP_SELF,e.u.info,r,pt(t,a)),z(t,a)},gt=function(t,e){var a=S(t,e.u.info);r(o.testTMode(a.opcode)&&a.opcode!==f.OP_TESTSET&&a.opcode!==f.OP_TEST),o.SETARG_A(a,!a.A)},Lt=function(t,e,a){if(e.k===s.expkind.VRELOCABLE){var r=A(t,e);if(r.opcode===f.OP_NOT)return t.pc--,U(t,f.OP_TEST,r.B,0,!a)}return lt(t,e),z(t,e),U(t,f.OP_TESTSET,o.NO_REG,e.u.info,a)},dt=function(t,e){var a=s.expkind,r=void 0;switch(rt(t,e),e.k){case a.VJMP:gt(t,e),r=e.u.info;break;case a.VK:case a.VKFLT:case a.VKINT:case a.VTRUE:r=-1;break;default:r=Lt(t,e,0)}e.f=b(t,e.f,r),C(t,e.t),e.t=-1},At=function(t,e){var a=s.expkind,r=void 0;switch(rt(t,e),e.k){case a.VJMP:r=e.u.info;break;case a.VNIL:case a.VFALSE:r=-1;break;default:r=Lt(t,e,1)}e.t=b(t,e.t,r),C(t,e.f),e.f=-1},Tt=function(t,e){var a=s.expkind;switch(rt(t,e),e.k){case a.VNIL:case a.VFALSE:e.k=a.VTRUE;break;case a.VK:case a.VKFLT:case a.VKINT:case a.VTRUE:e.k=a.VFALSE;break;case a.VJMP:gt(t,e);break;case a.VRELOCABLE:case a.VNONRELOC:lt(t,e),z(t,e),e.u.info=K(t,f.OP_NOT,0,e.u.info,0),e.k=a.VRELOCABLE}var r=e.f;e.f=e.t,e.t=r,y(t,e.f),y(t,e.t)},kt=function(t,e,a){var n=s.expkind;r(!g(e)&&(s.vkisinreg(e.k)||e.k===n.VUPVAL)),e.u.ind.t=e.u.info,e.u.ind.idx=pt(t,a),e.u.ind.vt=e.k===n.VUPVAL?n.VUPVAL:n.VLOCAL,e.k=n.VINDEXED},bt=function(t,e,a){switch(t){case n.LUA_OPBAND:case n.LUA_OPBOR:case n.LUA_OPBXOR:case n.LUA_OPSHL:case n.LUA_OPSHR:case n.LUA_OPBNOT:return!1!==c.tointeger(e)&&!1!==c.tointeger(a);case n.LUA_OPDIV:case n.LUA_OPIDIV:case n.LUA_OPMOD:return 0!==a.value;default:return 1}},xt=function(t,e,a){var r=s.expkind,n=void 0,u=void 0;if(!(n=L(e,!0))||!(u=L(a,!0))||!bt(t,n,u))return 0;var o=new p;if(l.luaO_arith(null,t,n,u,o),o.ttisinteger())e.k=r.VKINT,e.u.ival=o.value;else{var i=o.value;if(isNaN(i)||0===i)return!1;e.k=r.VKFLT,e.u.nval=i}return!0},Ot=function(t,e,a,r){var n=ct(t,a);z(t,a),a.u.info=K(t,e,0,n,0),a.k=s.expkind.VRELOCABLE,Rt(t,r)},mt=function(t,e,a,r,n){var u=pt(t,r),l=pt(t,a);Y(t,a,r),a.u.info=K(t,e,0,l,u),a.k=s.expkind.VRELOCABLE,Rt(t,n)},Ut=function(t,e,a,n){var u=s.expkind,l=void 0;a.k===u.VK?l=o.RKASK(a.u.info):(r(a.k===u.VNONRELOC),l=a.u.info);var i=pt(t,n);switch(Y(t,a,n),e){case h.OPR_NE:a.u.info=U(t,f.OP_EQ,0,l,i);break;case h.OPR_GT:case h.OPR_GE:var c=e-h.OPR_NE+f.OP_EQ;a.u.info=U(t,c,1,i,l);break;default:var _=e-h.OPR_EQ+f.OP_EQ;a.u.info=U(t,_,1,l,i)}a.k=u.VJMP},Et=function(t,e,a,r){var u=new s.expdesc;switch(u.k=s.expkind.VKINT,u.u.ival=u.u.nval=u.u.info=0,u.t=-1,u.f=-1,e){case v.OPR_MINUS:case v.OPR_BNOT:if(xt(e+n.LUA_OPUNM,a,u))break;case v.OPR_LEN:Ot(t,e+f.OP_UNM,a,r);break;case v.OPR_NOT:Tt(t,a)}},Nt=function(t,e,a){switch(e){case h.OPR_AND:dt(t,a);break;case h.OPR_OR:At(t,a);break;case h.OPR_CONCAT:it(t,a);break;case h.OPR_ADD:case h.OPR_SUB:case h.OPR_MUL:case h.OPR_DIV:case h.OPR_IDIV:case h.OPR_MOD:case h.OPR_POW:case h.OPR_BAND:case h.OPR_BOR:case h.OPR_BXOR:case h.OPR_SHL:case h.OPR_SHR:L(a,!1)||pt(t,a);break;default:pt(t,a)}},St=function(t,e,a,u,l){var i=s.expkind;switch(e){case h.OPR_AND:r(-1===a.t),rt(t,u),u.f=b(t,u.f,a.f),a.to(u);break;case h.OPR_OR:r(-1===a.f),rt(t,u),u.t=b(t,u.t,a.t),a.to(u);break;case h.OPR_CONCAT:ft(t,u);var c=A(t,u);u.k===i.VRELOCABLE&&c.opcode===f.OP_CONCAT?(r(a.u.info===c.B-1),z(t,a),o.SETARG_B(c,a.u.info),a.k=i.VRELOCABLE,a.u.info=u.u.info):(it(t,u),mt(t,f.OP_CONCAT,a,u,l));break;case h.OPR_ADD:case h.OPR_SUB:case h.OPR_MUL:case h.OPR_DIV:case h.OPR_IDIV:case h.OPR_MOD:case h.OPR_POW:case h.OPR_BAND:case h.OPR_BOR:case h.OPR_BXOR:case h.OPR_SHL:case h.OPR_SHR:xt(e+n.LUA_OPADD,a,u)||mt(t,e+f.OP_ADD,a,u,l);break;case h.OPR_EQ:case h.OPR_LT:case h.OPR_LE:case h.OPR_NE:case h.OPR_GT:case h.OPR_GE:Ut(t,e,a,u)}return a},Rt=function(t,e){t.f.lineinfo[t.pc-1]=e},yt=function(t,e,a,l){var s=(a-1)/o.LFIELDS_PER_FLUSH+1,i=l===n.LUA_MULTRET?0:l;r(0!==l&&l<=o.LFIELDS_PER_FLUSH),s<=o.MAXARG_C?K(t,f.OP_SETLIST,e,i,s):s<=o.MAXARG_Ax?(K(t,f.OP_SETLIST,e,i,0),V(t,s)):u.luaX_syntaxerror(t.ls,n.to_luastring("constructor too long",!0)),t.freereg=e+1};t.exports.BinOpr=h,t.exports.NO_JUMP=-1,t.exports.UnOpr=v,t.exports.getinstruction=A,t.exports.luaK_checkstack=X,t.exports.luaK_code=D,t.exports.luaK_codeABC=K,t.exports.luaK_codeABx=B,t.exports.luaK_codeAsBx=G,t.exports.luaK_codek=F,t.exports.luaK_concat=b,t.exports.luaK_dischargevars=rt,t.exports.luaK_exp2RK=pt,t.exports.luaK_exp2anyreg=ct,t.exports.luaK_exp2anyregup=_t,t.exports.luaK_exp2nextreg=it,t.exports.luaK_exp2val=ft,t.exports.luaK_fixline=Rt,t.exports.luaK_getlabel=E,t.exports.luaK_goiffalse=At,t.exports.luaK_goiftrue=dt,t.exports.luaK_indexed=kt,t.exports.luaK_infix=Nt,t.exports.luaK_intK=q,t.exports.luaK_jump=x,t.exports.luaK_jumpto=O,t.exports.luaK_nil=d,t.exports.luaK_numberK=W,t.exports.luaK_patchclose=P,t.exports.luaK_patchlist=w,t.exports.luaK_patchtohere=C,t.exports.luaK_posfix=St,t.exports.luaK_prefix=Et,t.exports.luaK_reserveregs=j,t.exports.luaK_ret=m,t.exports.luaK_self=vt,t.exports.luaK_setlist=yt,t.exports.luaK_setmultret=et,t.exports.luaK_setoneret=at,t.exports.luaK_setreturns=tt,t.exports.luaK_storevar=ht,t.exports.luaK_stringK=J},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(0),l=a(1),o=a(6),s=a(11),i=a(3),c=a(15),_=a(8),f=a(16),p=[25,147,l.char["\r"],l.char["\n"],26,l.char["\n"]],h=function(){function t(e,a,n){r(this,t),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,u(a instanceof f.ZIO,"BytecodeParser only operates on a ZIO"),u(l.is_luastring(n)),n[0]==l.char["@"]||n[0]==l.char["="]?this.name=n.slice(1):n[0]==l.LUA_SIGNATURE.charCodeAt(0)?this.name=l.to_luastring("binary string",!0):this.name=n,this.L=e,this.Z=a,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return n(t,[{key:"read",value:function(t){var e=new Uint8Array(t);return 0!==f.luaZ_read(this.Z,e,0,t)&&this.error("truncated"),Array.from(e)}},{key:"readByte",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"readInteger",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readSize_t",value:function(){return this.readInteger()}},{key:"readInt",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readNumber",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"readString",value:function(){var t=Math.max(this.readByte()-1,0);return t+1===255&&(t=this.readSize_t()-1),0===t?null:_.luaS_bless(this.L,this.read(t))}},{key:"readInstruction",value:function(){return 0!==f.luaZ_read(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated"),this.dv.getUint32(0,!0)}},{key:"readCode",value:function(e){for(var a=this.readInt(),r=c,n=t,u=0;u<a;u++){var l=this.readInstruction();e.code[u]={code:l,opcode:l>>r.POS_OP&n.MASK1(r.SIZE_OP,0),A:l>>r.POS_A&n.MASK1(r.SIZE_A,0),B:l>>r.POS_B&n.MASK1(r.SIZE_B,0),C:l>>r.POS_C&n.MASK1(r.SIZE_C,0),Bx:l>>r.POS_Bx&n.MASK1(r.SIZE_Bx,0),Ax:l>>r.POS_Ax&n.MASK1(r.SIZE_Ax,0),sBx:(l>>r.POS_Bx&n.MASK1(r.SIZE_Bx,0))-r.MAXARG_sBx}}}},{key:"readUpvalues",value:function(t){for(var e=this.readInt(),a=0;a<e;a++)t.upvalues[a]={name:null,instack:this.readByte(),idx:this.readByte()}}},{key:"readConstants",value:function(t){for(var e=this.readInt(),a=0;a<e;a++){var r=this.readByte();switch(r){case l.CT.LUA_TNIL:t.k.push(new i.TValue(l.CT.LUA_TNIL,null));break;case l.CT.LUA_TBOOLEAN:t.k.push(new i.TValue(l.CT.LUA_TBOOLEAN,0!==this.readByte()));break;case l.CT.LUA_TNUMFLT:t.k.push(new i.TValue(l.CT.LUA_TNUMFLT,this.readNumber()));break;case l.CT.LUA_TNUMINT:t.k.push(new i.TValue(l.CT.LUA_TNUMINT,this.readInteger()));break;case l.CT.LUA_TSHRSTR:case l.CT.LUA_TLNGSTR:t.k.push(new i.TValue(l.CT.LUA_TLNGSTR,this.readString()));break;default:this.error("unrecognized constant '"+r+"'")}}}},{key:"readProtos",value:function(t){for(var e=this.readInt(),a=0;a<e;a++)t.p[a]=new s.Proto(this.L),this.readFunction(t.p[a],t.source)}},{key:"readDebug",value:function(t){for(var e=this.readInt(),a=0;a<e;a++)t.lineinfo[a]=this.readInt();e=this.readInt();for(var r=0;r<e;r++)t.locvars[r]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};e=this.readInt();for(var n=0;n<e;n++)t.upvalues[n].name=this.readString()}},{key:"readFunction",value:function(t,e){t.source=this.readString(),null===t.source&&(t.source=e),t.linedefined=this.readInt(),t.lastlinedefined=this.readInt(),t.numparams=this.readByte(),t.is_vararg=0!==this.readByte(),t.maxstacksize=this.readByte(),this.readCode(t),this.readConstants(t),this.readUpvalues(t),this.readProtos(t),this.readDebug(t)}},{key:"checkliteral",value:function(t,e){this.read(t.length).join()!==t.join()&&this.error(e)}},{key:"checkHeader",value:function(){this.checkliteral(l.to_luastring(l.LUA_SIGNATURE.substring(1)),"not a"),83!==this.readByte()&&this.error("version mismatch in"),0!==this.readByte()&&this.error("format mismatch in"),this.checkliteral(p,"corrupted"),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.readInteger()&&this.error("endianness mismatch in"),370.5!==this.readNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(t){i.luaO_pushfstring(this.L,l.to_luastring("%s: %s precompiled chunk"),this.name,l.to_luastring(t)),o.luaD_throw(this.L,l.thread_status.LUA_ERRSYNTAX)}},{key:"checksize",value:function(t,e,a){t!==e&&this.error(a+" size mismatch in")}}],[{key:"MASK1",value:function(t,e){return~(-1<<t)<<e}},{key:"MASK0",value:function(e,a){return~t.MASK1(e,a)}}]),t}(),v=function(t,e,a){var r=new h(t,e,a);r.checkHeader();var n=s.luaF_newLclosure(t,r.readByte());return o.luaD_inctop(t),t.stack[t.top-1].setclLvalue(n),n.p=new s.Proto(t),r.readFunction(n.p,null),u(n.nupvalues===n.p.upvalues.length),n};t.exports.luaU_undump=v},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=a(1),u=n.constant_types,l="\r\n\n",o=16*Number.parseInt(n.LUA_VERSION_MAJOR)+Number.parseInt(n.LUA_VERSION_MINOR),s=function t(){r(this,t),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN},i=function(t,e,a){0===a.status&&e>0&&(a.status=a.writer(a.L,t,e,a.data))},c=function(t,e){t=n.to_luastring(t),i(t,t.length,e)},_=function(t,e){i([t],1,e)},f=function(t,e){var a=new DataView(new ArrayBuffer(4));a.setInt32(0,t,!0);for(var r=[],n=0;n<4;n++)r.push(a.getUint8(n,!0));i(r,4,e)},p=function(t,e){var a=new DataView(new ArrayBuffer(4));a.setInt32(0,t,!0);for(var r=[],n=0;n<4;n++)r.push(a.getUint8(n,!0));i(r,4,e)},h=function(t,e){var a=new DataView(new ArrayBuffer(8));a.setFloat64(0,t,!0);for(var r=[],n=0;n<8;n++)r.push(a.getUint8(n,!0));i(r,8,e)},v=function(t,e){if(null===t)_(0,e);else{var a=t.tsslen()+1,r=t.getstr();a<255?_(a,e):(_(255,e),p(a,e)),i(r,a-1,e)}},g=function(t,e){var a=t.code.map(function(t){return t.code});f(a.length,e);for(var r=0;r<a.length;r++)f(a[r],e)},L=function(t,e){var a=t.k.length;f(a,e);for(var r=0;r<a;r++){var n=t.k[r];switch(_(n.ttype(),e),n.ttype()){case u.LUA_TNIL:break;case u.LUA_TBOOLEAN:_(n.value?1:0,e);break;case u.LUA_TNUMFLT:h(n.value,e);break;case u.LUA_TNUMINT:p(n.value,e);break;case u.LUA_TSHRSTR:case u.LUA_TLNGSTR:v(n.tsvalue(),e)}}},d=function(t,e){var a=t.p.length;f(a,e);for(var r=0;r<a;r++)k(t.p[r],t.source,e)},A=function(t,e){var a=t.upvalues.length;f(a,e);for(var r=0;r<a;r++)_(t.upvalues[r].instack?1:0,e),_(t.upvalues[r].idx,e)},T=function(t,e){var a=e.strip?0:t.lineinfo.length;f(a,e);for(var r=0;r<a;r++)f(t.lineinfo[r],e);a=e.strip?0:t.locvars.length,f(a,e);for(var n=0;n<a;n++)v(t.locvars[n].varname,e),f(t.locvars[n].startpc,e),f(t.locvars[n].endpc,e);a=e.strip?0:t.upvalues.length,f(a,e);for(var u=0;u<a;u++)v(t.upvalues[u].name,e)},k=function(t,e,a){a.strip||t.source===e?v(null,a):v(t.source,a),f(t.linedefined,a),f(t.lastlinedefined,a),_(t.numparams,a),_(t.is_vararg?1:0,a),_(t.maxstacksize,a),g(t,a),L(t,a),A(t,a),d(t,a),T(t,a)},b=function(t){c(n.LUA_SIGNATURE,t),_(o,t),_(0,t);var e=l.split("").map(function(t){return t.charCodeAt(0)});i(e,e.length,t),_(4,t),_(4,t),_(4,t),_(4,t),_(8,t),p(22136,t),h(370.5,t)},x=function(t,e,a,r,n){var u=new s;return u.L=t,u.writer=a,u.data=r,u.strip=n,u.status=0,b(u),_(e.upvalues.length,u),k(e,null,u),u.status};t.exports.luaU_dump=x},function(t,e,a){"use strict";function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var n=a(2),u=a(5),l=a(40),o=a(25),s=a(26),i=a(27),c=a(28),_=a(29),f=a(30),p=a(31),h=a(32),v=a(24),g=function(t){var e,a=(e={},r(e,v.LUA_LOADLIBNAME,h.luaopen_package),r(e,v.LUA_COLIBNAME,o.luaopen_coroutine),r(e,v.LUA_DBLIBNAME,f.luaopen_debug),r(e,v.LUA_MATHLIBNAME,s.luaopen_math),r(e,v.LUA_OSLIBNAME,p.luaopen_os),r(e,v.LUA_STRLIBNAME,i.luaopen_string),r(e,v.LUA_TABLIBNAME,c.luaopen_table),r(e,v.LUA_UTF8LIBNAME,_.luaopen_utf8),r(e,"_G",l.luaopen_base),e);for(var g in a)u.luaL_requiref(t,n.to_luastring(g),a[g],1),n.lua_pop(t,1)};t.exports.luaL_openlibs=g},function(t,e,a){"use strict";var r=a(2),n=a(5),u=void 0,l=void 0,o=[];u=function(t){o=o.concat(t)},l=function(){console.log(r.to_jsstring(o)),o=[]};var s=function(t){var e=r.lua_gettop(t);r.lua_getglobal(t,r.to_luastring("tostring",!0));for(var a=1;a<=e;a++){r.lua_pushvalue(t,-1),r.lua_pushvalue(t,a),r.lua_call(t,1,1);var o=r.lua_tolstring(t,-1);if(null===o)return n.luaL_error(t,r.to_luastring("'tostring' must return a string to 'print'",!0));a>1&&u(["\t".charCodeAt(0)]),u(o),r.lua_pop(t,1)}return l(),0},i=function(t){return n.luaL_checkany(t,1),n.luaL_tolstring(t,1),1},c=function(t){return n.luaL_checkany(t,1),r.lua_getmetatable(t,1)?(n.luaL_getmetafield(t,1,r.to_luastring("__metatable",!0)),1):(r.lua_pushnil(t),1)},_=function(t){var e=r.lua_type(t,2);return n.luaL_checktype(t,1,r.LUA_TTABLE),n.luaL_argcheck(t,e===r.LUA_TNIL||e===r.LUA_TTABLE,2,r.to_luastring("nil or table expected",!0)),n.luaL_getmetafield(t,1,r.to_luastring("__metatable",!0))!==r.LUA_TNIL?n.luaL_error(t,r.to_luastring("cannot change a protected metatable",!0)):(r.lua_settop(t,2),r.lua_setmetatable(t,1),1)},f=function(t){return n.luaL_checkany(t,1),n.luaL_checkany(t,2),r.lua_pushboolean(t,r.lua_rawequal(t,1,2)),1},p=function(t){var e=r.lua_type(t,1);return n.luaL_argcheck(t,e===r.LUA_TTABLE||e===r.LUA_TSTRING,1,r.to_luastring("table or string expected",!0)),r.lua_pushinteger(t,r.lua_rawlen(t,1)),1},h=function(t){return n.luaL_checktype(t,1,r.LUA_TTABLE),n.luaL_checkany(t,2),r.lua_settop(t,2),r.lua_rawget(t,1),1},v=function(t){return n.luaL_checktype(t,1,r.LUA_TTABLE),n.luaL_checkany(t,2),n.luaL_checkany(t,3),r.lua_settop(t,3),r.lua_rawset(t,1),1},g=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(function(t){return r.to_luastring(t)}),L=function(t){n.luaL_checkoption(t,1,r.to_luastring("collect"),g),n.luaL_optinteger(t,2,0),n.luaL_error(t,r.to_luastring("lua_gc not implemented"))},d=function(t){var e=r.lua_type(t,1);return n.luaL_argcheck(t,e!==r.LUA_TNONE,1,r.to_luastring("value expected",!0)),r.lua_pushstring(t,r.lua_typename(t,e)),1},A=function(t,e,a,u){return n.luaL_checkany(t,1),n.luaL_getmetafield(t,1,e)===r.LUA_TNIL?(r.lua_pushcfunction(t,u),r.lua_pushvalue(t,1),a?r.lua_pushinteger(t,0):r.lua_pushnil(t)):(r.lua_pushvalue(t,1),r.lua_call(t,1,3)),3},T=function(t){return n.luaL_checktype(t,1,r.LUA_TTABLE),r.lua_settop(t,2),r.lua_next(t,1)?2:(r.lua_pushnil(t),1)},k=function(t){return A(t,r.to_luastring("__pairs",!0),0,T)},b=function(t){var e=n.luaL_checkinteger(t,2)+1;return r.lua_pushinteger(t,e),r.lua_geti(t,1,e)===r.LUA_TNIL?1:2},x=function(t){return n.luaL_checkany(t,1),r.lua_pushcfunction(t,b),r.lua_pushvalue(t,1),r.lua_pushinteger(t,0),3},O=function(t,e){var a=/^[\t\v\f \n\r]*([\+\-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(r.to_jsstring(t));if(!a)return null;for(var n="-"===a[1],u=a[2],l=0,o=0;o<u.length;o++){var s=/\d/.test(u[o])?u.charCodeAt(o)-"0".charCodeAt(0):u[o].toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+10;if(s>=e)return null;l=(l*e|0)+s}return 0|(n?-l:l)},m=function(t){if(r.lua_type(t,2)<=0){if(n.luaL_checkany(t,1),r.lua_type(t,1)===r.LUA_TNUMBER)return r.lua_settop(t,1),1;var e=r.lua_tostring(t,1);if(null!==e&&r.lua_stringtonumber(t,e)===e.length+1)return 1}else{var a=n.luaL_checkinteger(t,2);n.luaL_checktype(t,1,r.LUA_TSTRING);var u=r.lua_tostring(t,1);n.luaL_argcheck(t,2<=a&&a<=36,2,r.to_luastring("base out of range",!0));var l=O(u,a);if(null!==l)return r.lua_pushinteger(t,l),1}return r.lua_pushnil(t),1},U=function(t){var e=n.luaL_optinteger(t,2,1);return r.lua_settop(t,1),r.lua_type(t,1)===r.LUA_TSTRING&&e>0&&(n.luaL_where(t,e),r.lua_pushvalue(t,1),r.lua_concat(t,2)),r.lua_error(t)},E=function(t){return r.lua_toboolean(t,1)?r.lua_gettop(t):(n.luaL_checkany(t,1),r.lua_remove(t,1),r.lua_pushliteral(t,"assertion failed!"),r.lua_settop(t,1),U(t))},N=function(t){var e=r.lua_gettop(t);if(r.lua_type(t,1)===r.LUA_TSTRING&&r.lua_tostring(t,1)[0]==="#".charCodeAt(0))return r.lua_pushinteger(t,e-1),1;var a=n.luaL_checkinteger(t,1);return a<0?a=e+a:a>e&&(a=e),n.luaL_argcheck(t,1<=a,1,r.to_luastring("index out of range",!0)),e-a},S=function(t,e,a){return e!==r.LUA_OK&&e!==r.LUA_YIELD?(r.lua_pushboolean(t,0),r.lua_pushvalue(t,-2),2):r.lua_gettop(t)-a},R=function(t){n.luaL_checkany(t,1),r.lua_pushboolean(t,1),r.lua_insert(t,1);var e=r.lua_pcallk(t,r.lua_gettop(t)-2,r.LUA_MULTRET,0,0,S);return S(t,e,0)},y=function(t){var e=r.lua_gettop(t);n.luaL_checktype(t,2,r.LUA_TFUNCTION),r.lua_pushboolean(t,1),r.lua_pushvalue(t,1),r.lua_rotate(t,3,2);var a=r.lua_pcallk(t,e-2,r.LUA_MULTRET,2,2,S);return S(t,a,2)},I=function(t,e,a){return e===r.LUA_OK?(0!==a&&(r.lua_pushvalue(t,a),r.lua_setupvalue(t,-2,1)||r.lua_pop(t,1)),1):(r.lua_pushnil(t),r.lua_insert(t,-2),2)},M=function(t,e){return n.luaL_checkstack(t,2,r.to_luastring("too many nested functions",!0)),r.lua_pushvalue(t,1),r.lua_call(t,0,1),r.lua_isnil(t,-1)?(r.lua_pop(t,1),null):(r.lua_isstring(t,-1)||n.luaL_error(t,r.to_luastring("reader function must return a string",!0)),r.lua_replace(t,5),r.lua_tostring(t,5))},C=function(t){var e=r.lua_tostring(t,1),a=n.luaL_optstring(t,3,r.to_luastring("bt",!0)),u=r.lua_isnone(t,4)?0:4,l=void 0;if(null!==e){var o=n.luaL_optstring(t,2,e);l=n.luaL_loadbufferx(t,e,e.length,o,a)}else{var s=n.luaL_optstring(t,2,r.to_luastring("=(load)",!0));n.luaL_checktype(t,1,r.LUA_TFUNCTION),r.lua_settop(t,5),l=r.lua_load(t,M,null,s,a)}return I(t,l,u)},w=function(t){var e=n.luaL_optstring(t,1,null),a=n.luaL_optstring(t,2,null),u=r.lua_isnone(t,3)?0:3,l=n.luaL_loadfilex(t,e,a);return I(t,l,u)},P=function(t,e,a){return r.lua_gettop(t)-1},D=function(t){var e=n.luaL_optstring(t,1,null);return r.lua_settop(t,1),n.luaL_loadfile(t,e)!==r.LUA_OK?r.lua_error(t):(r.lua_callk(t,0,r.LUA_MULTRET,0,P),P(t))},K={assert:E,collectgarbage:L,dofile:D,error:U,getmetatable:c,ipairs:x,load:C,loadfile:w,next:T,pairs:k,pcall:R,print:s,rawequal:f,rawget:h,rawlen:p,rawset:v,select:N,setmetatable:_,tonumber:m,tostring:i,type:d,xpcall:y},B=function(t){return r.lua_pushglobaltable(t),n.luaL_setfuncs(t,K,0),r.lua_pushvalue(t,-1),r.lua_setfield(t,-2,r.to_luastring("_G",!0)),r.lua_pushliteral(t,r.LUA_VERSION),r.lua_setfield(t,-2,r.to_luastring("_VERSION",!0)),1};t.exports.luaopen_base=B},function(t,e,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function e(t,c,p){function h(t,e){var a;if(e){if(a=e.getTime(),A){var r=s(e);if(e=new Date(a+r+d),s(e)!==r){var n=s(e);e=new Date(a+n+d)}}}else{var u=Date.now();u>T?(T=u,g=new Date(T),a=T,A&&(g=new Date(T+s(g)+d))):a=T,e=g}return v(t,e,L,a)}function v(t,e,r,s){for(var c="",_=null,f=!1,p=t.length,h=!1,g=0;g<p;g++){var L=t.charCodeAt(g);if(!0!==f)37!==L?c+=t[g]:f=!0;else{if(45===L){_="";continue}if(95===L){_=" ";continue}if(48===L){_="0";continue}if(58===L){h&&i("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),h=!0;continue}switch(L){case 37:c+="%";break;case 65:c+=r.days[e.getDay()];break;case 66:c+=r.months[e.getMonth()];break;case 67:c+=a(Math.floor(e.getFullYear()/100),_);break;case 68:c+=v(r.formats.D,e,r,s);break;case 70:c+=v(r.formats.F,e,r,s);break;case 72:c+=a(e.getHours(),_);break;case 73:c+=a(u(e.getHours()),_);break;case 76:c+=n(Math.floor(s%1e3));break;case 77:c+=a(e.getMinutes(),_);break;case 80:c+=e.getHours()<12?r.am:r.pm;break;case 82:c+=v(r.formats.R,e,r,s);break;case 83:c+=a(e.getSeconds(),_);break;case 84:c+=v(r.formats.T,e,r,s);break;case 85:c+=a(l(e,"sunday"),_);break;case 87:c+=a(l(e,"monday"),_);break;case 88:c+=v(r.formats.X,e,r,s);break;case 89:c+=e.getFullYear();break;case 90:if(A&&0===d)c+="GMT";else{var T=e.toString().match(/\(([\w\s]+)\)/);c+=T&&T[1]||""}break;case 97:c+=r.shortDays[e.getDay()];break;case 98:c+=r.shortMonths[e.getMonth()];break;case 99:c+=v(r.formats.c,e,r,s);break;case 100:c+=a(e.getDate(),_);break;case 101:c+=a(e.getDate(),null==_?" ":_);break;case 104:c+=r.shortMonths[e.getMonth()];break;case 106:var k=new Date(e.getFullYear(),0,1),b=Math.ceil((e.getTime()-k.getTime())/864e5);c+=n(b);break;case 107:c+=a(e.getHours(),null==_?" ":_);break;case 108:c+=a(u(e.getHours()),null==_?" ":_);break;case 109:c+=a(e.getMonth()+1,_);break;case 110:c+="\n";break;case 111:var b=e.getDate();r.ordinalSuffixes?c+=String(b)+(r.ordinalSuffixes[b-1]||o(b)):c+=String(b)+o(b);break;case 112:c+=e.getHours()<12?r.AM:r.PM;break;case 114:c+=v(r.formats.r,e,r,s);break;case 115:c+=Math.floor(s/1e3);break;case 116:c+="\t";break;case 117:var b=e.getDay();c+=0===b?7:b;break;case 118:c+=v(r.formats.v,e,r,s);break;case 119:c+=e.getDay();break;case 120:c+=v(r.formats.x,e,r,s);break;case 121:c+=(""+e.getFullYear()).slice(2);break;case 122:if(A&&0===d)c+=h?"+00:00":"+0000";else{var x;x=0!==d?d/6e4:-e.getTimezoneOffset();var O=x<0?"-":"+",m=h?":":"",U=Math.floor(Math.abs(x/60)),E=Math.abs(x%60);c+=O+a(U)+m+a(E)}break;default:f&&(c+="%"),c+=t[g]}_=null,f=!1}}return c}var g,L=t||f,d=c||0,A=p||!1,T=0,k=h;return k.localize=function(t){return new e(t||L,d,A)},k.localizeByIdentifier=function(t){var e=_[t];return e?k.localize(e):(i('[WARNING] No locale found with identifier "'+t+'".'),k)},k.timezone=function(t){var a=d,n=A,u=void 0===t?"undefined":r(t);if("number"===u||"string"===u)if(n=!0,"string"===u){var l="-"===t[0]?-1:1,o=parseInt(t.slice(1,3),10),s=parseInt(t.slice(3,5),10);a=l*(60*o+s)*60*1e3}else"number"===u&&(a=60*t*1e3);return new e(L,a,n)},k.utc=function(){return new e(L,d,!0)},k}function a(t,e){return""===e||t>9?t:(null==e&&(e="0"),e+t)}function n(t){return t>99?t:t>9?"0"+t:"00"+t}function u(t){return 0===t?12:t>12?t-12:t}function l(t,e){e=e||"sunday";var a=t.getDay();"monday"===e&&(0===a?a=6:a--);var r=Date.UTC(t.getFullYear(),0,1),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),u=Math.floor((n-r)/864e5),l=(u+7-a)/7;return Math.floor(l)}function o(t){var e=t%10,a=t%100;if(a>=11&&a<=13||0===e||e>=4)return"th";switch(e){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function s(t){return 6e4*(t.getTimezoneOffset()||0)}function i(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}var c,_={de_DE:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre"," diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],shortDays:["dom","lun","mar","mer","gio","ven","sab"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["pr","mag","giu","lug","ago","set","ott","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shortDays:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],AM:"ÖÖ",PM:"ÖS",am:"ÖÖ",pm:"ÖS",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["日","一","二","三","四","五","六"],months:["一月份","二月份","三月份","四月份","五月份","六月份","七月份","八月份","九月份","十月份","十一月份","十二月份"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AM:"上午",PM:"下午",am:"上午",pm:"下午",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},f=_.en_US,p=new e(f,0,!1),h=void 0!==t;h?c=t.exports=p:(c=function(){return this||(0,eval)("this")}(),c.strftime=p),"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()},function(t,e,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=a(18),u=n.lua,l=n.lauxlib,o=n.lualib,s=void 0;try{s=a(19).inspect.custom}catch(t){}var i=Reflect.apply,c=Reflect.construct,_=function(t){return""+t},f=function(t){return"object"===(void 0===t?"undefined":r(t))?null!==t:"function"==typeof t},p=u.to_luastring("js object"),h=function(t,e){var a=l.luaL_testudata(t,e,p);return a?a.data:void 0},v=function(t,e){return l.luaL_checkudata(t,e,p).data},g=function(t,e){u.lua_newuserdata(t).data=e,l.luaL_setmetatable(t,p)},L=function(t){u.lua_rawgeti(t,u.LUA_REGISTRYINDEX,u.LUA_RIDX_MAINTHREAD);var e=u.lua_tothread(t,-1);return u.lua_pop(t,1),e},d=new WeakMap,A=function(t){var e=u.lua_touserdata(t,1);return T(t,e),1},T=function(t,e){switch(void 0===e?"undefined":r(e)){case"undefined":u.lua_pushnil(t);break;case"number":u.lua_pushnumber(t,e);break;case"string":u.lua_pushstring(t,u.to_luastring(e));break;case"boolean":u.lua_pushboolean(t,e);break;case"symbol":u.lua_pushlightuserdata(t,e);break;case"function":if(u.lua_isproxy(e,t)){e(t);break}case"object":if(null===e){u.lua_rawgetp(t,u.LUA_REGISTRYINDEX,null);break}default:var a=d.get(L(t)),n=a.get(e);n?n(t):(g(t,e),n=u.lua_toproxy(t,-1),a.set(e,n))}},k=function(t,e){switch(u.lua_type(t,e)){case u.LUA_TNONE:case u.LUA_TNIL:return;case u.LUA_TBOOLEAN:return u.lua_toboolean(t,e);case u.LUA_TLIGHTUSERDATA:return u.lua_touserdata(t,e);case u.LUA_TNUMBER:return u.lua_tonumber(t,e);case u.LUA_TSTRING:return u.lua_tojsstring(t,e);case u.LUA_TUSERDATA:var a=h(t,e);if(void 0!==a)return a;case u.LUA_TTABLE:case u.LUA_TFUNCTION:case u.LUA_TTHREAD:default:return R(L(t),u.lua_toproxy(t,e))}},b=function(t,e,a,r,n){l.luaL_checkstack(t,2+r.length),void 0!==n&&null!==n||(n=u.LUA_MULTRET);var o=u.lua_gettop(t);e(t),T(t,a);for(var s=0;s<r.length;s++)T(t,r[s]);u.lua_call(t,1+r.length,n);for(var i=u.lua_gettop(t)-o,c=new Array(i),_=0;_<i;_++)c[_]=k(t,o+_+1);return u.lua_settop(t,o),c},x=function(t,e,a){l.luaL_checkstack(t,2),e(t),T(t,a),u.lua_gettable(t,-2);var r=k(t,-1);return u.lua_pop(t,2),r},O=function(t,e,a){l.luaL_checkstack(t,2),e(t),T(t,a),u.lua_gettable(t,-2);var r=u.lua_isnil(t,-1);return u.lua_pop(t,2),r},m=function(t,e,a,r){l.luaL_checkstack(t,3),e(t),T(t,a),T(t,r),u.lua_settable(t,-3),u.lua_pop(t,1)},U=function(t,e,a){l.luaL_checkstack(t,3),e(t),T(t,a),u.lua_pushnil(t),u.lua_settable(t,-3),u.lua_pop(t,1)},E=function(t,e){l.luaL_checkstack(t,1),e(t);var a=l.luaL_tolstring(t,-1);return u.lua_pop(t,2),u.to_jsstring(a)},N=function(){l.luaL_checkstack(this.L,3);var t=u.lua_gettop(this.L);this.iter(this.L),this.state(this.L),this.last(this.L),u.lua_call(this.L,2,u.LUA_MULTRET),this.last=u.lua_toproxy(this.L,t+1);var e=void 0;if(u.lua_isnil(this.L,-1))e={done:!0,value:void 0};else{for(var a=u.lua_gettop(this.L)-t,r=new Array(a),n=0;n<a;n++)r[n]=k(this.L,t+n+1);e={done:!1,value:r}}return u.lua_settop(this.L,t),e},S=function(t,e){l.luaL_requiref(t,u.to_luastring("_G"),o.luaopen_base,0),u.lua_getfield(t,-1,u.to_luastring("pairs")),u.lua_remove(t,-2),e(t),u.lua_call(t,1,3);var a=u.lua_toproxy(t,-3),r=u.lua_toproxy(t,-2),n=u.lua_toproxy(t,-1);return u.lua_pop(t,3),{L:t,iter:a,state:r,last:n,next:N}},R=function(t,e){var a=function(){return b(t,e,this,arguments,1)[0]};return a.apply=function(a,r){return b(t,e,a,r,1)[0]},a.invoke=function(a,r){return b(t,e,a,r,u.LUA_MULTRET)},a.get=function(a){return x(t,e,a)},a.has=function(a){return O(t,e,a)},a.set=function(a,r){return m(t,e,a,r)},a.delete=function(a){return U(t,e,a)},a.toString=function(){return E(t,e)},a[Symbol.toStringTag]="Fengari object",a[Symbol.iterator]=function(){return S(t,e)},Symbol.toPrimitive&&(a[Symbol.toPrimitive]=function(a){if("string"===a)return E(t,e)}),s&&(a[s]=a.toString),a},y={apply:function(t,e,a){return b(t.L,t.p,e,a,1)[0]},get:function(t,e){return x(t.L,t.p,e)},has:function(t,e){return O(t.L,t.p,e)},set:function(t,e,a){return m(t.L,t.p,e,a)},deleteProperty:function(t,e){return U(t.L,t.p,e)}},I=function(t,e){var a=function(){return e(t)};return a.p=e,a.L=t,new Proxy(a,y)},M=function(t,e){var a=v(t,e),r=a[Symbol.iterator];r||l.luaL_argerror(t,e,u.to_luastring("object not iterable"));var n=i(r,a,[]);return f(n)||l.luaL_argerror(t,e,u.to_luastring("Result of the Symbol.iterator method is not an object")),n},C=function(t){var e=k(t,1),a=e.next();return a.done?0:(T(t,a.value),1)},w={new:function(t){for(var e=k(t,1),a=u.lua_gettop(t)-1,r=new Array(a),n=0;n<a;n++)r[n]=k(t,n+2);return T(t,c(e,r)),1},of:function(t){var e=M(t,1);return u.lua_pushcfunction(t,C),T(t,e),2},createproxy:function(t){l.luaL_checkany(t,1);var e=I(L(t),u.lua_toproxy(t,1));return T(t,e),1},tonumber:function(t){var e=k(t,1);return u.lua_pushnumber(t,+e),1},instanceof:function(t){var e=k(t,1),a=k(t,2);return u.lua_pushboolean(t,e instanceof a),1}},P={__index:function(t){var e=v(t,1),a=k(t,2);return T(t,e[a]),1},__newindex:function(t){var e=v(t,1),a=k(t,2),r=k(t,3);return void 0===r?delete e[a]:e[a]=r,0},__tostring:function(t){var e=v(t,1),a=_(e);return u.lua_pushstring(t,u.to_luastring(a)),1},__call:function(t){var e=v(t,1),a=u.lua_gettop(t)-1,r=void 0,n=void 0;if(a>0&&(r=k(t,2),a-- >0)){n=new Array(a);for(var l=0;l<a;l++)n[l]=k(t,l+3)}return T(t,i(e,r,n)),1}},D=function(t){return d.set(L(t),new WeakMap),u.lua_atnativeerror(t,A),l.luaL_newlib(t,w),l.luaL_newmetatable(t,p),l.luaL_setfuncs(t,P,0),u.lua_pop(t,1),g(t,null),u.lua_pushvalue(t,-1),u.lua_rawsetp(t,u.LUA_REGISTRYINDEX,null),u.lua_setfield(t,-2,u.to_luastring("null")),T(t,window),u.lua_setfield(t,-2,u.to_luastring("global")),1};t.exports.checkjs=v,t.exports.testjs=h,t.exports.pushjs=g,t.exports.push=T,t.exports.tojs=k,t.exports.luaopen_js=D}]);